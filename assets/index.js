const yn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const s of l.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}};yn();const bn="modulepreload",er={},Cn="/",at=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${Cn}${n}`,n in er)return;er[n]=!0;const o=n.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${l}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":bn,o||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),o)return new Promise((i,c)=>{s.addEventListener("load",i),s.addEventListener("error",c)})})).then(()=>t())},Sn=(e,t)=>e===t,De=Symbol("solid-proxy"),ut={equals:Sn};let tr=sr;const Be={},$e=1,Pt=2,rr={owned:null,cleanups:null,context:null,owner:null},[wn,Pc]=F(!1);var W=null;let Je=null,z=null,Qe=null,J=null,he=null,_t=0;function je(e,t){t&&(W=t);const r=z,n=W,o=e.length===0?rr:{owned:null,cleanups:null,context:null,owner:n};W=o,z=null;let l;try{It(()=>l=e(()=>Tt(o)),!0)}finally{z=r,W=n}return l}function F(e,t){t=t?Object.assign({},ut,t):ut;const r={value:e,observers:null,observerSlots:null,pending:Be,comparator:t.equals||void 0};return[or.bind(r),n=>(typeof n=="function"&&(n=n(r.pending!==Be?r.pending:r.value)),Et(r,n))]}function Nt(e,t,r){Ze(ft(e,t,!0,$e))}function A(e,t,r){Ze(ft(e,t,!1,$e))}function Pe(e,t,r){tr=kn;const n=ft(e,t,!1,$e);n.user=!0,he&&he.push(n)}function $(e,t,r){r=r?Object.assign({},ut,r):ut;const n=ft(e,t,!0,0);return n.pending=Be,n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Ze(n),or.bind(n)}function _e(e,t,r){arguments.length===2?typeof t=="object"&&(r=t,t=e,e=!0):arguments.length===1&&(t=e,e=!0);const n=new Set,[o,l]=F((r||{}).initialValue),[s,i]=F(void 0,{equals:!1}),[c,u]=F(!1),[d,g]=F();let m,p=null,h=null,C=typeof e=="function";function P(S,I,E){return p===S&&(g(m=E),p=null,R(I)),I}function R(S){qe(()=>{l(()=>S),u(!1);for(const I of n.keys())I.decrement();n.clear()})}function _(){const S=Tn,I=o();if(m)throw m;return z&&!z.user&&S&&Nt(()=>{s(),p&&(S.resolved||n.has(S)||(S.increment(),n.add(S)))}),I}function b(){g(m=void 0);const S=C?e():e;if(S==null||S===!1){P(p,se(o));return}const I=h||se(()=>t(S,o));if(h=null,typeof I!="object"||!("then"in I)){P(p,I);return}p=I,qe(()=>{u(!0),i()}),I.then(E=>P(I,E),E=>P(I,E,E))}return Object.defineProperties(_,{loading:{get(){return c()}},error:{get(){return d()}}}),C?Nt(b):b(),[_,{refetch:b,mutate:l}]}function qe(e){if(Qe)return e();let t;const r=Qe=[];try{t=e()}finally{Qe=null}return It(()=>{for(let n=0;n<r.length;n+=1){const o=r[n];if(o.pending!==Be){const l=o.pending;o.pending=Be,Et(o,l)}}},!1),t}function se(e){let t,r=z;return z=null,t=e(),z=r,t}function nr(e,t,r){const n=Array.isArray(e);let o,l=r&&r.defer;return s=>{let i;if(n){i=[];for(let u=0;u<e.length;u++)i.push(e[u]())}else i=e();if(l){l=!1;return}const c=se(()=>t(i,o,s));return o=i,c}}function Pn(e){Pe(()=>se(e))}function Ve(e){return W===null||(W.cleanups===null?W.cleanups=[e]:W.cleanups.push(e)),e}function lr(){return z}function _n(){return W}function Nn(e,t){const r=W;W=e;try{return t()}finally{W=r}}function En(e,t){queueMicrotask(()=>{qe(e),t&&t()})}function In(){return[wn,En]}function dt(e){const t=Symbol("context");return{id:t,Provider:Ln(t),defaultValue:e}}function Ye(e){return ar(W,e.id)||e.defaultValue}function Rn(e){const t=$(e);return $(()=>Ot(t()))}let Tn;function or(){const e=Je;if(this.sources&&(this.state||e)){const t=J;J=null,this.state===$e||e?Ze(this):Rt(this),J=t}if(z){const t=this.observers?this.observers.length:0;z.sources?(z.sources.push(this),z.sourceSlots.push(t)):(z.sources=[this],z.sourceSlots=[t]),this.observers?(this.observers.push(z),this.observerSlots.push(z.sources.length-1)):(this.observers=[z],this.observerSlots=[z.sources.length-1])}return this.value}function Et(e,t,r){if(e.comparator&&e.comparator(e.value,t))return t;if(Qe)return e.pending===Be&&Qe.push(e),e.pending=t,t;let n=!1;return e.value=t,e.observers&&e.observers.length&&It(()=>{for(let o=0;o<e.observers.length;o+=1){const l=e.observers[o];n&&Je.disposed.has(l),l.pure?J.push(l):he.push(l),l.observers&&(n&&!l.tState||!n&&!l.state)&&ir(l),n||(l.state=$e)}if(J.length>1e6)throw J=[],new Error},!1),t}function Ze(e){if(!e.fn)return;Tt(e);const t=W,r=z,n=_t;z=W=e,On(e,e.value,n),z=r,W=t}function On(e,t,r){let n;try{n=e.fn(t)}catch(o){cr(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.observers&&e.observers.length?Et(e,n):e.value=n,e.updatedAt=r)}function ft(e,t,r,n=$e,o){const l={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:W,context:null,pure:r};return W===null||W!==rr&&(W.owned?W.owned.push(l):W.owned=[l]),l}function et(e){const t=Je;if(e.state!==$e)return e.state=0;if(e.suspense&&se(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<_t);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===$e||t)Ze(e);else if(e.state===Pt||t){const o=J;J=null,Rt(e),J=o}}function It(e,t){if(J)return e();let r=!1;t||(J=[]),he?r=!0:he=[],_t++;try{e()}catch(n){cr(n)}finally{An(r)}}function An(e){J&&(sr(J),J=null),!e&&(he.length?qe(()=>{tr(he),he=null}):he=null)}function sr(e){for(let t=0;t<e.length;t++)et(e[t])}function kn(e){let t,r=0;for(t=0;t<e.length;t++){const o=e[t];o.user?e[r++]=o:et(o)}const n=e.length;for(t=0;t<r;t++)et(e[t]);for(t=n;t<e.length;t++)et(e[t])}function Rt(e){e.state=0;const t=Je;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];n.sources&&(n.state===$e||t?et(n):(n.state===Pt||t)&&Rt(n))}}function ir(e){const t=Je;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=Pt,n.pure?J.push(n):he.push(n),n.observers&&ir(n))}}function Tt(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){const l=o.pop(),s=r.observerSlots.pop();n<o.length&&(l.sourceSlots[s]=n,o[n]=l,r.observerSlots[n]=s)}}if(e.owned){for(t=0;t<e.owned.length;t++)Tt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function cr(e){throw e}function ar(e,t){return e&&(e.context&&e.context[t]||e.owner&&ar(e.owner,t))}function Ot(e){if(typeof e=="function"&&!e.length)return Ot(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ot(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Ln(e){return function(r){let n;return Nt(()=>n=se(()=>(W.context={[e]:r.value},Rn(()=>r.children)))),n}}const Mn=Symbol("fallback");function ur(e){for(let t=0;t<e.length;t++)e[t]()}function Fn(e,t,r={}){let n=[],o=[],l=[],s=0,i=t.length>1?[]:null;return Ve(()=>ur(l)),()=>{let c=e()||[],u,d;return se(()=>{let m=c.length,p,h,C,P,R,_,b,S,I;if(m===0)s!==0&&(ur(l),l=[],n=[],o=[],s=0,i&&(i=[])),r.fallback&&(n=[Mn],o[0]=je(E=>(l[0]=E,r.fallback())),s=1);else if(s===0){for(o=new Array(m),d=0;d<m;d++)n[d]=c[d],o[d]=je(g);s=m}else{for(C=new Array(m),P=new Array(m),i&&(R=new Array(m)),_=0,b=Math.min(s,m);_<b&&n[_]===c[_];_++);for(b=s-1,S=m-1;b>=_&&S>=_&&n[b]===c[S];b--,S--)C[S]=o[b],P[S]=l[b],i&&(R[S]=i[b]);for(p=new Map,h=new Array(S+1),d=S;d>=_;d--)I=c[d],u=p.get(I),h[d]=u===void 0?-1:u,p.set(I,d);for(u=_;u<=b;u++)I=n[u],d=p.get(I),d!==void 0&&d!==-1?(C[d]=o[u],P[d]=l[u],i&&(R[d]=i[u]),d=h[d],p.set(I,d)):l[u]();for(d=_;d<m;d++)d in C?(o[d]=C[d],l[d]=P[d],i&&(i[d]=R[d],i[d](d))):o[d]=je(g);o=o.slice(0,s=m),n=c.slice(0)}return o});function g(m){if(l[d]=m,i){const[p,h]=F(d);return i[d]=h,t(c[d],p)}return t(c[d])}}}function a(e,t){return se(()=>e(t))}function ht(){return!0}const dr={get(e,t,r){return t===De?r:e.get(t)},has(e,t){return e.has(t)},set:ht,deleteProperty:ht,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ht,deleteProperty:ht}},ownKeys(e){return e.keys()}};function At(e){return typeof e=="function"?e():e}function fr(...e){return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const n=At(e[r])[t];if(n!==void 0)return n}},has(t){for(let r=e.length-1;r>=0;r--)if(t in At(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(At(e[r])));return[...new Set(t)]}},dr)}function hr(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),o=t.map(l=>{const s={};for(let i=0;i<l.length;i++){const c=l[i];Object.defineProperty(s,c,n[c]?n[c]:{get(){return e[c]}})}return s});return o.push(new Proxy({get(l){return r.has(l)?void 0:e[l]},has(l){return r.has(l)?!1:l in e},keys(){return Object.keys(e).filter(l=>!r.has(l))}},dr)),o}function gt(e){let t;const r=n=>{if(t){const l=t();if(l)return l(n)}else{const[l]=_e(()=>e().then(s=>s.default));t=l}let o;return $(()=>(o=t())&&se(()=>o(n)))};return r.preload=()=>t||e().then(n=>t=()=>n.default),r}function G(e){const t="fallback"in e&&{fallback:()=>e.fallback};return $(Fn(()=>e.each,e.children,t||void 0))}function Ue(e){let t=!1;const r=$(()=>e.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return $(()=>{const n=r();if(n){const o=e.children;return(t=typeof o=="function"&&o.length>0)?se(()=>o(n)):o}return e.fallback})}const Dn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Bn=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Dn]),jn=new Set(["innerHTML","textContent","innerText","children"]),Vn={className:"class",htmlFor:"for"},gr={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},Un=new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Wn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function y(e,t){return $(e,void 0,t?void 0:{equals:t})}function mr(e,t,r){let n=r.length,o=t.length,l=n,s=0,i=0,c=t[o-1].nextSibling,u=null;for(;s<o||i<l;){if(t[s]===r[i]){s++,i++;continue}for(;t[o-1]===r[l-1];)o--,l--;if(o===s){const d=l<n?i?r[i-1].nextSibling:r[l-i]:c;for(;i<l;)e.insertBefore(r[i++],d)}else if(l===i)for(;s<o;)(!u||!u.has(t[s]))&&e.removeChild(t[s]),s++;else if(t[s]===r[l-1]&&r[i]===t[o-1]){const d=t[--o].nextSibling;e.insertBefore(r[i++],t[s++].nextSibling),e.insertBefore(r[--l],d),t[o]=r[l]}else{if(!u){u=new Map;let g=i;for(;g<l;)u.set(r[g],g++)}const d=u.get(t[s]);if(d!=null)if(i<d&&d<l){let g=s,m=1,p;for(;++g<o&&g<l&&!((p=u.get(t[g]))==null||p!==d+m);)m++;if(m>d-i){const h=t[s];for(;i<d;)e.insertBefore(r[i++],h)}else e.replaceChild(r[i++],t[s++])}else s++;else e.removeChild(t[s++])}}}const pr="_$DX_DELEGATE";function zn(e,t,r){let n;return je(o=>{n=o,f(t,e(),t.firstChild?null:void 0,r)}),()=>{n(),t.textContent=""}}function x(e,t,r){const n=document.createElement("template");n.innerHTML=e;let o=n.content.firstChild;return r&&(o=o.firstChild),o}function Y(e,t=window.document){const r=t[pr]||(t[pr]=new Set);for(let n=0,o=e.length;n<o;n++){const l=e[n];r.has(l)||(r.add(l),t.addEventListener(l,Jn))}}function Ne(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Gn(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function tt(e,t,r,n){n?Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r:Array.isArray(r)?e.addEventListener(t,o=>r[0](r[1],o)):e.addEventListener(t,r)}function Hn(e,t,r={}){const n=Object.keys(t||{}),o=Object.keys(r);let l,s;for(l=0,s=o.length;l<s;l++){const i=o[l];!i||i==="undefined"||t[i]||(xr(e,i,!1),delete r[i])}for(l=0,s=n.length;l<s;l++){const i=n[l],c=!!t[i];!i||i==="undefined"||r[i]===c||!c||(xr(e,i,!0),r[i]=c)}return r}function vr(e,t,r={}){const n=e.style;if(t==null||typeof t=="string")return n.cssText=t;typeof r=="string"&&(r={});let o,l;for(l in r)t[l]==null&&n.removeProperty(l),delete r[l];for(l in t)o=t[l],o!==r[l]&&(n.setProperty(l,o),r[l]=o);return r}function $r(e,t,r,n){typeof t=="function"?A(o=>yr(e,t(),o,r,n)):yr(e,t,void 0,r,n)}function f(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return We(e,t,n,r);A(o=>We(e,t(),o,r),n)}function Xn(e,t,r,n,o={}){let l,s,i;for(const c in t){if(c==="children"){n||We(e,t.children);continue}const u=t[c];if(u!==o[c]){if(c==="style")vr(e,u,o[c]);else if(c==="classList")Hn(e,u,o[c]);else if(c==="ref")u(e);else if(c.slice(0,3)==="on:")e.addEventListener(c.slice(3),u);else if(c.slice(0,10)==="oncapture:")e.addEventListener(c.slice(10),u,!0);else if(c.slice(0,2)==="on"){const d=c.slice(2).toLowerCase(),g=Un.has(d);tt(e,d,u,g),g&&Y([d])}else if((i=jn.has(c))||!r&&(gr[c]||(s=Bn.has(c)))||(l=e.nodeName.includes("-")))l&&!s&&!i?e[Kn(c)]=u:e[gr[c]||c]=u;else{const d=r&&c.indexOf(":")>-1&&Wn[c.split(":")[0]];d?Gn(e,d,c,u):Ne(e,Vn[c]||c,u)}o[c]=u}}}function Kn(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function xr(e,t,r){const n=t.trim().split(/\s+/);for(let o=0,l=n.length;o<l;o++)e.classList.toggle(n[o],r)}function Jn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r}});r!==null;){const n=r[t];if(n&&!r.disabled){const o=r[`${t}Data`];if(o!==void 0?n(o,e):n(e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function yr(e,t,r={},n,o){return!o&&"children"in t&&A(()=>r.children=We(e,t.children,r.children)),A(()=>Xn(e,t,n,!0,r)),r}function We(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;const l=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,l==="string"||l==="number")if(l==="number"&&(t=t.toString()),s){let i=r[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),r=rt(e,r,n,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||l==="boolean")r=rt(e,r,n);else{if(l==="function")return A(()=>{let i=t();for(;typeof i=="function";)i=i();r=We(e,i,r,n)}),()=>r;if(Array.isArray(t)){const i=[];if(kt(i,t,o))return A(()=>r=We(e,i,r,n,!0)),()=>r;if(i.length===0){if(r=rt(e,r,n),s)return r}else Array.isArray(r)?r.length===0?br(e,i,n):mr(e,r,i):r==null||r===""?br(e,i):mr(e,s&&r||[e.firstChild],i);r=i}else if(t instanceof Node){if(Array.isArray(r)){if(s)return r=rt(e,r,n,t);rt(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function kt(e,t,r){let n=!1;for(let o=0,l=t.length;o<l;o++){let s=t[o],i;if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))n=kt(e,s)||n;else if((i=typeof s)==="string")e.push(document.createTextNode(s));else if(i==="function")if(r){for(;typeof s=="function";)s=s();n=kt(e,Array.isArray(s)?s:[s])||n}else e.push(s),n=!0;else e.push(document.createTextNode(s.toString()))}return n}function br(e,t,r){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function rt(e,t,r,n){if(r===void 0)return e.textContent="";const o=n||document.createTextNode("");if(t.length){let l=!1;for(let s=t.length-1;s>=0;s--){const i=t[s];if(o!==i){const c=i.parentNode===e;!l&&!s?c?e.replaceChild(o,i):e.insertBefore(o,r):c&&e.removeChild(i)}else l=!0}}else e.insertBefore(o,r);return[o]}const Qn="http://www.w3.org/2000/svg";function qn(e,t=!1){return t?document.createElementNS(Qn,e):document.createElement(e)}function Yn(e){const{useShadow:t}=e,r=document.createTextNode(""),n=e.mount||document.body;function o(){return()=>e.children}if(n instanceof HTMLHeadElement){const[l,s]=F(!1),i=()=>s(!0);je(c=>f(n,()=>l()?c():o()(),null)),Ve(()=>{i()})}else{const l=qn(e.isSVG?"g":"div",e.isSVG),s=t&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"host",{get(){return r.parentNode}}),f(s,o()),n.appendChild(l),e.ref&&e.ref(l),Ve(()=>n.removeChild(l))}return r}function Zn(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function el([e,t],r,n){return[r?()=>r(e()):e,n?o=>t(n(o)):t]}function tl(e,t,r,n){let o=!1;const l=el(F({value:e()},{equals:(s,i)=>s.value===i.value}),void 0,s=>(!o&&t(s),s));return r&&Ve(r((s=e())=>{o=!0,l[1]({value:s}),o=!1})),{signal:l,utils:n}}function rl(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:F({value:""})};return e}function nl(){return tl(()=>window.location.pathname+window.location.search+window.location.hash,({value:e,replace:t,scroll:r})=>{t?window.history.replaceState(null,"",e):window.history.pushState(null,"",e),r&&window.scrollTo(0,0)},e=>Zn(window,"popstate",()=>e()))}const ll=/^(?:[a-z0-9]+:)?\/\//i,ol=/^\/+|\/+$|\s+/;function Lt(e){const t=e.replace(ol,"");return t?"/"+t:""}function mt(e,t,r){if(ll.test(t))return;const n=Lt(e),o=r&&Lt(r);let l="";return!o||t.charAt(0)==="/"?l=n:o.toLowerCase().indexOf(n.toLowerCase())!==0?l=n+o:l=o,l+Lt(t)||"/"}function sl(e,t){if(e==null)throw new Error(t);return e}function il(e,t){return`${e.replace(/[/*]+$/,"")}/${t.replace(/^\/+/,"")}`}function cl(e){const t={};return e.searchParams.forEach((r,n)=>{t[n]=r}),t}function al(e,t){const[r,n]=e.split("/*",2),o=r.split("/").filter(Boolean),l=o.length;return s=>{const i=s.split("/").filter(Boolean),c=i.length-l;if(c<0||c>0&&n===void 0&&!t)return null;const u={path:l?"":"/",params:{}};for(let d=0;d<l;d++){const g=o[d],m=i[d];if(g[0]===":")u.params[g.slice(1)]=m;else if(g.localeCompare(m,void 0,{sensitivity:"base"})!==0)return null;u.path+=`/${m}`}return n&&(u.params[n]=c?i.slice(-c).join("/"):""),u}}function ul(e){const[t,r]=e.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((o,l)=>o+(l.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function Cr(e){const t=new Map,r=_n();return new Proxy({},{get(n,o){return(t.get(o)||Nn(r,()=>{const s=$(()=>e()[o]);return t.set(o,s),s}))()}})}const dl=100,Sr=dt(),pt=dt(),nt=()=>sl(Ye(Sr),"Make sure your app is wrapped in a <Router />"),Mt=()=>Ye(pt)||nt().base,wr=e=>{const t=Mt();return $(()=>t.resolvePath(e()))},fl=e=>{const t=nt();return $(()=>{const r=e();return r!==void 0?t.renderPath(r):r})},hl=()=>nt().navigatorFactory(),Pr=()=>nt().location;function gl(e,t="",r){const{path:n,component:o,data:l,children:s}=e,i=!s||Array.isArray(s)&&!s.length,c=il(t,n),u=i?c:c.split("/*",1)[0];return{originalPath:n,pattern:u,element:o?()=>a(o,{}):()=>{const{element:d}=e;return d===void 0&&r?a(r,{}):d},preload:e.component?o.preload:e.preload,data:l,matcher:al(u,!i)}}function ml(e,t=0){return{routes:e,score:ul(e[e.length-1])*1e4-t,matcher(r){const n=[];for(let o=e.length-1;o>=0;o--){const l=e[o],s=l.matcher(r);if(!s)return null;n.unshift({...s,route:l})}return n}}}function _r(e,t="",r,n=[],o=[]){const l=Array.isArray(e)?e:[e];for(let s=0,i=l.length;s<i;s++){const c=l[s],u=gl(c,t,r);if(n.push(u),c.children)_r(c.children,u.pattern,r,n,o);else{const d=ml([...n],o.length);o.push(d)}n.pop()}return n.length?o:o.sort((s,i)=>i.score-s.score)}function pl(e,t){for(let r=0,n=e.length;r<n;r++){const o=e[r].matcher(t);if(o)return o}return[]}function vl(e){const t=new URL("http://sar"),r=$(c=>{const u=e();try{return new URL(u,t)}catch{return console.error(`Invalid path ${u}`),c}},t,{equals:(c,u)=>c.href===u.href}),n=$(()=>r().pathname),o=$(()=>r().search.slice(1)),l=$(()=>r().hash.slice(1)),s=$(()=>null),i=$(()=>"");return{get pathname(){return n()},get search(){return o()},get hash(){return l()},get state(){return s()},get key(){return i()},query:Cr(nr(o,()=>cl(r())))}}function $l(e,t="",r,n){const{signal:[o,l],utils:s}=rl(e),i=mt("",t),c=void 0;if(i===void 0)throw new Error(`${i} is not a valid base path`);i&&!o().value&&l({value:i,replace:!0,scroll:!1});const[u,d]=In(),[g,m]=F(o().value),p=vl(g),h=[],C={pattern:i,params:{},path:()=>i,outlet:()=>null,resolvePath(b){return mt(i,b)}};r&&(C.data=r({params:{},location:p,navigate:R(C)}));function P(b,S,I){se(()=>{if(typeof S=="number"){console.warn("Relative navigation is not implemented - doing nothing :)");return}const{replace:E,resolve:O,scroll:L}={replace:!1,resolve:!0,scroll:!0,...I},X=O?b.resolvePath(S):mt("",S);if(X===void 0)throw new Error(`Path '${S}' is not a routable path`);if(h.length>=dl)throw new Error("Too many redirects");const K=g();if(X!==K){const re=h.push({value:K,replace:E,scroll:L});d(()=>m(X),()=>{h.length===re&&_(X)})}})}function R(b){return b=b||Ye(pt)||C,(S,I)=>P(b,S,I)}function _(b){const S=h[0];S&&(b!==S.value&&l({value:b,replace:S.replace,scroll:S.scroll}),h.length=0)}return A(()=>{const b=o().value;b!==se(g)&&d(()=>m(b))}),{base:C,out:c,location:p,isRouting:u,renderPath:s&&s.renderPath||(b=>b),navigatorFactory:R}}function xl(e,t,r,n){const{base:o,location:l,navigatorFactory:s}=e,{pattern:i,element:c,preload:u,data:d}=n().route,g=$(()=>n().path),m=Cr(()=>n().params);u&&u();const p={parent:t,pattern:i,get child(){return r()},path:g,params:m,outlet:c,resolvePath(h){return mt(o.path(),h,g())}};return d&&(p.data=d({params:m,location:l,navigate:s(p)})),p}const yl=x("<a></a>"),bl=e=>{const{source:t,url:r,base:n,data:o,out:l}=e,s=t||nl(),i=$l(s,n,o);return a(Sr.Provider,{value:i,get children(){return e.children}})},Cl=e=>{const t=nt(),r=Mt(),n=wr(()=>e.base||""),o=$(()=>_r(e.children,n()||"",Sl)),l=$(()=>pl(o(),t.location.pathname));t.out&&t.out.matches.push(l().map(({route:u,path:d,params:g})=>({originalPath:u.originalPath,pattern:u.pattern,path:d,params:g})));const s=[];let i;const c=$(nr(l,(u,d,g)=>{let m=d&&u.length===d.length;const p=[];for(let h=0,C=u.length;h<C;h++){const P=d&&d[h],R=u[h];g&&P&&R.route.pattern===P.route.pattern?p[h]=g[h]:(m=!1,s[h]&&s[h](),je(_=>{s[h]=_,p[h]=xl(t,p[h-1]||r,()=>c()[h+1],()=>l()[h])}))}return s.splice(u.length).forEach(h=>h()),g&&m?g:(i=p[0],p)}));return a(Ue,{get when(){return c()&&i},children:u=>a(pt.Provider,{value:u,get children(){return u.outlet()}})})},ze=e=>e,Sl=()=>{const e=Mt();return a(Ue,{get when(){return e.child},children:t=>a(pt.Provider,{value:t,get children(){return t.outlet()}})})};function wl(e){const[,t]=hr(e,["children","to","href","onClick"]),r=hl(),n=fl(()=>e.to),o=l=>{const{onClick:s,to:i,target:c}=e;typeof s=="function"?s(l):s&&s[0](s[1],l),i!==void 0&&!l.defaultPrevented&&l.button===0&&(!c||c==="_self")&&!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)&&(l.preventDefault(),r(i,{resolve:!1,replace:e.replace||!1,scroll:!e.noScroll}))};return(()=>{const l=yl.cloneNode(!0);return l.$$click=o,$r(l,t,!1,!0),f(l,()=>e.children),A(()=>Ne(l,"href",n()||e.href)),l})()}function Nr(e){e=fr({activeClass:"active"},e);const[,t]=hr(e,["activeClass","end"]),r=Pr(),n=wr(()=>e.href),o=$(()=>{const l=n();if(l===void 0)return!1;const s=l.split(/[?#]/,1)[0].toLowerCase(),i=r.pathname.toLowerCase();return e.end?s===i:i.startsWith(s)});return a(wl,fr(t,{get to(){return n()},get classList(){return{[e.activeClass]:o()}},get["aria-current"](){return o()?"page":void 0}}))}Y(["click"]);var Er={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],o=0;o<arguments.length;o++){var l=arguments[o];if(!!l){var s=typeof l;if(s==="string"||s==="number")n.push(l);else if(Array.isArray(l)){if(l.length){var i=r.apply(null,l);i&&n.push(i)}}else if(s==="object")if(l.toString===Object.prototype.toString)for(var c in l)t.call(l,c)&&l[c]&&n.push(c);else n.push(l.toString())}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Er);var j=Er.exports,Pl="/eco-icon.ico";const _l=x('<div class="inline-block"></div>'),Nl=x("<div></div>"),El="SW",Il="SE",Rl=(e,t,r,n,o,l,s)=>{switch(e){case"E":return{x:o,y:s};case"N":return{x:l,y:t};case"NE":return{x:o,y:t};case"NW":return{x:n,y:t};case"W":return{x:n,y:s};case"S":return{x:l,y:r};case"SE":return{x:o,y:r};case"SW":return{x:n,y:r}}},Tl=e=>{switch(e){case"E":return{x:"0px",y:"-50%"};case"N":return{x:"-50%",y:"-100%"};case"NE":return{x:"0px",y:"-100%"};case"NW":return{x:"-100%",y:"-100%"};case"W":return{x:"-100%",y:"-50%"};case"S":return{x:"-50%",y:"0px"};case"SE":return{x:"0px",y:"0px"};case"SW":return{x:"-100%",y:"0px"}}};var Ir=e=>{let t;const[r,n]=F({left:"0px",top:"0px"}),o=()=>{const l=t.getBoundingClientRect(),s=Rl(e.origin??El,l.top,l.top+l.height,l.left,l.left+l.width,l.left+l.width/2,l.top+l.height/2),i=Tl(e.direction??Il);n({left:`${s.x}px`,top:`${s.y+document.documentElement.scrollTop}px`,transform:`translate3d(${i.x}, ${i.y}, 0)`})};return Pe(()=>{e.isMenuOpen()?(window.addEventListener("scroll",o),window.addEventListener("resize",o),o()):(window.removeEventListener("scroll",o),window.removeEventListener("resize",o))}),Ve(()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}),(()=>{const l=_l.cloneNode(!0),s=t;return typeof s=="function"?s(l):t=l,f(l,()=>e.children,null),f(l,(()=>{const i=y(()=>!!e.isMenuOpen(),!0);return()=>i()&&a(Yn,{get children(){const c=Nl.cloneNode(!0);return f(c,()=>e.renderMenu()),A(u=>{const d=j("absolute",{[e?.class??""]:!!e.class}),g=r();return d!==u._v$&&(c.className=u._v$=d),u._v$2=vr(c,g,u._v$2),u},{_v$:void 0,_v$2:void 0}),c}})})(),null),l})()},Ol=(e,t)=>{const[r,n]=F(!1),o=()=>{if(r()){n(!1);return}e()};return Pe(()=>{t()?(document.addEventListener("click",o),window.addEventListener("blur",o)):(document.removeEventListener("click",o),window.removeEventListener("blur",o))}),{onClickCapture:()=>n(!0)}};const Al=x('<div role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"><div class="py-1" role="none"></div></div>'),kl=x('<button role="menuitem"></button>'),Ll=x('<div class="bg-bgColor-primary text-textColor block px-4 py-2 text-sm w-full text-left"></div>'),Ml=x('<div><button type="button" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover inline-flex justify-center w-full rounded-md border h-8 px-2 py-1 text-sm font-small focus:outline-none" id="menu-button" aria-expanded="true" aria-haspopup="true"><svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div>');var Ee=e=>{const[t,r]=F(!1),n=Ol(()=>r(!1),t);return a(Ir,{isMenuOpen:t,renderMenu:()=>t()?(()=>{const l=Al.cloneNode(!0),s=l.firstChild;return $r(l,n,!1,!0),f(s,a(G,{get each(){return e.values},children:i=>i.selectable!==!1?(()=>{const c=kl.cloneNode(!0);return c.$$click=()=>{r(!1),e.onChange(i.value)},f(c,()=>i.text),A(()=>c.className=j("bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor block px-4 py-2 text-sm w-full text-left",{["bg-bgColor-primary-hover"]:i.value==e.value})),c})():(()=>{const c=Ll.cloneNode(!0);return f(c,()=>i.text),c})()})),A(()=>l.className=j("bg-bgColor-primary text-textColor border-borderColor-primary w-56 rounded-md shadow-lg border transform focus:outline-none z-50",{["transition ease-out duration-100 opacity-100 scale-100"]:t(),["transition ease-in duration-75 opacity-0 scale-95"]:!t()})),l})():void 0,get origin(){return e.origin},get direction(){return e.direction},get children(){const l=Ml.cloneNode(!0),s=l.firstChild,i=s.firstChild;return s.$$click=c=>{r(u=>!u),c.stopPropagation()},f(s,()=>e.values.find(c=>c.value==e.value)?.text,i),A(()=>l.className=j("inline-block text-left",e.class)),l}})};Y(["click"]);const Fl=x('<nav class="bg-bgColor-secondary"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16"><div class="flex items-center"><div class="flex-shrink-0"><img class="h-8 w-8" alt="Workflow"></div><div class="hidden md:block"><div class="ml-10 flex items-baseline space-x-4"></div></div></div><div></div><div class="-mr-2 flex md:hidden"><button type="button" class="text-textColor-secondary hover:bg-bgColor-secondary-hover focus:bg-bgColor-secondary-hover inline-flex items-center justify-center p-2 rounded-md focus:outline-none" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div></div><div id="mobile-menu"><div class="px-2 pt-2 pb-3 space-y-1 sm:px-3"></div></div></nav>'),Ft="os",Rr="dark",Tr="light",Dl=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,Or=e=>{localStorage.theme=e;let t=e!==Ft?e:Dl()?Rr:Tr;document.documentElement.className=t};var Bl=e=>{const[t,r]=F(!1),[n,o]=F("theme"in localStorage?localStorage.theme:Ft),l=s=>{o(s),Or(s)};return Or(n()),(()=>{const s=Fl.cloneNode(!0),i=s.firstChild,c=i.firstChild,u=c.firstChild,d=u.firstChild,g=d.firstChild,m=d.nextSibling,p=m.firstChild,h=u.nextSibling,C=h.nextSibling,P=C.firstChild,R=P.firstChild,_=R.nextSibling,b=_.nextSibling,S=i.nextSibling,I=S.firstChild;return Ne(g,"src",Pl),f(p,()=>e.routes.map(E=>a(Nr,{get href(){return E.href},end:!0,get class(){return j("bg-bgColor-secondary text-textColor px-3 py-2 rounded-md text-sm font-medium ",{"bg-bgColor-secondary-hover text-textColor-secondary":E.highlight,"hover:bg-bgColor-secondary-hover hover: text-textColor-secondary":!E.highlight})},get["aria-current"](){return E.highlight?"page":void 0},get children(){return E.text}}))),f(h,a(Ee,{get value(){return n()},values:[{value:Ft,text:"System theme"},{value:Tr,text:"Light theme"},{value:Rr,text:"Dark theme"}],onChange:E=>l(`${E}`),origin:"SE",direction:"SW"})),P.$$click=()=>r(E=>!E),f(I,()=>e.routes.map(E=>a(Nr,{get href(){return E.href},end:!0,get class(){return j("block px-3 py-2 rounded-md text-base font-medium",{"bg-bgColor-secondary-hover text-textColor-secondary":E.highlight,"hover:bg-bgColor-secondary-hover hover: text-textColor-secondary":!E.highlight})},get["aria-current"](){return E.highlight?"page":void 0},get children(){return E.text}}))),A(E=>{const O=j("h-6 w-6",{block:!t(),hidden:t()}),L=j("h-6 w-6",{block:t(),hidden:!t()}),X=j("md:hidden",{block:t(),hidden:!t()});return O!==E._v$&&Ne(_,"class",E._v$=O),L!==E._v$2&&Ne(b,"class",E._v$2=L),X!==E._v$3&&(S.className=E._v$3=X),E},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()};Y(["click"]);const Dt=Symbol("store-raw"),vt=Symbol("store-node"),jl=Symbol("store-name");function Ar(e,t){let r=e[De];if(!r){Object.defineProperty(e,De,{value:r=new Proxy(e,Wl)});const n=Object.keys(e),o=Object.getOwnPropertyDescriptors(e);for(let l=0,s=n.length;l<s;l++){const i=n[l];if(o[i].get){const c=o[i].get.bind(r);Object.defineProperty(e,i,{get:c})}}}return r}function Ge(e){return e!=null&&typeof e=="object"&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function lt(e,t=new Set){let r,n,o,l;if(r=e!=null&&e[Dt])return r;if(!Ge(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,i=e.length;s<i;s++)o=e[s],(n=lt(o,t))!==o&&(e[s]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,u=s.length;c<u;c++)l=s[c],!i[l].get&&(o=e[l],(n=lt(o,t))!==o&&(e[l]=n))}return e}function $t(e){let t=e[vt];return t||Object.defineProperty(e,vt,{value:t={}}),t}function Vl(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||t===De||t===vt||t===jl||(delete r.value,delete r.writable,r.get=()=>e[De][t]),r}function Ul(e){if(lr()){const t=$t(e);(t._||(t._=Bt()))()}return Reflect.ownKeys(e)}function Bt(){const[e,t]=F(void 0,{equals:!1,internal:!0});return e.$=t,e}const Wl={get(e,t,r){if(t===Dt)return e;if(t===De)return r;const n=e[t];if(t===vt||t==="__proto__")return n;const o=Ge(n);if(lr()&&(typeof n!="function"||e.hasOwnProperty(t))){let l,s;o&&(l=$t(n))&&(s=l._||(l._=Bt()),s()),l=$t(e),s=l[t]||(l[t]=Bt()),s()}return o?Ar(n):n},set(){return!0},deleteProperty(){return!0},ownKeys:Ul,getOwnPropertyDescriptor:Vl};function xt(e,t,r){if(e[t]===r)return;const n=Array.isArray(e),o=e.length,l=r===void 0,s=n||l===t in e;l?delete e[t]:e[t]=r;let i=$t(e),c;(c=i[t])&&c.$(),n&&e.length!==o&&(c=i.length)&&c.$(),s&&(c=i._)&&c.$()}function zl(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const o=r[n];xt(e,o,t[o])}}function ot(e,t,r=[]){let n,o=e;if(t.length>1){n=t.shift();const s=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)ot(e,[n[c]].concat(t),[n[c]].concat(r));return}else if(i&&s==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&ot(e,[c].concat(t),[c].concat(r));return}else if(i&&s==="object"){const{from:c=0,to:u=e.length-1,by:d=1}=n;for(let g=c;g<=u;g+=d)ot(e,[g].concat(t),[g].concat(r));return}else if(t.length>1){ot(e[n],t,[n].concat(r));return}o=e[n],r=[n].concat(r)}let l=t[0];typeof l=="function"&&(l=l(o,r),l===o)||n===void 0&&l==null||(l=lt(l),n===void 0||Ge(o)&&Ge(l)&&!Array.isArray(l)?zl(o,l):xt(e,n,l))}function Gl(e,t){const r=lt(e||{}),n=Ar(r);function o(...l){qe(()=>ot(r,l))}return[n,o]}const kr={get(e,t){if(t===Dt)return e;const r=e[t];return Ge(r)?new Proxy(r,kr):r},set(e,t,r){return xt(e,t,lt(r)),!0},deleteProperty(e,t){return xt(e,t,void 0),!0}};function Lr(e){return t=>{const r=t;return Ge(r)&&e(new Proxy(r,kr)),r}}function ae(e,t){const[r,n]=Gl(e);return localStorage[t]&&n(JSON.parse(localStorage[t])),Pe(()=>localStorage[t]=JSON.stringify(r)),[r,n]}const Hl=/(<([^>]+)>)/gi,Xl=e=>e.replace(Hl,""),ge=(e,t)=>e.length===0||t?.toLowerCase()?.indexOf(e?.toLowerCase())>=0,Mr=(e,t)=>e.length===0||t?.toLowerCase()===e?.toLowerCase(),Ae=(e,t)=>e.length===0||e[0].length===0||e.some(r=>t.includes(r)),jt=(e,t,r)=>r.indexOf(e)===t,Fr=(e,t,r)=>r?.slice((e-1)*t,e*t),Dr=(e,t)=>Math.ceil((t?.length??0)/e),D=e=>+e.toFixed(2),ke=(e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()),Kl=e=>(t,r)=>e(t).toLowerCase().localeCompare(e(r).toLowerCase()),Jl=e=>(t,r)=>{const n=t.indexOf(e)>=0,o=r.indexOf(e)>=0;return n&&o||!n&&!o?t.toLowerCase().localeCompare(r.toLowerCase()):n?1:-1},Ql=e=>{const t=e.reduce((r,n)=>({sum:r.sum+n.price*n.quantity,count:r.count+n.quantity}),{sum:0,count:0});return t.count>0?D(t.sum/t.count):null},ql=(e,t)=>Math.ceil(e*t),Br=(e,t)=>t?D(e*t):0,Yl=e=>1/(1-e/100),Zl=e=>{const t=Math.floor(100/e.Products.length);return e.Products.map((r,n)=>({prod:r.Name,perc:n!==e.Products.length-1?t:100-(e.Products.length-1)*t}))},jr=(e,t,r)=>{let n=r;return e.map((o,l)=>{let s=o.prod===t?r:o.perc;return o.prod!==t&&(n+s>100&&(s=100-n),n+=s),l===e.length-1&&(s+=100-n),{...o,perc:s}})},He=e=>`T_${e}`,ue=e=>`I_${e}`,de=e=>e.IsSpecificItem?ue(e.Name):He(e.Tag),Vt=e=>e.IsSpecificItem?e.Name:`Tag ${e.Tag}`,eo=e=>e.startsWith(ue(""))?{IsSpecificItem:!0,Name:e.substring(ue("").length),Tag:""}:e.startsWith(He(""))?{IsSpecificItem:!1,Name:"",Tag:e.substring(He("").length)}:{IsSpecificItem:!0,Name:"old_"+e,Tag:""},to=e=>new Date(e.Year,e.Month-1,e.Day,e.Hour,e.Min,e.Sec),Vr=(e,t,r)=>{const n=e?.filter(l=>r.includes(l.ItemName)&&l.CurrencyName===t)??[],o=n.filter(l=>!l.Buying&&l.Quantity>0);return{Offers:n,AvgPrice:Ql(o?.map(l=>({price:l.Price,quantity:l.Quantity}))??[])}},Ur={readServer:".netlify/functions/servers",readDB:(e,t)=>`.netlify/functions/files?server=${e}&file=${t}`};async function Le(e){try{return await(await fetch(e)).json()}catch{}}async function ro(e){var t=localStorage.getItem("authtoken")??"",r=localStorage.getItem("authtokentype")??"";try{return await(await fetch(e,{headers:{"X-Auth-Token":t,"X-Auth-Token-Type":r}})).json()}catch{}}const no=(e,t)=>Le(Ur.readDB(e,t)),lo=()=>Le(Ur.readServer),oo=e=>Le("/data/Stores.json").then(t=>t?{...t,Stores:t?.Stores?.map(r=>({...r,Name:Xl(r.Name)}))}:void 0),so=e=>Le("/data/Recipes.json"),io=e=>Le("/data/Tags.json"),co=e=>Le("/data/AllItems.json"),ao=e=>Le("/data/CraftingTables.json"),uo=()=>ro("/api/v1/plugins/EcoLiveDataExporter/username"),Wr=dt({serversResource:void 0,storesResource:void 0,recipesResource:void 0,tagsResource:void 0,craftingTablesResource:void 0,currentServer:()=>"",isLoadingResources:()=>!0,dbs:()=>[],currentCurrency:()=>"",allCurrencies:()=>[],allProfessions:()=>[],allCraftingTables:()=>[],allProductsInStores:()=>[],allCraftableProducts:()=>({}),allCraftableProductsWithOffers:()=>[],allItemsAndTagsWithPrice:()=>({}),allTablesPerUser:()=>({}),mainState:{server:"",currency:"",userName:"",calorieCost:0,costPer1kJoule:0},forceRefetch:{servers:()=>{},stores:()=>{},recipes:()=>{},tags:()=>{},allItems:()=>{},craftingTables:()=>{}},get:{personalPrice:e=>0,craftAmmount:e=>1,craftModule:e=>0,craftLavish:e=>!0,calorieCostPerRecipe:e=>0,recipeMargin:e=>0,costPercentage:e=>[],craftLevel:e=>0,itemsInTag:e=>[]},getState:{personalPrice:{}},update:{server:()=>{},currency:()=>{},userName:()=>{},personalPrice:(e,t,r)=>{},craftAmmount:(e,t)=>{},craftModule:(e,t)=>{},craftLavish:(e,t)=>{},craftLevel:(e,t)=>{},recipeMargin:(e,t)=>{},costPercentage:()=>{},calorieCost:e=>{},costPer1kJoule:e=>{}},clear:{personalPriceCurrency:(e,t)=>{},personalPriceProduct:e=>{},personalCurrency:e=>{}}}),fo=e=>{const[t,r]=ae({},"PersonalPricesStore"),[n,o]=ae({},"craftAmmountStore"),[l,s]=ae({},"craftModuleStore"),[i,c]=ae({},"craftLavishStore"),[u,d]=ae({},"craftLevelStore"),[g,m]=ae({},"recipeMarginStore"),[p,h]=ae({},"CostPercentagesStore"),[C,P]=ae({server:"local",currency:"",userName:"",calorieCost:0,costPer1kJoule:0},"MainStore"),[R,{refetch:_}]=_e(lo),b=$(()=>(R?.()??[])?.map(v=>v.key).includes(C.server)?C.server:R?.()?.length??0>0?R()?.[0].key??"":C.server),[S,{refetch:I}]=_e(b,oo),[E,{refetch:O}]=_e(b,so),[L,{refetch:X}]=_e(b,io),[K,{refetch:re}]=_e(b,co);uo().then(v=>{console.log(v?.username)});const[ne,{refetch:le}]=_e(b,ao),pe=$(()=>Object.entries(K()?.AllItems??{}).reduce((v,w)=>(w[1]?.Tags?.forEach(M=>{v[M]=[...v?.[M]??[],w[0]]}),v),{})),Ce=$(()=>!S()||!E()||!L()||!ne()),oe=$(()=>S()?.Stores?.map(v=>v.CurrencyName).filter(jt).sort(Jl("Credit"))),ie=$(()=>{if(oe()?.includes(C.currency))return C.currency;if(C.userName.length>0){const v=oe()?.find(w=>w.indexOf(C.userName)===1);if(v)return v}return oe()?.[0]??""}),Se=$(()=>S()?.Stores?.map(v=>v.AllOffers.map(w=>({...w,StoreName:v.Name,StoreOwner:v.Owner,CurrencyName:v.CurrencyName}))).flat().sort((v,w)=>{const M=v.ItemName?.toLowerCase().localeCompare(w.ItemName?.toLowerCase());return M!==0?M:v.Buying?1:-1})),ve=$(()=>E()?.Recipes?.map(v=>v.Variants.map(w=>w.Products.map(M=>({Name:M.Name,Recipe:v,Variant:w})))?.flat())?.flat()?.reduce((v,w)=>({...v,[w.Name]:{Name:w.Name,RecipeVariants:[...v[w.Name]?.RecipeVariants??[],{Recipe:w.Recipe,Variant:w.Variant}]}}),{})??{}),it=$(()=>Object.values(ve()).map(v=>({...v,Offers:Se()?.filter(w=>w.ItemName===v.Name)})).map(v=>{for(let w=0;w<v.RecipeVariants.length;++w){const M=v.RecipeVariants[w];v.RecipeVariants.findIndex((Fe,xn)=>Fe.Variant.Key==M.Variant.Key&&w!=xn)>=0&&(M.Variant.Key+=""+w)}return v}).sort((v,w)=>v.Name?.toLowerCase()?.localeCompare(w.Name?.toLowerCase()??"")??0)),ct=$(()=>E()?.Recipes?.map(v=>v.SkillNeeds.map(w=>w.Skill)).flat().filter(jt).sort(ke)),Zt=$(()=>E()?.Recipes?.map(v=>v.CraftingTable).filter(jt).sort(ke)),T=$(()=>Object.keys(K()?.AllItems??{}).reduce((v,w)=>(v[w]===void 0&&(v[w]={Name:w,RecipeVariants:ve()[w]?.RecipeVariants??[]}),v),{})),B=$(()=>Object.entries(T()).reduce((v,[w,M])=>(v[ue(w)]={Name:M.Name,IsSpecificItem:!0,...Vr(Se(),ie(),[M.Name])},v),{})),we=$(()=>Object.entries(pe()).reduce((v,[w,M])=>(v[He(w)]={Name:w,IsSpecificItem:!1,...Vr(Se(),ie(),M)},v),{})),Oe=$(()=>({...B(),...we()})),ce=$(()=>ne()?.CraftingTables?.reduce((v,w)=>(v[w.OwnerName]=[...v[w.OwnerName]??[],w],v),{})),q={serversResource:R,storesResource:S,recipesResource:E,tagsResource:L,craftingTablesResource:ne,currentServer:b,isLoadingResources:Ce,currentCurrency:ie,allCurrencies:oe,allProfessions:ct,allCraftingTables:Zt,allProductsInStores:Se,allCraftableProducts:ve,allCraftableProductsWithOffers:it,allItemsAndTagsWithPrice:Oe,allTablesPerUser:ce,mainState:C,forceRefetch:{servers:_,stores:I,recipes:O,tags:X,allItems:re,craftingTables:le},get:{personalPrice:v=>t[v??""]?.[ie()],craftAmmount:v=>n[v??""]??1,craftModule:v=>l[v??""]??0,craftLavish:v=>i[v??""],craftLevel:v=>u[v??""]??0,recipeMargin:v=>g[v??""]??0,costPercentage:v=>p[v??""],itemsInTag:v=>pe()?.[v]?.map(w=>({Name:w,...K()?.AllItems[w]}))??[]},getState:{personalPrice:t},update:{server:v=>P({server:v}),currency:v=>P({currency:v}),userName:v=>{if(ie().length==0||oe()?.filter(w=>w===ie()).length===0){const w=oe()?.find(M=>M.indexOf(v)===1);w&&P({currency:w})}P({userName:v})},personalPrice:(v,w,M)=>r(Fe=>({[v]:{...Fe[v]??{},[w]:M}})),craftAmmount:(v,w)=>o({[v]:w}),craftModule:(v,w)=>s({[v]:w}),craftLavish:(v,w)=>c({[v]:w}),craftLevel:(v,w)=>d({[v]:w}),recipeMargin:(v,w)=>m({[v]:w}),costPercentage:(v,w)=>h(M=>({...M,[v]:w})),calorieCost:v=>P({calorieCost:v}),costPer1kJoule:v=>P({costPer1kJoule:v})},clear:{personalPriceCurrency:(v,w)=>r(Lr(M=>{delete M[v][w],Object.keys(M[v]).length===0&&delete M[v]})),personalPriceProduct:v=>r(v,()=>{}),personalCurrency:v=>r(Lr(w=>{Object.entries(w).forEach(([M,Fe])=>{delete Fe[v],Object.keys(Fe).length===0&&delete w[M]})}))}};return a(Wr.Provider,{value:q,get children(){return e.children}})},U=()=>Ye(Wr),ho=x('<div class="flex flex-col flex-grow"><div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"><div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"><div class="text-textColor border-borderColor-primary shadow overflow-hidden border sm:rounded-lg"><table class="min-w-full divide-y divide-borderColor-primary"></table></div></div></div></div>');var Z=e=>(()=>{const t=ho.cloneNode(!0),r=t.firstChild,n=r.firstChild,o=n.firstChild,l=o.firstChild;return f(l,()=>e.children),t})();const go=x('<tbody class="divide-y divide-borderColor-primary"></tbody>');var ee=e=>(()=>{const t=go.cloneNode(!0);return f(t,()=>e.children),t})();const mo=x('<thead class="bg-bgColor-primary-hover"><tr></tr></thead>');var te=e=>(()=>{const t=mo.cloneNode(!0),r=t.firstChild;return f(r,()=>e.children),t})();const po="_sortableLink_y08gu_1",vo="_sortIcon_y08gu_8",$o="_sorted_y08gu_12";var Ut={sortableLink:po,sortIcon:vo,sorted:$o};const xo=x('<th scope="col" class="text-textColor px-6 py-3 text-left text-xs font-medium uppercase tracking-wider whitespace-nowrap"></th>'),yo=x("<a><div></div></a>"),bo=x('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3.202l3.839 4.798h-7.678l3.839-4.798zm0-3.202l-8 10h16l-8-10zm3.839 16l-3.839 4.798-3.839-4.798h7.678zm4.161-2h-16l8 10 8-10z"></path></svg>'),Co=x('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3.202l3.839 4.798h-7.678l3.839-4.798zm0-3.202l-8 10h16l-8-10zm8 14h-16l8 10 8-10z"></path></svg>'),So=x('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0l-8 10h16l-8-10zm3.839 16l-3.839 4.798-3.839-4.798h7.678zm4.161-2h-16l8 10 8-10z"></path></svg>');var N=e=>(()=>{const t=xo.cloneNode(!0);return f(t,()=>!e.onSort&&e.children,null),f(t,(()=>{const r=y(()=>!!e.onSort,!0);return()=>r()&&(()=>{const n=yo.cloneNode(!0),o=n.firstChild;return tt(n,"click",e.onSort,!0),f(n,()=>e.children,o),f(o,(()=>{const l=y(()=>e.directionDesc===void 0,!0);return()=>l()&&bo.cloneNode(!0)})(),null),f(o,(()=>{const l=y(()=>e.directionDesc===!0,!0);return()=>l()&&Co.cloneNode(!0)})(),null),f(o,(()=>{const l=y(()=>e.directionDesc===!1,!0);return()=>l()&&So.cloneNode(!0)})(),null),A(l=>{const s=j(Ut.sortableLink,{[Ut.sorted]:e.directionDesc!==void 0}),i=Ut.sortIcon;return s!==l._v$&&(n.className=l._v$=s),i!==l._v$2&&(o.className=l._v$2=i),l},{_v$:void 0,_v$2:void 0}),n})()})(),null),t})();Y(["click"]);const wo=x('<th scope="col" class="relative px-6 py-3"><span class="sr-only"></span></th>');var Po=e=>(()=>{const t=wo.cloneNode(!0),r=t.firstChild;return f(r,()=>e.children),t})();const _o=x('<div class="fixed z-10 inset-0 overflow-y-auto modal-open" aria-labelledby="modal-title" role="dialog" aria-modal="true"><div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"><div class="bg-bgColor-primary-overlay fixed inset-0 transition-opacity" aria-hidden="true"></div><span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span><div><div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4 relative"><div class="absolute top-2 right-2 flex items-center justify-center h-8 w-8 rounded-full bg-gray-100"><button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></div></div></div></div>');var Wt=e=>(()=>{const t=_o.cloneNode(!0),r=t.firstChild,n=r.firstChild,o=n.nextSibling,l=o.nextSibling,s=l.firstChild,i=s.firstChild,c=i.firstChild;return tt(c,"click",e.onClose,!0),f(s,()=>e.children,null),A(()=>l.className=j("bg-bgColor-primary text-textColor border-borderColor-primary border inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full md:max-w-2xl lg:max-w-4xl xl:max-w-5xl",{[e.class??""]:(e.class??"").length>0})),t})();Y(["click"]);const No=x('<h3 class="text-lg leading-6 font-medium text-gray-900 md-2" id="modal-title"></h3>');var zt=e=>(()=>{const t=No.cloneNode(!0);return f(t,()=>e.children),t})();const Eo=x('<div class="inline-flex shadow-sm rounded-md" role="group"></div>'),Io=x('<button type="button"></button>');var Ie=e=>(()=>{const t=Eo.cloneNode(!0);return f(t,a(G,{get each(){return e.options},children:(r,n)=>(()=>{const o=Io.cloneNode(!0);return o.$$click=()=>r.value!==e.selected?e.onChange(r.value):void 0,f(o,()=>r.text),A(()=>o.className=j("bg-bgColor-primary text-textColor border-borderColor-primary text-sm font-medium px-4 py-1 h-8",{["bg-bgColor-primary-hover"]:r.value==e.selected,["hover:bg-bgColor-primary-hover hover:border-borderColor-hover"]:r.value!=e.selected,["rounded-l-lg border"]:n()===0,["rounded-r-md border"]:n()===e.options.length-1,["border-t border-b"]:n()>0&&n()<e.options.length-1,["border-l"]:n()>1&&n()<e.options.length-1})),o})()})),t})();Y(["click"]);const Ro=x('<div class="flex justify-center mt-2"></div>');var st=e=>(()=>{const t=Ro.cloneNode(!0);return f(t,a(Ie,{get options(){return Array.from(new Array(Math.min(e.totalPages,20))).map((r,n)=>({value:n+1,text:`${n+1}`}))},onChange:r=>e.onChange(Number(r)),get selected(){return`${e.currentPage}`}})),t})();const To="_hasTooltip_1hkee_1",Oo="_tooltip_1hkee_6",Ao="_tooltipArrow_1hkee_17";var ko={hasTooltip:To,tooltip:Oo,tooltipArrow:Ao};const Lo=x('<div class="inline-block relative"><div></div></div>'),Mo=x('<div class="bg-bgColor-secondary text-textColor-secondary mb-1 inline-block font-medium shadow-sm py-2 px-3 text-sm rounded-lg"></div>'),Fo=x("<div></div>");var k=e=>{let t;const[r,n]=F(!1),o=()=>n(!0),l=()=>n(!1);return Pn(()=>{t?.addEventListener("mouseenter",o,!1),t?.addEventListener("mouseleave",l,!1)}),Ve(()=>{t?.removeEventListener("mouseenter",o),t?.removeEventListener("mouseleave",l)}),a(Ir,{isMenuOpen:r,renderMenu:()=>(()=>{const s=Mo.cloneNode(!0);return f(s,()=>e.text),s})(),get origin(){return e.origin??"N"},get direction(){return e.direction??"N"},class:"z-50",get children(){const s=Lo.cloneNode(!0),i=s.firstChild,c=t;return typeof c=="function"?c(s):t=s,f(i,()=>e.children),f(s,(()=>{const u=y(()=>!!r(),!0);return()=>u()&&(()=>{const d=Fo.cloneNode(!0);return A(()=>d.className=ko.tooltipArrow),d})()})(),null),A(()=>i.className=j({["bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-sm border rounded inline-block border-dashed"]:!e.noStyle})),s}})};const zr=(e,t)=>{let r;const n=()=>clearTimeout(r);return[(...l)=>{r!==void 0&&n(),r=window.setTimeout(()=>e(...l),t)},n]};var Gr=function(){function e(t,r,n,o,l){return t<r||n<r?t>n?n+1:t+1:o===l?r:r+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n=t;t=r,r=n}for(var o=t.length,l=r.length;o>0&&t.charCodeAt(o-1)===r.charCodeAt(l-1);)o--,l--;for(var s=0;s<o&&t.charCodeAt(s)===r.charCodeAt(s);)s++;if(o-=s,l-=s,o===0||l<3)return l;var i=0,c,u,d,g,m,p,h,C,P,R,_,b,S=[];for(c=0;c<o;c++)S.push(c+1),S.push(t.charCodeAt(s+c));for(var I=S.length-1;i<l-3;)for(P=r.charCodeAt(s+(u=i)),R=r.charCodeAt(s+(d=i+1)),_=r.charCodeAt(s+(g=i+2)),b=r.charCodeAt(s+(m=i+3)),p=i+=4,c=0;c<I;c+=2)h=S[c],C=S[c+1],u=e(h,u,d,P,C),d=e(u,d,g,R,C),g=e(d,g,m,_,C),p=e(g,m,p,b,C),S[c]=p,m=g,g=d,d=u,u=h;for(;i<l;)for(P=r.charCodeAt(s+(u=i)),p=++i,c=0;c<I;c+=2)h=S[c],S[c]=p=e(h,u,p,P,S[c+1]),u=h;return p}}();const Gt=100,Hr="Survivalist";var Do=()=>{const{allCraftableProductsWithOffers:e,allProductsInStores:t,mainState:r}=U(),[n,o]=ae({search:"",filterProfession:"",filterCraftingTable:"",currentPage:1,showPricesForProductsModal:void 0,showPricesForFuelModal:!1,filterByOwner:!1},"PriceCalculatorListProductsStore"),l=$(()=>!n.filterByOwner||r.userName.length===0?[]:t()?.filter(d=>d.StoreOwner===r.userName&&!d.Buying).map(d=>d.ItemName)??[]),s=$(()=>e()?.filter(d=>ge(n.search,d.Name??"")&&Ae([n.filterProfession],d.RecipeVariants.map(g=>g.Recipe.SkillNeeds.map(m=>m.Skill)).flat())&&Ae([n.filterCraftingTable],d.RecipeVariants.map(g=>g.Recipe.CraftingTable).flat())&&(!n.filterByOwner||r.userName.length===0||Ae(l(),[d.Name]))).sort((d,g)=>Gr(d.Name,n.search)-Gr(g.Name,n.search))),i=$(()=>s()?.slice((n.currentPage-1)*Gt,n.currentPage*Gt)),c=$(()=>Math.ceil((s()?.length??0)/Gt)),[u]=zr(d=>o({search:d,currentPage:1}),200);return{state:n,paginatedProducts:i,totalPages:c,update:{setSearch:u,setFilterProfession:d=>o({filterProfession:d===Hr?"":d,currentPage:1}),setFilterCraftingTable:d=>o({filterCraftingTable:d,currentPage:1}),setCurrentPage:d=>o({currentPage:d}),showPricesForProductsModal:(d,g)=>o({showPricesForProductsModal:{name:d,isSpecificProduct:g}}),hidePricesForProductsModal:()=>o({showPricesForProductsModal:void 0}),showPricesForFuelModal:()=>o({showPricesForFuelModal:!0}),hidePricesForFuelModal:()=>o({showPricesForFuelModal:!1}),setFilterByOwner:d=>o({filterByOwner:d}),clearFilters:()=>o({search:"",currentPage:1,filterProfession:"",filterCraftingTable:"",filterByOwner:!1})}}};const Xr=(e,t)=>t?e.find(r=>r.Variant.Key===t):void 0,Kr=(e,t)=>e.length===1?e?.[0]:Xr(e,t),Ht=(e,t,r,n,o,l)=>{const s=e.find(d=>d.Name===n),i=ue(n);if(s==null)return{ingredientId:i,productName:n,recipeVariants:[],isTag:!1,quantity:l};const c=Kr(s.RecipeVariants,t[i]),u=o.includes(n)?[]:c?.Variant.Ingredients.map(d=>Jr(e,t,r,d,[...o,n]));return{ingredientId:i,isTag:!1,productName:n,recipeVariants:s.RecipeVariants,selectedVariant:c,ancestors:u,quantity:l}},Bo=(e,t,r,n,o,l)=>{const s=He(n),i=r[n]??[],c=e.filter(m=>i.includes(m.Name));if(c==null||c.length==0)return{ingredientId:s,productName:`Tag: ${n}`,recipeVariants:[],isTag:!0,quantity:l};const u=c.map(m=>m.RecipeVariants).flat(),d=Xr(u,t[s]),g=o.includes(s)||d==null?[]:d.Variant.Ingredients.map(m=>Jr(e,t,r,m,[...o,s]));return{ingredientId:s,isTag:!0,productName:`Tag: ${n}`,recipeVariants:u,selectedVariant:d,ancestors:g,quantity:l}},Jr=(e,t,r,n,o)=>n.IsSpecificItem?Ht(e,t,r,n.Name,o,n.Ammount):Bo(e,t,r,n.Tag,o,n.Ammount),yt=(e,t,r)=>({ingredientId:e.ingredientId,isTag:e.isTag,productName:e.productName,recipeVariants:e.recipeVariants,selectedVariant:e.selectedVariant,level:t,path:r,quantity:e.quantity}),Qr=(e,t=0,r=[])=>{const n=[...r,e.ingredientId];return[yt(e,t,n),...(e.ancestors?.map(o=>Qr(o,t+1,n))??[]).flat()]},qr=(e,t,r=[])=>{const n=[...r,e.ingredientId];if(t.length<=1||e.ingredientId!==t[0])return[yt(e,0,n)];const o=e.ancestors?.find(l=>l.ingredientId===t[1]);return o==null?[yt(e,0,n)]:[yt(e,0,n),...qr(o,t.slice(1),[...r,e.ingredientId])]},Yr=(e,t,r,n)=>{const o=Ht(e,t,r,n,[],1);return Qr(o)},jo=(e,t,r,n,o)=>{const l=Ht(e,t,r,n,[],1);return qr(l,o)},Zr=e=>e.join("=>"),Vo={"Bakery Oven":10,"Blast Furnace":50,Bloomery:10,Campfire:10,"Cast Iron Stove":10,"Cement Kiln":50,Kiln:50,"Oil Refinery":50},en=[1,.9,.75,.6,.55,.5];var Uo=()=>{const{mainState:e,get:t,allCraftableProducts:r,tagsResource:n,allItemsAndTagsWithPrice:o}=U(),[l,s]=ae({simpleMode:!0,showRecipes:!1,showPersonalPrices:!1,showRecipeTree:!1,focusedProdPath:[]},"PriceCalculatorPriceCalcStore"),[i,c]=F(),[u,d]=F({}),g=$(()=>Yr(Object.values(r())??[],u(),n?.()?.Tags??{},i()??"")),m=$(()=>l.focusedProdPath.length===0?void 0:l.focusedProdPath[l.focusedProdPath.length-1]),p=$(()=>g().find(T=>T.ingredientId==m())),h=$(()=>p()?.selectedVariant?.Recipe),C=$(()=>h()?.SkillNeeds?.[0]?.Skill??""),P=$(()=>Kr(p()?.recipeVariants??[],u()[m()??""])),R=$(()=>P()?.Variant.Key??""),_=$(()=>l.simpleMode?0:t.craftModule(R())),b=$(()=>l.simpleMode?1:t.craftAmmount(R())),S=$(()=>l.simpleMode?!1:t.craftLavish(R())),I=$(()=>l.simpleMode?1:t.craftLevel(C())),E=$(()=>l.simpleMode?10:t.recipeMargin(R())),O=$(()=>{const T=P()?.Variant;return T==null?[]:t.costPercentage(T.Key)??Zl(T)}),L=$(()=>{const T=P();return T==null?[]:T.Variant.Ingredients.map(B=>{const we=en[_()]*(S()?.95:1),Oe=D(B.Ammount*(B.IsStatic?1:we)),ce=ql(Oe,b());return{...B,calcQuantity:ce,unitPrice:Br(ce/b(),l.simpleMode?o()?.[de(B)]?.AvgPrice??0:t.personalPrice(de(B))),calcPrice:Br(ce,l.simpleMode?o()?.[de(B)]?.AvgPrice??0:t.personalPrice(de(B)))}})}),X=[.5,.45,.4,.35,.3,.25,.2],K=$(()=>h()?.SkillNeeds.length??0>0?X[I()]:1),re=$(()=>(h()?.BaseLaborCost??0)*K()),ne=$(()=>re()/1e3*e.calorieCost),le=$(()=>ne()*b()),pe=$(()=>Vo[h()?.CraftingTable??""]??0),Ce=$(()=>(h()?.BaseCraftTime??0)*60*K()),oe=$(()=>Ce()*pe()),ie=$(()=>oe()*e.costPer1kJoule/1e3),Se=$(()=>ie()*b()),ve=$(()=>D((L()?.reduce((T,B)=>T+B.calcPrice,0)??0)+le()+Se())),it=$(()=>D(ve()/b()*Yl(E()))),ct=$(()=>{const T=P();return T==null?[]:T.Variant.Products.map(B=>{const we=O().find(Oe=>Oe.prod===B.Name)?.perc??0;return{...B,costPercentage:we,productionCost:D(ve()/b()*(we/100)/B.Ammount),retailPrice:D(it()*(we/100)/B.Ammount)}})});return{state:l,craftModule:_,craftAmmount:b,craftLavish:S,craftLevel:I,recipeMargin:E,recipeIngredients:L,recipeCalories:re,recipeCalorieCost:ne,recipeCalorieTotalCost:le,recipeCraftTimeInSeconds:Ce,recipeJoules:oe,recipeFuelCost:ie,recipeFuelTotalCost:Se,totalIngredientCost:ve,unitCostWithProfit:it,recipeProducts:ct,focusedNode:p,selectedVariant:P,recipe:h,recipeSkill:C,variantId:R,selectedProduct:i,selectedRecipes:u,costPercentages:O,setSelectedProduct:T=>{c(T),T!=null&&s({focusedProdPath:[ue(T)]})},setSelectedRecipes:d,update:{toggleSimpleMode:()=>s(T=>({simpleMode:!T.simpleMode})),setShowRecipes:T=>s({showRecipes:T}),setShowPersonalPrices:T=>s({showPersonalPrices:T}),toggleShowRecipeTree:()=>s(T=>({showRecipeTree:!T.showRecipeTree})),replaceFocusedProductPath:T=>s({focusedProdPath:T}),focusChildProduct:T=>s(B=>({focusedProdPath:[...B.focusedProdPath,T]}))},calcExplanation:(T,B)=>{const Oe=L().map(q=>` - ${q.calcQuantity}(${b()===1?"":b()+"x"}${q.Ammount}${q.IsStatic?"":"x"+en[_()]}${!q.IsStatic&&S()?"x0.95":""}) ${Vt(q)} @ ${t.personalPrice(de(q))} ${B} = ${q.calcPrice} ${B}`),ce=ct().find(q=>q.Name===T);return[`Calculated cost of ${T} = ${ce?.productionCost} ${B}`,`Using recipe ${p()?.selectedVariant?.Variant.Key} at table ${h()?.CraftingTable} with module lvl ${_()}`,`From ${ce?.Ammount!==1?`1/${ce?.Ammount} of `:""}${ce?.costPercentage!==100?`${ce?.costPercentage}% of `:""}${D(ve()/b())} ${B} ${b()>1?`(total of ${ve()} each) `:""}from the sum of ingredients for ${b()} repetition(s):`,...Oe,le()>0?` - Labor ${D(le()??0)} ${B}`:void 0,oe()>0?` - Fuel ${D(Se())} ${B}`:void 0].filter(q=>!!q).join(`
`)}}};const tn=dt({}),Wo=e=>{const t=Do(),r=Uo(),n={listProductsStore:t,priceCalcStore:r};return a(tn.Provider,{value:n,get children(){return e.children}})},Q=()=>Ye(tn),zo=x("<button></button>");var V=e=>(()=>{const t=zo.cloneNode(!0);return tt(t,"click",e.onClick,!0),f(t,()=>e.children),A(()=>t.className=j("bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-sm font-semibold py-1 px-2 border rounded",e.class??"")),t})();Y(["click"]);const Go=x('<div><div class="flex items-center h-5"><input type="checkbox" class="bg-bgColor-primary hover:bg-bgColor-primary-hover border-borderColor-primary hover:border-borderColor-hover border h-4 w-4 rounded cursor-pointer focus:outline-none"></div><div class="text-sm px-2"><label class="text-textColor-primary font-medium select-none cursor-pointer"></label></div></div>');var xe=e=>{const t=e.fieldId??e.label.replaceAll(" ","_");return(()=>{const r=Go.cloneNode(!0),n=r.firstChild,o=n.firstChild,l=n.nextSibling,s=l.firstChild;return o.addEventListener("change",i=>e.onChange(i.currentTarget.checked)),Ne(o,"id",t),Ne(o,"aria-describedby",t),Ne(s,"for",t),f(s,()=>e.label),A(i=>{const c=j("flex items-start",{"flex-row":!e.left,"flex-row-reverse":e.left},e.class),u=e.checked;return c!==i._v$&&(r.className=i._v$=c),u!==i._v$2&&(o.checked=i._v$2=u),i},{_v$:void 0,_v$2:void 0}),r})()};const Ho=x('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-1 flex"></div><div class="mt-2 overflow-auto"></div></div></div>'),Xo=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),rn=10;var Ko=()=>{const{listProductsStore:{state:e,update:{hidePricesForProductsModal:t}},priceCalcStore:r}=Q(),{allProductsInStores:n,currentCurrency:o,update:l,tagsResource:s}=U(),[i,c]=F(1),[u,d]=F(!1),[g,m]=F(!0),p=$(()=>e.showPricesForProductsModal==null?[]:e.showPricesForProductsModal.isSpecificProduct?[e.showPricesForProductsModal.name]:s?.()?.Tags?.[e.showPricesForProductsModal.name]??[]),h=$(()=>n()?.some(_=>Ae(p(),[_.ItemName])&&_.CurrencyName===o())??!1);Pe(()=>d(h()));const C=$(()=>n()?.filter(_=>Ae(p(),[_.ItemName])&&(!o()||!u()||_.CurrencyName===o())&&(!g()||!_.Buying&&_.Quantity>0)).sort((_,b)=>_.Buying===b.Buying?_.Price-b.Price:_.Buying?1:-1)),P=$(()=>Fr(i(),rn,C())),R=$(()=>Dr(rn,C()));return(()=>{const _=y(()=>!!e.showPricesForProductsModal,!0);return()=>_()&&a(Wt,{onClose:t,get children(){const b=Ho.cloneNode(!0),S=b.firstChild,I=S.firstChild,E=I.nextSibling;return f(S,a(zt,{get children(){return["Ingame prices for product",y(()=>p().length>1?"s":""),":"," ",y(()=>p().join(", "))]}}),I),f(I,a(xe,{label:"Show only buyable products",get checked(){return g()},onChange:O=>m(O)}),null),f(I,a(xe,{label:"Show only offers in selected currency",get checked(){return u()},onChange:O=>d(O)}),null),f(E,a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Product Name"}),a(N,{children:"Store Name"}),a(N,{children:"Store Owner"}),a(N,{children:"Quantity"}),a(N,{children:"Price"})]}}),a(ee,{get children(){return a(G,{get each(){return P()},children:O=>(()=>{const L=Xo.cloneNode(!0),X=L.firstChild,K=X.nextSibling,re=K.nextSibling,ne=re.nextSibling,le=ne.nextSibling;return f(X,()=>O.ItemName),f(K,()=>O.StoreName),f(re,()=>O.StoreOwner),f(ne,()=>O.Buying?`Buying ${O.Limit} for`:`Selling ${O.MaxNumWanted} for`),f(le,()=>r.state.simpleMode&&`${O.Price} ${O.CurrencyName}`,null),f(le,(()=>{const pe=y(()=>!r.state.simpleMode,!0);return()=>pe()&&a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{onClick:()=>{l.personalPrice(ue(O.ItemName),O.CurrencyName,O.Price),e.showPricesForProductsModal!=null&&!e.showPricesForProductsModal.isSpecificProduct&&l.personalPrice(He(e.showPricesForProductsModal.name),O.CurrencyName,O.Price)},get children(){return`${O.Price} ${O.CurrencyName}`}})}})})(),null),L})()})}})]}}),null),f(E,a(st,{get currentPage(){return i()},get totalPages(){return R()},onChange:c}),null),b}})})()};const Jo=x('<div class="relative"><input class="bg-bgColor-primary hover:bg-bgColor-primary-hover focus:bg-bgColor-primary-hover rounded-md border border-border-primary h-8 px-2 pr-8 rounded-md text-sm font-small focus:outline-none text-textColor border-borderColor-primary hover:border-borderColor-hover" type="search" name="search" placeholder="Search"><button type="submit" class="absolute right-2 top-2"><svg class="text-textColor h-6 w-6 fill-current" xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 80 80" style="enable-background:new 0 0 56.966 56.966;" width="256px" height="256px"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path></svg></button></div>');var nn=e=>(()=>{const t=Jo.cloneNode(!0),r=t.firstChild;return r.$$input=n=>e.onChange(n.currentTarget.value),A(()=>r.value=e.value),t})();Y(["input"]);var Qo={"custom-number-input":"_custom-number-input_lo3gl_1"};const qo=x('<div><button data-action="decrement" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover border w-10 rounded-l cursor-pointer outline-none"><span class="m-auto text-1xl font-thin">\u2212</span></button><input type="number" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-center w-full border-t border-b font-semibold text-md outline-none" name="custom-input-number"><button data-action="increment" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover border w-10 rounded-r cursor-pointer outline-none"><span class="m-auto text-1xl font-thin">+</span></button></div>');var Xe=e=>(()=>{const t=qo.cloneNode(!0),r=t.firstChild,n=r.nextSibling,o=n.nextSibling;return r.$$click=()=>e.onChange(D((e.value??0)-1)),n.addEventListener("change",l=>e.onChange(D(Number(l.currentTarget.value)))),o.$$click=()=>e.onChange(D((e.value??0)+1)),A(l=>{const s=j(Qo["custom-number-input"],"flex flex-row h-8 w-24 rounded-md",e.class),i=e.value??"";return s!==l._v$&&(t.className=l._v$=s),i!==l._v$2&&(n.value=l._v$2=i),l},{_v$:void 0,_v$2:void 0}),t})();Y(["click"]);var bt=e=>{const{currentCurrency:t,get:r,update:n}=U();return t()?a(Xe,{get value(){return r.personalPrice(e.personalPriceId)},onChange:o=>n.personalPrice(e.personalPriceId,t(),o),get class(){return e.class}}):'"select currency"'},Xt=e=>{const{currentCurrency:t,tagsResource:r,allProductsInStores:n,allItemsAndTagsWithPrice:o}=U(),l=$(()=>{const s=e.isSpecificItem?[e.name]:r?.()?.Tags?.[e.name]??[],i=n()?.filter(u=>s.includes(u.ItemName))??[];if(i.length<=0)return{errorMessage:"no offers"};const c=t()?i.filter(u=>u.CurrencyName===t())??[]:[];return t()&&c.length===0?{calculatedPrice:"no offers in currency"}:{calculatedPrice:t()?o()?.[e.id]?.AvgPrice:0}});return l().errorMessage?()=>l().errorMessage:a(k,{noStyle:!0,text:"Click for ingame prices. Select currency for average.",get children(){return a(V,{onClick:()=>e.showPricesForProductsModal(e.name,e.isSpecificItem),get children(){return[y(()=>!t()&&"select currency"),y((()=>{const s=y(()=>!!(t()&&l()),!0);return()=>s()&&`${l().calculatedPrice??"?"} ${t()}`})())]}})}})};const Yo=x('<tr><td colspan="6"><div class="flex justify-center"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div></td></tr>');var Kt=e=>a(Ue,{get when(){return e.show()},get children(){return Yo.cloneNode(!0)}});const Zo=x('<div class="flex justify-between"><div></div><div class="flex gap-2 mb-2"></div></div>'),es=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),ts=x("<div></div>"),rs=x('<div class="flex"></div>');var ns=()=>{const{isLoadingResources:e,currentCurrency:t,allProfessions:r,allCraftingTables:n}=U(),{listProductsStore:o,priceCalcStore:l}=Q();return(()=>{const s=y(()=>l.selectedProduct()==null,!0);return()=>s()&&[(()=>{const i=Zo.cloneNode(!0),c=i.firstChild,u=c.nextSibling;return f(c,a(k,{text:"Click to filter items being sold by stores owned by you (set your name in the header above)",origin:"NW",direction:"NE",get children(){return a(xe,{label:"Only show what I'm selling",get checked(){return o.state.filterByOwner},onChange:d=>o.update.setFilterByOwner(d)})}})),f(u,a(nn,{get value(){return o.state.search},get onChange(){return o.update.setSearch}}),null),f(u,a(Ee,{get value(){return o.state.filterProfession},get values(){return[{value:"",text:"Filter by Profession"},...r()?.map(d=>({value:d,text:d}))??[]]},onChange:d=>o.update.setFilterProfession(`${d}`),origin:"SE",direction:"SW"}),null),f(u,a(Ee,{get value(){return o.state.filterCraftingTable},get values(){return[{value:"",text:"Filter by crafting station"},...n()?.map(d=>({value:d,text:d}))??[]]},onChange:d=>o.update.setFilterCraftingTable(`${d}`),origin:"SE",direction:"SW"}),null),f(u,a(V,{onClick:()=>o.update.clearFilters(),children:"Clear filters"}),null),i})(),a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Product Name"}),a(N,{children:"Profession/Craft Station"}),a(N,{children:"Average price"}),a(N,{children:"Personal price"})]}}),a(ee,{get children(){return[a(Kt,{show:e}),a(G,{get each(){return o.paginatedProducts()},children:i=>(()=>{const c=es.cloneNode(!0),u=c.firstChild,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling;return f(u,a(k,{noStyle:!0,text:"Click to calculate price for this item",origin:"NW",direction:"NE",get children(){return a(V,{onClick:()=>l.setSelectedProduct(i.Name),get children(){return i.Name}})}})),f(d,()=>i.RecipeVariants.map(p=>(p.Recipe.SkillNeeds.length>0?p.Recipe.SkillNeeds:[{Skill:Hr,Level:0}]).map(h=>({Skill:h.Skill,SkillLevel:h.Level,craftingTable:p.Recipe.CraftingTable})).flat()).flat().filter((p,h,C)=>C.findIndex(P=>P.Skill===p.Skill&&P.SkillLevel===p.SkillLevel&&P.craftingTable===p.craftingTable)===h).filter(p=>Mr(o.state.filterProfession,p.Skill)&&Mr(o.state.filterCraftingTable,p.craftingTable)).map((p,h)=>(()=>{const C=ts.cloneNode(!0);return f(C,[a(k,{noStyle:!0,text:"Click to filter by profession",get children(){return a(V,{onClick:()=>o.update.setFilterProfession(p.Skill),get children(){return p.Skill}})}}),y(()=>` lvl${p.SkillLevel}`)],null),f(C,()=>p.Skill&&" @ ",null),f(C,a(k,{noStyle:!0,text:"Click to filter by craft station",get children(){return a(V,{onClick:()=>o.update.setFilterCraftingTable(p.craftingTable),get children(){return p.craftingTable}})}}),null),A(()=>C.className=j({"mt-1":h>0})),C})())),f(g,a(Xt,{get id(){return de({IsSpecificItem:!0,Name:i.Name,Tag:""})},get name(){return i.Name},isSpecificItem:!0,get showPricesForProductsModal(){return o.update.showPricesForProductsModal}})),f(m,()=>!t()&&"select currency",null),f(m,(()=>{const p=y(()=>!!t(),!0);return()=>p()&&(()=>{const h=rs.cloneNode(!0);return f(h,a(bt,{get personalPriceId(){return de({IsSpecificItem:!0,Name:i.Name,Tag:""})}}),null),f(h,a(V,{class:"ml-2",onClick:()=>l.setSelectedProduct(i.Name),children:"Calculate now"}),null),h})()})(),null),c})()})]}})]}}),a(st,{get currentPage(){return o.state.currentPage},get totalPages(){return o.totalPages()},get onChange(){return o.update.setCurrentPage}})]})()};const ls=x("<div><button><div></div></button><div></div></div>"),os=x('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),ss=x('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>');var Jt=e=>{const[t,r]=F(e.startsOpen??!1);return(()=>{const n=ls.cloneNode(!0),o=n.firstChild,l=o.firstChild,s=o.nextSibling;return o.$$click=()=>!e.notCollapsible&&r(i=>!i),f(o,()=>e.headerText,l),f(l,(()=>{const i=y(()=>!!(!e.notCollapsible&&t()),!0);return()=>i()&&os.cloneNode(!0)})(),null),f(l,(()=>{const i=y(()=>!e.notCollapsible&&!t(),!0);return()=>i()&&ss.cloneNode(!0)})(),null),f(s,()=>e.children),A(i=>{const c=j("border-borderColor-primary text-textColor border rounded",e.class),u=j("bg-bgColor-primary-hover border-borderColor-primary px-8 py-5 px-5 py-3 flex w-full justify-between",{"border-b":t(),"cursor-default":e.notCollapsible}),d=j("px-8 py-5",{hidden:!t()});return c!==i._v$&&(n.className=i._v$=c),u!==i._v$2&&(o.className=i._v$2=u),d!==i._v$3&&(s.className=i._v$3=d),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()};Y(["click"]);const is=x("<span></span>");var ye=e=>e.text&&(()=>{const t=is.cloneNode(!0);return f(t,()=>e.text),A(()=>t.className=j("font-semibold",{[e.class??""]:!!e.class})),t})();const cs=x('<div class="inline-block mx-2"></div>');var ln=e=>[y((()=>{const t=y(()=>(e.recipeVariants?.length??0)===1,!0);return()=>t()&&a(ye,{class:"px-2",get text(){return e.recipeVariants?.[0].Recipe.Untranslated}})})()),y((()=>{const t=y(()=>(e.recipeVariants?.length??0)>1,!0);return()=>t()&&(()=>{const r=cs.cloneNode(!0);return f(r,a(Ee,{get value(){return e.selectedValue},get values(){return[{value:"",text:"No recipe"},...(e.recipeVariants?.map(n=>({text:n.Variant.Name,value:n.Variant.Key}))??[]).sort(Kl(n=>n.text))]},onChange:n=>e.setSelected(`${n}`)})),r})()})())];const as=x('<div class="absolute p-2 border rounded top-0 right-0"></div>');var us=()=>{const{priceCalcStore:e}=Q();return(()=>{const t=as.cloneNode(!0);return f(t,a(xe,{label:"show recipes",get checked(){return e.state.showRecipes},onChange:r=>e.update.setShowRecipes(r),left:!0}),null),f(t,a(xe,{label:"show personal price",get checked(){return e.state.showPersonalPrices},onChange:r=>e.update.setShowPersonalPrices(r),left:!0}),null),t})()};const ds=x('<div class="relative"></div>'),fs=x('<span>Recipe tree for product <span class="font-bold"></span></span>'),hs=x('<div class="mt-1 flex items-center"></div>'),gs=x('<div class="inline-block py-1 px-4"></div>'),ms=x('<span class="ml-2">with recipe</span>'),ps=x('<span class="border-borderColor-primary border rounded px-2 py-1 ml-2 font-normal"></span>'),vs=x('<span class="ml-2">for</span>');var $s=()=>{const{allCraftableProducts:e,tagsResource:t,currentCurrency:r}=U(),{priceCalcStore:n}=Q(),o=$(()=>Yr(Object.values(e())??[],n.selectedRecipes(),t?.()?.Tags??{},n.selectedProduct()??"")),l=$(()=>Zr(n.state.focusedProdPath));return a(Jt,{notCollapsible:!0,startsOpen:!0,get headerText(){return(()=>{const s=fs.cloneNode(!0),i=s.firstChild,c=i.nextSibling;return f(c,()=>n.selectedProduct()),s})()},class:"mt-4",get children(){const s=ds.cloneNode(!0);return f(s,a(G,{get each(){return o()},children:i=>(()=>{const c=hs.cloneNode(!0);return f(c,(()=>{const u=y(()=>i.recipeVariants.length>0,!0);return()=>u()&&a(k,{noStyle:!0,text:"Click to calculate price",get children(){return a(V,{get class(){return j("inline-block py-1 px-4",{"bg-bgColor-primary-hover":Zr(i.path)===l()})},onClick:()=>n.update.replaceFocusedProductPath(i.path),get children(){return i.productName}})}})})(),null),f(c,(()=>{const u=y(()=>i.recipeVariants.length===0,!0);return()=>u()&&(()=>{const d=gs.cloneNode(!0);return f(d,()=>i.productName),d})()})(),null),f(c,(()=>{const u=y(()=>!!(n.state.showRecipes&&(i.recipeVariants?.length??0)>0),!0);return()=>u()&&ms.cloneNode(!0)})(),null),f(c,(()=>{const u=y(()=>!!n.state.showRecipes,!0);return()=>u()&&a(ln,{get selectedValue(){return i.selectedVariant?.Variant.Key??""},get recipeVariants(){return i.recipeVariants},setSelected:d=>n.setSelectedRecipes(g=>({...g,[i.ingredientId]:d}))})})(),null),f(c,(()=>{const u=y(()=>!!(n.state.showRecipes&&!!i.selectedVariant?.Variant.Key),!0);return()=>u()&&["at table",(()=>{const d=ps.cloneNode(!0);return f(d,()=>i.recipeVariants.find(g=>g.Variant.Key===i.selectedVariant?.Variant.Key)?.Recipe.CraftingTable),d})()]})(),null),f(c,(()=>{const u=y(()=>!!n.state.showPersonalPrices,!0);return()=>u()&&[vs.cloneNode(!0),a(bt,{class:"mx-2",get personalPriceId(){return i.ingredientId}}),y(r)]})(),null),A(()=>c.style.setProperty("margin-left",`${i.level*30}px`)),c})()}),null),f(s,a(us,{}),null),s}})};const xs=x("<div><span></span></div>");var Re=e=>(()=>{const t=xs.cloneNode(!0),r=t.firstChild;return f(r,()=>e.text),f(t,()=>e.children,null),A(()=>t.className=j("flex",{"flex-row gap-2":!e.vertical,"flex-col gap-1":!!e.vertical})),t})();const ys=Array.from(Array(7)).map((e,t)=>({value:t,text:"Level "+(t+1)}));var bs=e=>a(Ee,{get value(){return e.level},values:ys,onChange:t=>e.onSelectLevel(Number(t))});const Cs="Recipes",Ss="CraftingTables",ws="Tags",Ps="Stores",on="3.2.2";var be;(function(e){e[e.BUY=0]="BUY",e[e.SELL=1]="SELL",e[e.BOTH=2]="BOTH"})(be||(be={}));const sn={BurnableFuel:"Burnable Fuel"};var _s=e=>{const{get:t,currentCurrency:r,allProductsInStores:n,allItemsAndTagsWithPrice:o}=U(),l=$(()=>{const s=t.itemsInTag(sn.BurnableFuel),i=s.map(m=>m.Name),c=n()?.filter(m=>i.includes(m.ItemName))??[];if(c.length<=0)return{errorMessage:"no offers"};const u=r()?c.filter(m=>m.CurrencyName===r())??[]:[];if(r()&&u.length===0)return{calculatedPrice:"no offers in currency"};const g=u.filter(m=>!m.Buying&&m.Quantity>0).reduce(({ProdName:m,PricePerJoule:p},h)=>{const C=h.ItemName,P=o()[ue(C)]?.AvgPrice??0,R=(s.find(b=>b.Name===C)?.Fuel??0)*2,_=R===0?0:P/R;return m.length===0||_<p?{ProdName:C,PricePerJoule:_}:{ProdName:m,PricePerJoule:p}},{ProdName:"",PricePerJoule:0});return g.ProdName.length===0?{calculatedPrice:"no valid offers in currency"}:{calculatedPrice:r()?D(g.PricePerJoule*1e3):0}});return l().errorMessage?()=>l().errorMessage:a(k,{noStyle:!0,text:"Click for ingame fuel prices. Select currency for average.",get children(){return a(V,{onClick:()=>e.showPricesForFuelModal(),get children(){return[y(()=>!r()&&"select currency"),y((()=>{const s=y(()=>!!(r()&&l()),!0);return()=>s()&&`${l().calculatedPrice??"?"} ${r()}`})())]}})}})};const Ns=x('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block self-center" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>');var Qt=()=>Ns.cloneNode(!0);const Es=x('<div class="inline-block px-2 py-1"></div>');var Is=e=>{const{tagsResource:t,allCraftableProducts:r}=U(),{priceCalcStore:n}=Q(),o=de(e.ingredient),l=r()?.[e.ingredient.Name]?.RecipeVariants?.length>0;return!l&&e.ingredient.IsSpecificItem?()=>e.ingredient.Name:l&&e.ingredient.IsSpecificItem?a(k,{noStyle:!0,get text(){return`Click to calculate price for ${e.ingredient.Name}`},get children(){return a(V,{onClick:()=>n.update.focusChildProduct(o),get children(){return e.ingredient.Name}})}}):!l&&!e.ingredient.IsSpecificItem?a(k,{get text(){return`One of: ${t?.()?.Tags?.[e.ingredient.Tag]?.join(", ")}`},origin:"NW",direction:"NE",get children(){const s=Es.cloneNode(!0);return f(s,()=>`Tag ${e.ingredient.Tag}`),s}}):a(k,{noStyle:!0,get text(){return`Click to calculate price for one of: ${t?.()?.Tags?.[e.ingredient.Tag]?.join(", ")}`},origin:"NW",direction:"NE",get children(){return a(V,{onClick:()=>n.update.focusChildProduct(o),get children(){return`Tag ${e.ingredient.Tag}`}})}})};const Rs=x('<span class="pr-1"></span>'),Ts=x('<tr><td>Labor</td><td><div></div><div>(<!> Calories)</div></td><td></td><td><div class="flex flex-row gap-2"></div></td><td></td><td></td></tr>'),Os=x("<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>"),As=x('<tr><td>Fuel</td><td><div> seconds</div><div>(<!> Joules)</div></td><td></td><td><div class="flex flex-row gap-2"></div></td><td></td><td></td></tr>');var ks=()=>{const{mainState:e,update:t}=U(),{priceCalcStore:r,listProductsStore:n}=Q(),o="px-6 py-4 whitespace-nowrap text-sm";return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Ingredient name"}),a(N,{children:"Quantity"}),a(N,{children:"Average price"}),a(N,{children:"Personal price"}),a(N,{children:"Unit price"}),a(N,{children:"Total price"})]}}),a(ee,{get children(){return[a(G,{get each(){return r.recipeIngredients()},children:l=>(()=>{const s=Os.cloneNode(!0),i=s.firstChild,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling;return i.className=o,f(i,a(Is,{ingredient:l})),c.className=o,f(c,()=>l.calcQuantity),u.className=o,f(u,a(Xt,{get id(){return de(l)},get name(){return l.IsSpecificItem?l.Name:l.Tag},get isSpecificItem(){return l.IsSpecificItem},get showPricesForProductsModal(){return n.update.showPricesForProductsModal}})),d.className=o,f(d,a(bt,{get personalPriceId(){return de(l)}})),g.className=o,f(g,()=>D(l.unitPrice)),m.className=o,f(m,()=>D(l.calcPrice)),s})()}),(()=>{const l=Ts.cloneNode(!0),s=l.firstChild,i=s.nextSibling,c=i.firstChild,u=c.nextSibling,d=u.firstChild,g=d.nextSibling;g.nextSibling;const m=i.nextSibling,p=m.nextSibling,h=p.firstChild,C=p.nextSibling,P=C.nextSibling;return s.className=o,i.className=o,f(c,()=>(r.recipe()?.BaseLaborCost??0)*r.craftAmmount()),f(u,()=>D((r.recipeCalories()??0)*r.craftAmmount()),g),m.className=o,p.className=o,f(h,a(Xe,{get value(){return D(e.calorieCost)},onChange:R=>t.calorieCost(R)}),null),f(h,a(k,{noStyle:!0,text:"Price per 1000 calories.",get children(){return a(Qt,{})}}),null),C.className=o,f(C,a(k,{noStyle:!0,text:"Labor cost is calculated using price per 1000 calories.",get children(){return[(()=>{const R=Rs.cloneNode(!0);return f(R,()=>D(r.recipeCalorieCost()??0)),R})(),a(Qt,{})]}})),P.className=o,f(P,()=>D(r.recipeCalorieTotalCost()??0)),l})(),y((()=>{const l=y(()=>(r.recipeJoules()??0)>0,!0);return()=>l()&&(()=>{const s=As.cloneNode(!0),i=s.firstChild,c=i.nextSibling,u=c.firstChild,d=u.firstChild,g=u.nextSibling,m=g.firstChild,p=m.nextSibling;p.nextSibling;const h=c.nextSibling,C=h.nextSibling,P=C.firstChild,R=C.nextSibling,_=R.nextSibling;return i.className=o,c.className=o,f(u,()=>(r.recipeCraftTimeInSeconds()??0)*r.craftAmmount(),d),f(g,()=>D((r.recipeJoules()??0)*r.craftAmmount()),p),h.className=o,f(h,a(_s,{get showPricesForFuelModal(){return n.update.showPricesForFuelModal}})),C.className=o,f(P,a(Xe,{get value(){return D(e.costPer1kJoule)},onChange:b=>t.costPer1kJoule(b)}),null),f(P,a(k,{noStyle:!0,text:"Price per 1000 Joules",get children(){return a(Qt,{})}}),null),R.className=o,f(R,()=>r.recipeFuelCost()),_.className=o,f(_,()=>D(r.recipeFuelTotalCost()??0)),s})()})())]}})]}})};const Ls=x("<tr><td></td><td></td><td></td><td></td></tr>");var Ms=()=>{const{priceCalcStore:e,listProductsStore:t}=Q(),r="px-6 py-4 whitespace-nowrap text-sm";return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Ingredient name"}),a(N,{children:"Quantity"}),a(N,{children:"Price"}),a(N,{children:"Cost"})]}}),a(ee,{get children(){return a(G,{get each(){return e.recipeIngredients()},children:n=>(()=>{const o=Ls.cloneNode(!0),l=o.firstChild,s=l.nextSibling,i=s.nextSibling,c=i.nextSibling;return l.className=r,f(l,()=>Vt(n)),s.className=r,f(s,()=>n.calcQuantity),i.className=r,f(i,a(Xt,{get id(){return de(n)},get name(){return n.IsSpecificItem?n.Name:n.Tag},get isSpecificItem(){return n.IsSpecificItem},get showPricesForProductsModal(){return t.update.showPricesForProductsModal}})),c.className=r,f(c,()=>D(n.unitPrice)),o})()})}})]}})};const Fs=x('<span><span class="font-medium">Ingredients</span>: Calculating costs for <!> using recipe</span>'),Ds=x('<div class="mt-8"></div>'),Bs=x('<div class="flex items-center mt-8">Recipe production cost is</div>'),js=x('<div class="flex gap-5 flex-wrap"></div>');var Vs=()=>{const{get:e,update:t}=U(),{priceCalcStore:r,listProductsStore:n}=Q();return a(Jt,{notCollapsible:!0,startsOpen:!0,class:"mt-4",get headerText(){return(()=>{const o=Fs.cloneNode(!0),l=o.firstChild,s=l.nextSibling,i=s.nextSibling;return i.nextSibling,f(o,a(ye,{get text(){return r.focusedNode()?.productName}}),i),f(o,a(ln,{get selectedValue(){return r.focusedNode()?.selectedVariant?.Variant.Key??""},get recipeVariants(){return r.focusedNode()?.recipeVariants??[]},setSelected:c=>r.setSelectedRecipes(u=>({...u,[r.focusedNode()?.ingredientId??""]:c}))}),null),f(o,(()=>{const c=y(()=>!!r.focusedNode()?.selectedVariant?.Variant.Key,!0);return()=>c()&&["at table",a(ye,{get text(){return r.recipe()?.CraftingTable},class:"pl-2"})]})(),null),o})()},get children(){const o=y(()=>!!r.selectedVariant(),!0);return()=>o()&&[y((()=>{const l=y(()=>!r.state.simpleMode,!0);return()=>l()&&(()=>{const s=js.cloneNode(!0);return f(s,a(Re,{vertical:!0,text:"Craft amount:",get children(){return a(Ie,{options:[{text:"1",value:1},{text:"10",value:10},{text:"100",value:100}],onChange:i=>t.craftAmmount(r.variantId(),Number(i)),get selected(){return e.craftAmmount(r.variantId())}})}}),null),f(s,a(Re,{vertical:!0,text:"Upgrade module in use:",get children(){return a(Ie,{get options(){return Array.from(new Array(6)).map((i,c)=>({text:`M${c}`,value:c}))},onChange:i=>t.craftModule(r.variantId(),Number(i)),get selected(){return e.craftModule(r.variantId())}})}}),null),f(s,a(Re,{vertical:!0,text:"Lavish Talent:",get children(){return a(xe,{label:"Enabled",onChange:i=>t.craftLavish(r.variantId(),i),get checked(){return e.craftLavish(r.variantId())}})}}),null),f(s,(()=>{const i=y(()=>!!(r.recipe()?.SkillNeeds.length??0>0),!0);return()=>i()&&a(Re,{vertical:!0,get text(){return r.recipeSkill()+" Level:"},get children(){return a(bs,{get level(){return r.craftLevel()},onSelectLevel:c=>t.craftLevel(r.recipeSkill(),c)})}})})(),null),s})()})()),(()=>{const l=Ds.cloneNode(!0);return f(l,(()=>{const s=y(()=>!!r.state.simpleMode,!0);return()=>s()&&a(Ms,{})})(),null),f(l,(()=>{const s=y(()=>!r.state.simpleMode,!0);return()=>s()&&a(ks,{})})(),null),l})(),(()=>{const l=Bs.cloneNode(!0);return l.firstChild,f(l,a(ye,{class:"pl-1",get text(){return`${r.totalIngredientCost()}`}}),null),f(l,(()=>{const s=y(()=>r.craftAmmount()>1&&(r.totalIngredientCost()??0)>0,!0);return()=>s()&&[", cost per repetition is",a(ye,{class:"pl-1",get text(){return`${D((r.totalIngredientCost()??0)/r.craftAmmount())}`}})]})(),null),l})()]}})};const Us=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var Ws=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=Q();return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Product name"}),a(N,{children:"Amount"}),a(N,{children:"Cost Percentage"}),a(N,{children:"Production cost"}),a(N,{children:"Retail price"}),a(N,{children:"Personal price"})]}}),a(ee,{get children(){return a(G,{get each(){return r.recipeProducts()},children:n=>(()=>{const o=Us.cloneNode(!0),l=o.firstChild,s=l.nextSibling,i=s.nextSibling,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling;return f(l,a(k,{noStyle:!0,text:"Click to copy this fancy math to clipboard",get children(){return a(V,{onClick:()=>navigator.clipboard.writeText(r.calcExplanation(n.Name,e())),get children(){return n.Name}})}})),f(s,()=>n.Ammount),f(i,a(Xe,{get value(){return n.costPercentage},onChange:g=>t.costPercentage(r.variantId(),jr(r.costPercentages(),n.Name,g))})),f(c,a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{onClick:()=>t.personalPrice(ue(n.Name),e(),n.productionCost),get children(){return`${n.productionCost} ${e()}`}})}})),f(u,a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{class:"px-2 py-1",onClick:()=>t.personalPrice(ue(n.Name),e(),n.retailPrice),get children(){return`${n.retailPrice} ${e()}`}})}})),f(d,a(bt,{get personalPriceId(){return ue(n.Name)}})),o})()})}})]}})};const zs=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var Gs=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=Q();return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Product name"}),a(N,{children:"Amount"}),a(N,{children:"Cost Percentage"}),a(N,{children:"Retail price"})]}}),a(ee,{get children(){return a(G,{get each(){return r.recipeProducts()},children:n=>(()=>{const o=zs.cloneNode(!0),l=o.firstChild,s=l.nextSibling,i=s.nextSibling,c=i.nextSibling;return f(l,()=>n.Name),f(s,()=>n.Ammount),f(i,a(Xe,{get value(){return n.costPercentage},onChange:u=>t.costPercentage(r.variantId(),jr(r.costPercentages(),n.Name,u))})),f(c,()=>`${n.retailPrice} ${e()}`),o})()})}})]}})};const Hs=x('<span><span class="font-medium">Products</span>: Distribute recipe costs between resulting products</span>'),Xs=x('<div class="flex items-center mt-2">Cost per recipe with <!>% margin applied is </div>'),Ks=x('<div class="mt-8"></div>'),Js=x('<div class="flex gap-5 flex-wrap"></div>'),Qs=[0,5,10,15,20,25,30,40,50,75].map(e=>({value:e,text:`${e} %`}));var qs=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=Q();return a(Jt,{notCollapsible:!0,startsOpen:!0,class:"mt-6",get headerText(){return Hs.cloneNode(!0)},get children(){const n=y(()=>!!r.selectedVariant(),!0);return()=>n()&&[y((()=>{const o=y(()=>!r.state.simpleMode,!0);return()=>o()&&(()=>{const l=Js.cloneNode(!0);return f(l,a(Re,{vertical:!0,text:"Recipe margin:",get children(){return a(Ie,{options:Qs,onChange:s=>t.recipeMargin(r.variantId(),Number(s)),get selected(){return r.recipeMargin()}})}})),l})()})()),(()=>{const o=Xs.cloneNode(!0),l=o.firstChild,s=l.nextSibling;return s.nextSibling,f(o,()=>r.recipeMargin(),s),f(o,a(ye,{class:"px-1",get text(){return`${r.unitCostWithProfit()}`}}),null),f(o,e,null),o})(),(()=>{const o=Ks.cloneNode(!0);return f(o,()=>r.state.simpleMode&&Gs,null),f(o,()=>!r.state.simpleMode&&Ws,null),o})()]}})};const Ys=x('<div class="bg-bgColor-primary-hover border rounded px-8 py-3 mt-4"><div class="font-semibold text-sm">Calculating price for: </div><div class="flex items-center gap-2"></div></div>'),Zs=x("<div>&gt;</div>"),ei=x('<div class="inline-block py-1 px-1 font-semibold"></div>');var ti=()=>{const{allCraftableProducts:e,tagsResource:t,mainState:r}=U(),{priceCalcStore:n}=Q(),o=$(()=>jo(Object.values(e())??[],n.selectedRecipes(),t?.()?.Tags??{},n.selectedProduct()??"",n.state.focusedProdPath));return(()=>{const l=Ys.cloneNode(!0),s=l.firstChild,i=s.nextSibling;return f(i,a(G,{get each(){return o()},children:(c,u)=>[y((()=>{const d=y(()=>u()<o().length-1,!0);return()=>d()&&a(k,{noStyle:!0,text:"Click to calculate price",get children(){return a(V,{class:"inline-block py-1 px-4",onClick:()=>n.update.replaceFocusedProductPath(c.path),get children(){return c.productName}})}})})()),y((()=>{const d=y(()=>u()<o().length-1,!0);return()=>d()&&Zs.cloneNode(!0)})()),y((()=>{const d=y(()=>u()===o().length-1,!0);return()=>d()&&(()=>{const g=ei.cloneNode(!0);return f(g,()=>c.productName),g})()})())]})),l})()};const ri=x('<div class="flex justify-between"><div class="flex gap-2"></div></div>');var ni=()=>{const{priceCalcStore:e}=Q();return(()=>{const t=y(()=>e.selectedProduct()!==void 0,!0);return()=>t()&&[(()=>{const r=ri.cloneNode(!0),n=r.firstChild;return f(r,a(V,{onClick:()=>e.setSelectedProduct(void 0),children:"Back"}),n),f(n,a(Ie,{options:[{text:"Simple",value:"Simple"},{text:"Expanded",value:"Expanded"}],get onChange(){return e.update.toggleSimpleMode},get selected(){return e.state.simpleMode?"Simple":"Expanded"}}),null),f(n,a(Ie,{options:[{text:"Breadcrumb",value:"Breadcrumb"},{text:"Recipe tree",value:"RecipeTree"}],get onChange(){return e.update.toggleShowRecipeTree},get selected(){return e.state.showRecipeTree?"RecipeTree":"Breadcrumb"}}),null),r})(),y((()=>{const r=y(()=>!!e.state.showRecipeTree,!0);return()=>r()&&a($s,{})})()),y((()=>{const r=y(()=>!e.state.showRecipeTree,!0);return()=>r()&&a(ti,{})})()),a(Vs,{}),a(qs,{})]})()};const li=x('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-1 flex"></div><div class="mt-4 overflow-auto"></div></div></div>'),oi=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"> J</td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),cn=10;var si=()=>{const{listProductsStore:{state:e,update:{hidePricesForFuelModal:t}}}=Q(),{allProductsInStores:r,currentCurrency:n,get:o,update:l,tagsResource:s}=U(),[i,c]=F(1),[u,d]=F(!1),[g,m]=F(!0),p=$(()=>o.itemsInTag(sn.BurnableFuel)),h=$(()=>p().map(b=>b.Name)),C=$(()=>r()?.some(b=>Ae(h(),[b.ItemName])&&b.CurrencyName===n())??!1);Pe(()=>d(C()));const P=$(()=>r()?.filter(b=>Ae(h(),[b.ItemName])&&(!n()||!u()||b.CurrencyName===n())&&(!g()||!b.Buying&&b.Quantity>0)).map(b=>{const S=(p().find(I=>I.Name===b.ItemName)?.Fuel??0)*2;return{...b,Joules:S,PricePer1kJ:D(b.Price/S*1e3)}}).sort((b,S)=>b.Buying===S.Buying?b.PricePer1kJ-S.PricePer1kJ:b.Buying?1:-1)),R=$(()=>Fr(i(),cn,P())),_=$(()=>Dr(cn,P()));return(()=>{const b=y(()=>!!e.showPricesForFuelModal,!0);return()=>b()&&a(Wt,{onClose:t,get children(){const S=li.cloneNode(!0),I=S.firstChild,E=I.firstChild,O=E.nextSibling;return f(I,a(zt,{children:"Ingame prices for burnable fuel"}),E),f(E,a(xe,{label:"Show only buyable products",get checked(){return g()},onChange:L=>m(L)}),null),f(E,a(xe,{label:"Show only offers in selected currency",get checked(){return u()},onChange:L=>d(L)}),null),f(O,a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Product Name"}),a(N,{children:"Store Name"}),a(N,{children:"Store Owner"}),a(N,{children:"Quantity"}),a(N,{children:"Price"}),a(N,{children:"Joules"}),a(N,{children:"1k Joule price"})]}}),a(ee,{get children(){return a(G,{get each(){return R()},children:L=>(()=>{const X=oi.cloneNode(!0),K=X.firstChild,re=K.nextSibling,ne=re.nextSibling,le=ne.nextSibling,pe=le.nextSibling,Ce=pe.nextSibling,oe=Ce.firstChild,ie=Ce.nextSibling;return f(K,()=>L.ItemName),f(re,()=>L.StoreName),f(ne,()=>L.StoreOwner),f(le,()=>L.Buying?`Buying ${L.Limit} for`:`Selling ${L.MaxNumWanted} for`),f(pe,()=>L.Price),f(Ce,()=>L.Joules,oe),f(ie,a(k,{noStyle:!0,text:"Click to set your personal fuel price",get children(){return a(V,{onClick:()=>{l.costPer1kJoule(L.PricePer1kJ)},get children(){return`${L.PricePer1kJ} ${L.CurrencyName}`}})}})),X})()})}})]}}),null),f(O,a(st,{get currentPage(){return i()},get totalPages(){return _()},onChange:c}),null),S}})})()},an=()=>a(Wo,{get children(){return[a(ns,{}),a(ni,{}),a(Ko,{}),a(si,{})]}});const ii=x('<input class="bg-bgColor-primary hover:bg-bgColor-primary-hover rounded-md border h-8 px-2 text-sm font-small focus:outline-none text-textColor border-borderColor-primary hover:border-borderColor-hover" type="search" placeholder="User name">');var ci=()=>{const{mainState:e,update:t}=U();return(()=>{const r=ii.cloneNode(!0);return r.addEventListener("change",n=>t.userName(n.currentTarget.value)),A(()=>r.value=e.userName),r})()};const ai=x('<header class="shadow relative"><div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"><div><h1 class="text-3xl font-bold"></h1><span></span></div></div></header>'),ui=x('<div class="flex justify-between pt-3"><div class="flex gap-4"></div></div>');var di=e=>{const{serversResource:t,currentServer:r,currentCurrency:n,update:o,allCurrencies:l}=U(),s=$(()=>{const i=t?.()?.filter(c=>c.isOnline)?.map(c=>({value:c.key,text:c.name}))??[];return i.find(c=>c.value===r())?i:[...i,...t?.()?.filter(c=>c.key===r()).map(c=>({value:c.key,text:c.name}))??[]]});return(()=>{const i=ai.cloneNode(!0),c=i.firstChild,u=c.firstChild,d=u.firstChild,g=d.nextSibling;return f(d,()=>e.currentRoute()?.text),f(g,()=>e.currentRoute()?.description),f(c,(()=>{const m=y(()=>!!e.currentRoute()?.includeHeaderFields,!0);return()=>m()&&(()=>{const p=ui.cloneNode(!0),h=p.firstChild;return f(p,a(Re,{text:"Username:",vertical:!0,get children(){return a(ci,{})}}),h),f(h,a(Re,{text:"Currency:",vertical:!0,get children(){return a(Ee,{get value(){return n()},get values(){return[{value:"",text:"Select a currency",selectable:!1},...l()?.map(C=>({value:C,text:C}))??[]]},onChange:C=>o.currency(`${C}`),origin:"SE",direction:"SW"})}}),null),f(h,(()=>{const C=y(()=>!{}.VITE_SERVER,!0);return()=>C()&&a(Re,{text:"Eco Server:",vertical:!0,get children(){return[y((()=>{const P=y(()=>s()?.length>0,!0);return()=>P()&&a(Ee,{get value(){return r()},get values(){return[{value:"",text:"Select your server",selectable:!1},...s(),...t?.loading??!0?[{value:"",text:"Loading online servers...",selectable:!1}]:[]]},onChange:R=>{R!==""&&o.server(`${R}`)},origin:"SE",direction:"SW"})})()),y(()=>(t?.loading??!0)&&s()?.length<=0&&"loading..."),y(()=>!(t?.loading??!0)&&s()?.length<=0&&"try again later")]}})})(),null),p})()})(),null),i})()};const fi=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var un=fi;const hi="2.0.0",gi=256,mi=Number.MAX_SAFE_INTEGER||9007199254740991,pi=16;var dn={SEMVER_SPEC_VERSION:hi,MAX_LENGTH:gi,MAX_SAFE_INTEGER:mi,MAX_SAFE_COMPONENT_LENGTH:pi},qt={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=dn,n=un;t=e.exports={};const o=t.re=[],l=t.src=[],s=t.t={};let i=0;const c=(u,d,g)=>{const m=i++;n(u,m,d),s[u]=m,l[m]=d,o[m]=new RegExp(d,g?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})\\.(${l[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})\\.(${l[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${l[s.NUMERICIDENTIFIER]}|${l[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${l[s.NUMERICIDENTIFIERLOOSE]}|${l[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${l[s.PRERELEASEIDENTIFIER]}(?:\\.${l[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${l[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${l[s.BUILDIDENTIFIER]}(?:\\.${l[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${l[s.MAINVERSION]}${l[s.PRERELEASE]}?${l[s.BUILD]}?`),c("FULL",`^${l[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${l[s.MAINVERSIONLOOSE]}${l[s.PRERELEASELOOSE]}?${l[s.BUILD]}?`),c("LOOSE",`^${l[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${l[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${l[s.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:\\.(${l[s.XRANGEIDENTIFIER]})(?:${l[s.PRERELEASE]})?${l[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[s.XRANGEIDENTIFIERLOOSE]})(?:${l[s.PRERELEASELOOSE]})?${l[s.BUILD]}?)?)?`),c("XRANGE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${l[s.GTLT]}\\s*${l[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",l[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${l[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${l[s.LONETILDE]}${l[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${l[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${l[s.LONECARET]}${l[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${l[s.LONECARET]}${l[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${l[s.GTLT]}\\s*(${l[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${l[s.GTLT]}\\s*(${l[s.LOOSEPLAIN]}|${l[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${l[s.XRANGEPLAIN]})\\s+-\\s+(${l[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${l[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(qt,qt.exports);const vi=["includePrerelease","loose","rtl"],$i=e=>e?typeof e!="object"?{loose:!0}:vi.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};var xi=$i;const fn=/^[0-9]+$/,hn=(e,t)=>{const r=fn.test(e),n=fn.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},yi=(e,t)=>hn(t,e);var bi={compareIdentifiers:hn,rcompareIdentifiers:yi};const Ct=un,{MAX_LENGTH:gn,MAX_SAFE_INTEGER:St}=dn,{re:mn,t:pn}=qt.exports,Ci=xi,{compareIdentifiers:Ke}=bi;class fe{constructor(t,r){if(r=Ci(r),t instanceof fe){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>gn)throw new TypeError(`version is longer than ${gn} characters`);Ct("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?mn[pn.LOOSE]:mn[pn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>St||this.major<0)throw new TypeError("Invalid major version");if(this.minor>St||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>St||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const l=+o;if(l>=0&&l<St)return l}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ct("SemVer.compare",this.version,this.options,t),!(t instanceof fe)){if(typeof t=="string"&&t===this.version)return 0;t=new fe(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof fe||(t=new fe(t,this.options)),Ke(this.major,t.major)||Ke(this.minor,t.minor)||Ke(this.patch,t.patch)}comparePre(t){if(t instanceof fe||(t=new fe(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(Ct("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Ke(n,o)}while(++r)}compareBuild(t){t instanceof fe||(t=new fe(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(Ct("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return Ke(n,o)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(Ke(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}var Si=fe;const vn=Si,wi=(e,t,r)=>new vn(e,r).compare(new vn(t,r));var Pi=wi;const _i=Pi,Ni=(e,t,r)=>_i(e,t,r)<0;var Ei=Ni;const Ii=x('<div role="alert"></div>'),Ri=x('<div class="max-w-7xl mx-auto py-2 px-4 sm:px-6 lg:px-8"></div>'),Ti=x('<p class="font-bold">Critical error found:</p>'),Oi=x('<p class="text-sm">Not connected to server files. Check if mod is installed and configured properly on your eco server.</p>'),Ai=x('<p class="text-sm">Not all files are being exported. Either restart the eco server or run commands /dumplivedata and /dumprecipes as admin.</p>'),ki=x('<p class="font-bold">Warning:</p>'),Li=x(`<p class="text-sm">Your server files haven't been updated in <!> hours. Make sure the mod is running and configured properly on your eco server.</p>`),Mi=x('<p class="font-bold">Info:</p>'),Fi=x('<p class="text-sm">Eco server is running an outdated version of the required mod <i>Live data exporter</i>: <!>. Please download latest version <!> from <a class="underline" href="https://eco.mod.io/live-data-exporter" target="_blank">https://eco.mod.io</a>.</p>'),Di=e=>{const t=new Date;var r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return Math.round((r.getTime()-e.getTime())/36e5)};var H;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.None=3]="None"})(H||(H={}));const Bi=e=>Ei(e,on),ji=({hasNoData:e,hasOnlySomeData:t,lastUpdateInHours:r,isPluginOutdated:n})=>e||t?H.Error:r>4?H.Warning:n?H.Info:H.None;var Vi=()=>{const{storesResource:e,recipesResource:t,tagsResource:r}=U(),n=$(()=>{const o=!!e?.()?.PluginVersion,l=!!t?.()?.PluginVersion,s=!!r?.()?.PluginVersion,i=!o&&!l&&!s,c=!o||!l||!s,u=e?.()?.ExportedAt,d=u?Di(to(u)):0,g=e?.()?.PluginVersion,m=!!g&&Bi(g);return{loading:e?.loading||t?.loading||r?.loading,logLevel:ji({hasNoData:i,hasOnlySomeData:c,lastUpdateInHours:d,isPluginOutdated:m}),hasNoData:i,hasOnlySomeData:c,lastUpdateInHours:d,isPluginOutdated:m,pluginVersion:g}});return(()=>{const o=Ii.cloneNode(!0);return f(o,(()=>{const l=y(()=>!n().loading&&n().logLevel!=H.None,!0);return()=>l()&&(()=>{const s=Ri.cloneNode(!0);return f(s,(()=>{const i=y(()=>n().logLevel===H.Error,!0);return()=>i()&&Ti.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Error&&n().hasNoData),!0);return()=>i()&&Oi.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Error&&!n().hasNoData&&n().hasOnlySomeData),!0);return()=>i()&&Ai.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>n().logLevel===H.Warning,!0);return()=>i()&&ki.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Warning&&n().lastUpdateInHours),!0);return()=>i()&&(()=>{const c=Li.cloneNode(!0),u=c.firstChild,d=u.nextSibling;return d.nextSibling,f(c,()=>n().lastUpdateInHours,d),c})()})(),null),f(s,(()=>{const i=y(()=>n().logLevel===H.Info,!0);return()=>i()&&Mi.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Info&&n().isPluginOutdated),!0);return()=>i()&&(()=>{const c=Fi.cloneNode(!0),u=c.firstChild,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling,p=m.nextSibling,h=p.nextSibling;return h.nextSibling,f(c,()=>n().pluginVersion,m),f(c,()=>on,h),c})()})(),null),s})()})()),A(()=>o.className=j({"border-t border-b":!n().loading&&n().logLevel!=H.None,"bg-bgColor-error border-borderColor-error text-textColor-error":n().logLevel===H.Error,"bg-bgColor-warning border-borderColor-warning text-textColor-warning":n().logLevel===H.Warning,"bg-bgColor-success border-borderColor-success text-textColor-success":n().logLevel===H.Info})),o})()};const Ui=x('<div class="bg-bgColor-primary text-textColor min-h-full"><main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"></main></div>'),Wi=gt(()=>at(()=>Promise.resolve().then(function(){return ic}),void 0)),zi=gt(()=>at(()=>Promise.resolve().then(function(){return fc}),void 0)),Gi=gt(()=>at(()=>Promise.resolve().then(function(){return xc}),void 0)),Hi=gt(()=>at(()=>Promise.resolve().then(function(){return wc}),void 0)),Me={PriceCalculator:{text:"Price Calculator",description:"Allows calculation of price for products in a recipe based on all ingredients / raw materials necessary",href:"/",includeHeaderFields:!0},Market:{text:"Ingame market",description:"Buy/sell orders of all stores ingame",href:"/market",includeHeaderFields:!0},RawData:{text:"Raw data",description:"Download the raw files that this app uses for your own personal uses",href:"/rawData"},Personal:{text:"Personal",description:"List and edit current cached personal values",href:"/personal"},Home:{text:"About",description:"",href:"/about"}},Xi=()=>{const e=Pr(),t=$(()=>Object.keys(Me).map(n=>({...Me[n],highlight:e.pathname===Me[n].href}))),r=$(()=>t().find(n=>n.highlight));return a(fo,{get children(){const n=Ui.cloneNode(!0),o=n.firstChild;return f(n,a(Bl,{get routes(){return t()}}),o),f(n,a(Vi,{}),o),f(n,a(di,{currentRoute:r}),o),f(o,a(Cl,{get children(){return[a(ze,{get path(){return Me.Market.href},get element(){return a(Wi,{})}}),a(ze,{get path(){return Me.RawData.href},get element(){return a(zi,{})}}),a(ze,{get path(){return Me.Personal.href},get element(){return a(Gi,{})}}),a(ze,{get path(){return Me.Home.href},get element(){return a(Hi,{})}}),a(ze,{path:"/",get element(){return a(an,{})}}),a(ze,{path:"/*all",get element(){return a(an,{})}})]}})),n}})},Ki=()=>zn(()=>a(bl,{get children(){return a(Xi,{})}}),document.getElementById("root"));Ki();var me;(function(e){e[e.PRODUCT=0]="PRODUCT",e[e.STORE=1]="STORE",e[e.QUANTITY=2]="QUANTITY",e[e.PRICE=3]="PRICE"})(me||(me={}));var Te;(function(e){e[e.STORE=0]="STORE",e[e.BALANCE=1]="BALANCE",e[e.OFFERS=2]="OFFERS"})(Te||(Te={}));const Ji=(e,t,r,n)=>{const o=n?-1:1;switch(r){case 1:return(e.Balance-t.Balance)*o;case 2:return(e.AllOffers.length-t.AllOffers.length)*o;default:return ke(e.Name,t.Name)*o}},Qi=(e,t,r,n)=>{const o=n?-1:1;switch(r){case 1:return ke(e.StoreName,t.StoreName)*o;case 2:return(e.Quantity-t.Quantity)*o;case 3:return(e.Price-t.Price)*o;default:return ke(e.ItemName,t.ItemName)*o}};var qi=()=>{const{storesResource:e,allProductsInStores:t,isLoadingResources:r,mainState:n,update:o,currentCurrency:l}=U(),[s,i]=ae({search:"",isStoresTable:!0,filterOrderType:be.BOTH,storesPage:1,productsPage:1,filterByOwner:!1,showStoreModal:void 0,sortingProducts:{column:0,directionDesc:!1},sortingStores:{column:0,directionDesc:!1},pageSize:100},"MarketStore"),c=$(()=>e?.()?.Stores?.filter(h=>(ge(s.search,h.Name??"")||ge(s.search,h.Owner??""))&&ge(l(),h.CurrencyName??"")&&(!s.filterByOwner||n.userName.length===0||ge(n.userName,h.Owner??""))).sort((h,C)=>Ji(h,C,s.sortingStores.column,s.sortingStores.directionDesc)).slice((s.storesPage-1)*s.pageSize,s.storesPage*s.pageSize)),u=$(()=>Math.ceil((e?.()?.Stores?.length??0)/s.pageSize)),d=$(()=>(t()??[]).filter(h=>(ge(s.search,h.ItemName??"")||ge(s.search,h.StoreName??"")||ge(s.search,h.StoreOwner??""))&&ge(l(),h.CurrencyName??"")&&(!s.filterByOwner||n.userName.length===0||ge(n.userName,h.StoreOwner??""))&&(s.filterOrderType===be.BOTH||s.filterOrderType===be.BUY&&h.Buying||s.filterOrderType===be.SELL&&!h.Buying))),g=$(()=>Math.ceil((d()?.length??0)/s.pageSize)),m=$(()=>d().sort((h,C)=>Qi(h,C,s.sortingProducts.column,s.sortingProducts.directionDesc)).slice((s.productsPage-1)*s.pageSize,s.productsPage*s.pageSize)),[p]=zr(h=>i({search:h,storesPage:1,productsPage:1}),200);return Pe(()=>{n.currency,i({storesPage:1,productsPage:1})}),{state:s,stores:c,isLoadingResources:r,setSearch:p,setCurrencyFilter:h=>o.currency(h),toggleTableType:()=>i(h=>({isStoresTable:!h.isStoresTable})),setOrderType:h=>i({filterOrderType:h}),setStoresPage:h=>i({storesPage:h}),setPageSize:h=>i({pageSize:h}),setProductsPage:h=>i({productsPage:h}),setFilterByOwner:h=>i({filterByOwner:h}),setShowStoreModal:h=>i({showStoreModal:h}),toggleSortStoresTable:h=>{i(C=>({sortingStores:{column:h,directionDesc:C.sortingStores.column!==h?!1:!C.sortingStores.directionDesc}}))},toggleSortProductTable:h=>{i(C=>({sortingProducts:{column:h,directionDesc:C.sortingProducts.column!==h?!1:!C.sortingProducts.directionDesc}}))},products:m,storesTotalPages:u,productsTotalPages:g,clearFilters:()=>i({search:"",storesPage:1,productsPage:1,filterByOwner:!1})}};const Yi=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var Zi=e=>a(Z,{get children(){return[a(te,{get children(){return[a(N,{onSort:()=>e.toggleSortColumn(Te.STORE),get directionDesc(){return e.currentSort.column===Te.STORE?e.currentSort.directionDesc:void 0},children:"Store Name"}),a(N,{children:"Store Owner"}),a(N,{children:"Currency"}),a(N,{onSort:()=>e.toggleSortColumn(Te.BALANCE),get directionDesc(){return e.currentSort.column===Te.BALANCE?e.currentSort.directionDesc:void 0},children:"Balance"}),a(N,{onSort:()=>e.toggleSortColumn(Te.OFFERS),get directionDesc(){return e.currentSort.column===Te.OFFERS?e.currentSort.directionDesc:void 0},children:"Offers"})]}}),a(ee,{get children(){return[a(Kt,{get show(){return e.isLoadingResource}}),a(G,{get each(){return e.stores()},children:t=>(()=>{const r=Yi.cloneNode(!0),n=r.firstChild,o=n.nextSibling,l=o.nextSibling,s=l.nextSibling,i=s.nextSibling;return f(n,a(k,{noStyle:!0,text:"Click to show store orders",get children(){return a(V,{onClick:()=>e.setShowStoreModal(t.Name),get children(){return t.Name}})}})),f(o,a(k,{noStyle:!0,text:"Click to filter by store owner",get children(){return a(V,{onClick:()=>e.setSearch(t.Owner),get children(){return t.Owner}})}})),f(l,a(k,{noStyle:!0,text:"Click to select this currency",get children(){return a(V,{onClick:()=>e.setCurrencyFilter(t.CurrencyName),get children(){return t.CurrencyName}})}})),f(s,()=>t.Balance),f(i,()=>t.AllOffers.length),r})()})]}})]}});const ec=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm">&nbsp;</td></tr>');var tc=e=>a(Z,{get children(){return[a(te,{get children(){return[a(N,{onSort:()=>e.toggleSortColumn(me.PRODUCT),get directionDesc(){return e.currentSort.column===me.PRODUCT?e.currentSort.directionDesc:void 0},children:"Product Name"}),a(N,{onSort:()=>e.toggleSortColumn(me.STORE),get directionDesc(){return e.currentSort.column===me.STORE?e.currentSort.directionDesc:void 0},children:"Store Name"}),a(N,{children:"Store Owner"}),a(N,{onSort:()=>e.toggleSortColumn(me.QUANTITY),get directionDesc(){return e.currentSort.column===me.QUANTITY?e.currentSort.directionDesc:void 0},children:"Quantity"}),a(N,{onSort:()=>e.toggleSortColumn(me.PRICE),get directionDesc(){return e.currentSort.column===me.PRICE?e.currentSort.directionDesc:void 0},children:"Price"})]}}),a(ee,{get children(){return[a(Kt,{get show(){return e.isLoadingResources}}),a(G,{get each(){return e.products()},children:t=>(()=>{const r=ec.cloneNode(!0),n=r.firstChild,o=n.nextSibling,l=o.nextSibling,s=l.nextSibling,i=s.nextSibling,c=i.firstChild;return f(n,a(k,{noStyle:!0,text:"Click to filter by product name",get children(){return a(V,{onClick:()=>e.setSearch(t.ItemName),get children(){return t.ItemName}})}})),f(o,a(k,{noStyle:!0,text:"Click to show store orders",get children(){return a(V,{onClick:()=>e.setShowStoreModal(t.StoreName),get children(){return t.StoreName}})}})),f(l,a(k,{noStyle:!0,text:"Click to filter by store owner",get children(){return a(V,{onClick:()=>e.setSearch(t.StoreOwner),get children(){return t.StoreOwner}})}})),f(s,(()=>{const u=y(()=>!!t.Buying,!0);return()=>u()?["Buying ",a(ye,{get text(){return`${t.Limit}`}})," for"]:["Selling ",a(ye,{get text(){return`${t.MaxNumWanted}`}})," for"]})()),f(i,a(ye,{get text(){return`${t.Price}`}}),c),f(i,()=>t.CurrencyName,null),r})()})]}})]}}),rc=e=>a(Ee,{get value(){return e.pageSize},values:[{value:10,text:"10 rows"},{value:20,text:"20 rows"},{value:50,text:"50 rows"},{value:100,text:"100 rows"},{value:200,text:"200 rows"},{value:1e3,text:"1000 rows"}],onChange:t=>e.onChange(Number(t)),origin:"SE",direction:"SW"});const nc=x('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-2 flex lg:flex-row gap-2 sm:flex-col"></div></div></div>'),$n=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td></tr>');var lc=e=>{const{allProductsInStores:t}=U(),r=$(()=>t()?.filter(l=>l.StoreName===e.storeName)),n=$(()=>r()?.filter(l=>!l.Buying)),o=$(()=>r()?.filter(l=>l.Buying));return(()=>{const l=y(()=>!!e.storeName,!0);return()=>l()&&a(Wt,{get onClose(){return e.hideModal},get children(){const s=nc.cloneNode(!0),i=s.firstChild,c=i.firstChild;return f(i,a(zt,{get children(){return["Ingame orders for store ",y(()=>e.storeName)]}}),c),f(c,a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Selling"}),a(N,{children:"Price"}),a(N,{children:"Quantity"})]}}),a(ee,{get children(){return a(G,{get each(){return n()},children:u=>(()=>{const d=$n.cloneNode(!0),g=d.firstChild,m=g.nextSibling,p=m.nextSibling;return f(g,()=>u.ItemName.length<=25&&u.ItemName,null),f(g,(()=>{const h=y(()=>u.ItemName.length>25,!0);return()=>h()&&a(k,{get text(){return u.ItemName},get children(){return[y(()=>u.ItemName.substring(0,17)),"..."]}})})(),null),f(m,()=>u.Price),f(p,()=>u.MaxNumWanted),d})()})}})]}}),null),f(c,a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Purchasing"}),a(N,{children:"Price"}),a(N,{children:"Max wanted"})]}}),a(ee,{get children(){return a(G,{get each(){return o()},children:u=>(()=>{const d=$n.cloneNode(!0),g=d.firstChild,m=g.nextSibling,p=m.nextSibling;return f(g,()=>u.ItemName.length<=25&&u.ItemName,null),f(g,(()=>{const h=y(()=>u.ItemName.length>25,!0);return()=>h()&&a(k,{get text(){return u.ItemName},get children(){return[y(()=>u.ItemName.substring(0,17)),"..."]}})})(),null),f(m,()=>u.Price),f(p,()=>u.Limit),d})()})}})]}}),null),s}})})()};const oc=x('<div><div class="flex justify-between"><div></div><div class="flex items-center gap-2 mb-2"></div></div></div>');var sc=()=>{const{state:e,stores:t,isLoadingResources:r,setSearch:n,setCurrencyFilter:o,toggleTableType:l,setOrderType:s,products:i,storesTotalPages:c,productsTotalPages:u,setStoresPage:d,setProductsPage:g,setFilterByOwner:m,setShowStoreModal:p,setPageSize:h,toggleSortStoresTable:C,toggleSortProductTable:P,clearFilters:R}=qi();return(()=>{const _=oc.cloneNode(!0),b=_.firstChild,S=b.firstChild,I=S.nextSibling;return f(S,a(k,{text:"click to filter by stores owned by you (set your name in the header above)",origin:"NW",direction:"NE",get children(){return a(xe,{label:"Only show my store's",get checked(){return e.filterByOwner},onChange:E=>m(E)})}})),f(I,a(nn,{get value(){return e.search},onChange:n}),null),f(I,a(Ie,{options:[{text:"Stores",value:"Stores"},{text:"Products",value:"Products"}],onChange:()=>l(),get selected(){return e.isStoresTable?"Stores":"Products"}}),null),f(I,a(Ue,{get when(){return!e.isStoresTable},get children(){return a(Ie,{get options(){return[{text:"Buy",value:be.BUY},{text:"Sell",value:be.SELL},{text:"Both",value:be.BOTH}]},onChange:E=>s(Number(E)),get selected(){return e.filterOrderType}})}}),null),f(I,a(V,{onClick:()=>R(),children:"Clear filters"}),null),f(I,a(rc,{get pageSize(){return e.pageSize},onChange:h}),null),f(_,a(Ue,{get when(){return e.isStoresTable},get children(){return[a(Zi,{stores:t,isLoadingResource:r,setSearch:n,setCurrencyFilter:o,setShowStoreModal:p,get currentSort(){return e.sortingStores},toggleSortColumn:C}),a(st,{get currentPage(){return e.storesPage},get totalPages(){return c()},onChange:d})]}}),null),f(_,a(Ue,{get when(){return!e.isStoresTable},get children(){return[a(tc,{products:i,isLoadingResources:r,setSearch:n,setCurrencyFilter:o,setShowStoreModal:p,get currentSort(){return e.sortingProducts},toggleSortColumn:P}),a(st,{get currentPage(){return e.productsPage},get totalPages(){return u()},onChange:g})]}}),null),f(_,a(lc,{get storeName(){return e.showStoreModal},hideModal:()=>p(void 0)}),null),_})()},ic=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:sc});const cc=(e,t)=>{const r=new Blob([decodeURIComponent(encodeURI(JSON.stringify(t)))],{type:"application/json;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(r),n.setAttribute("download",`${e}.json`),n.target="_blank",document.body.appendChild(n),n.click(),n?.parentNode?.removeChild(n)};var ac=()=>{const{currentServer:e}=U(),[t,r]=F(""),[n]=_e(t,o=>o?no(e(),o).then(l=>({filename:o,json:l})):Promise.resolve(void 0));return Pe(()=>{const o=n()&&n()?.filename;o&&cc(o,n()?.json),r("")}),{downloadFile:r}};const uc=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-textColor-success hover:underline">Download</button></td></tr>');var wt=({name:e,exportedAt:t,downloadFile:r})=>(()=>{const n=uc.cloneNode(!0),o=n.firstChild,l=o.nextSibling,s=l.nextSibling,i=s.firstChild;return f(o,e),f(l,t),i.$$click=()=>r(e),n})();Y(["click"]);var dc=()=>{const{storesResource:e,tagsResource:t,recipesResource:r,craftingTablesResource:n}=U(),{downloadFile:o}=ac(),l=$(()=>e?.()?.ExportedAt?.StringRepresentation??"Not exported"),s=$(()=>r?.()?.ExportedAt?.StringRepresentation??"Not exported"),i=$(()=>t?.()?.ExportedAt?.StringRepresentation??"Not exported"),c=$(()=>n?.()?.ExportedAt?.StringRepresentation??"Not exported");return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"File name"}),a(N,{children:"Last update"}),a(Po,{children:"Download"})]}}),a(ee,{get children(){return[y((()=>{const u=y(()=>!!e?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Stores",exportedAt:l,downloadFile:()=>o(Ps)})})()),y((()=>{const u=y(()=>!!r?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Recipes",exportedAt:s,downloadFile:()=>o(Cs)})})()),y((()=>{const u=y(()=>!!t?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Tags",exportedAt:i,downloadFile:()=>o(ws)})})()),y((()=>{const u=y(()=>!!n?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Crafting Tables",exportedAt:c,downloadFile:()=>o(Ss)})})())]}})]}})},fc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:dc});const hc=x('<button><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-textColor" fill="currentColor" viewBox="0 0 1024 1024"><path d="M512 897.6c-108 0-209.6-42.4-285.6-118.4-76-76-118.4-177.6-118.4-285.6 0-108 42.4-209.6 118.4-285.6 76-76 177.6-118.4 285.6-118.4 108 0 209.6 42.4 285.6 118.4 157.6 157.6 157.6 413.6 0 571.2-76 76-177.6 118.4-285.6 118.4z m0-760c-95.2 0-184.8 36.8-252 104-67.2 67.2-104 156.8-104 252s36.8 184.8 104 252c67.2 67.2 156.8 104 252 104 95.2 0 184.8-36.8 252-104 139.2-139.2 139.2-364.8 0-504-67.2-67.2-156.8-104-252-104z"></path><path d="M707.872 329.392L348.096 689.16l-31.68-31.68 359.776-359.768z"></path><path d="M328 340.8l32-31.2 348 348-32 32z"></path></svg></button>');var Yt=e=>(()=>{const t=hc.cloneNode(!0);return tt(t,"click",e.onClick,!0),A(()=>t.className=j("hover:bg-bgColor-primary-hover rounded-full",e.class??"")),t})();Y(["click"]);const gc=x('<div class="group flex items-center"></div>'),mc=x('<tr><td class="px-6 py-4 whitespace-nowrap text-sm group flex"></td></tr>'),pc=x('<td class="px-6 py-4 whitespace-nowrap text-sm group"></td>'),vc=x('<div class="flex items-start"></div>');var $c=()=>{const{getState:e,update:t,clear:r}=U(),n=$(()=>[...new Set(Object.entries(e.personalPrice).flatMap(([o,l])=>Object.keys(l)))].sort(ke));return a(Z,{get children(){return[a(te,{get children(){return[a(N,{children:"Item name"}),a(G,{get each(){return n()},children:o=>a(N,{get children(){const l=gc.cloneNode(!0);return f(l,o,null),f(l,a(k,{noStyle:!0,text:"Click to delete all personal prices in this currency",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalCurrency(o)}})}}),null),l}})})]}}),a(ee,{get children(){return a(G,{get each(){return Object.entries(e.personalPrice).sort((o,l)=>ke(o[0],l[0]))},children:([o,l])=>(()=>{const s=mc.cloneNode(!0),i=s.firstChild;return f(i,()=>Vt(eo(o)),null),f(i,a(k,{noStyle:!0,text:"Click to delete all personal prices for this item",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalPriceProduct(o)}})}}),null),f(s,a(G,{get each(){return n()},children:c=>(()=>{const u=pc.cloneNode(!0);return f(u,(()=>{const d=y(()=>l[c]===void 0,!0);return()=>d()&&a(V,{class:"opacity-0 group-hover:opacity-100",onClick:()=>t.personalPrice(o,c,0),children:"Set price"})})(),null),f(u,(()=>{const d=y(()=>l[c]!==void 0,!0);return()=>d()&&(()=>{const g=vc.cloneNode(!0);return f(g,a(Xe,{get value(){return l[c]},onChange:m=>t.personalPrice(o,c,m)}),null),f(g,a(k,{noStyle:!0,text:"Click to delete this personal price",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalPriceCurrency(o,c)}})}}),null),g})()})(),null),u})()}),null),s})()})}})]}})},xc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:$c});const yc="_changelog_1im56_1";var bc={changelog:yc};const Cc=x(`<div><p>Hello and welcome,</p><p>I go by the nicknames of <i>Ucat</i> and <i>Fon</i> and i've been building this tool on my spare time. <br>This works hand in hand with a mod that outputs the data from the server that then this tool extracts to allow you to work with. More information on the mod can be found on the <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://mod.io/g/eco/m/live-data-exporter">mod's page</a>. You can also contact me using discord, my handle is Fon#2880.<br><br>Here's a brief explanation on current features:</p><p><b>Price calculator</b> page is where you can find all recipes in game and use them to figure out how much you should price your products in your store. No more excel or calculator, this tool does all those calculations for you. <br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/F3RWjCK5VcM">https://youtu.be/F3RWjCK5VcM</a></p><p><b>Ingame market</b> page is where you can check the products that are being sold at this moment in ingame stores. There are currently two views with different visibility level: one for stores and one for products. <br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/ZraPFAxvyjo">https://youtu.be/ZraPFAxvyjo</a></p><p><b>Raw data</b> page is where you can download the raw files i use on this tool to check raw data or to create your own tool.<br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/sUkygO9QyOE">https://youtu.be/sUkygO9QyOE</a></p><p><b>Personal</b> page is where you can see and edit all the personal prices and other default values you used. The tool remembers your last choices so that you don't have to.<br></p><br><br><p>PS: I could really use the help of a UX designer to improve this tool. If you have the skills and are willing to help, please reach out to me over discord. </p><br>If you like this tool and you wish to thank me for my efforts and/or you'd like to contribute to it's further development and maintenance consider <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://www.buymeacoffee.com/pricecalculator">buying me a coffee</a> for inspiration in future coding sessions. Thanks for appreciating my efforts.<br><br><div><h2>Latest changes</h2><h3>3.5.0 (2023-09-09)</h3><h4>Features</h4><ul><li>Added light and dark themes - preselects dark theme if enabled in operating system and can be customized by the user</li></ul><h3>3.4.1 (2023-08-07)</h3><h4>Bugfix</h4><ul><li>Check for online servers on the backend</li></ul><h3>3.4.0 (2023-08-06)</h3><h4>Features</h4><ul><li>Hide offline servers on server list</li><li>Select first online server by default</li></ul><h4>Bugfix</h4><ul><li>Minor fix to error when offline server was selected</li></ul></div></div>`);var Sc=()=>(()=>{const e=Cc.cloneNode(!0),t=e.firstChild,r=t.nextSibling,n=r.nextSibling,o=n.nextSibling,l=o.nextSibling,s=l.nextSibling,i=s.nextSibling,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling,p=m.nextSibling,h=p.nextSibling,C=h.nextSibling,P=C.nextSibling;return A(()=>P.className=bc.changelog),e})(),wc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Sc});
