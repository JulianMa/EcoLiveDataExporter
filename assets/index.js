const xn=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function r(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=r(l);fetch(l.href,o)}};xn();const yn="modulepreload",er={},Cn="/",at=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${Cn}${n}`,n in er)return;er[n]=!0;const l=n.endsWith(".css"),o=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${o}`))return;const s=document.createElement("link");if(s.rel=l?"stylesheet":yn,l||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),l)return new Promise((i,c)=>{s.addEventListener("load",i),s.addEventListener("error",c)})})).then(()=>t())},Sn=(e,t)=>e===t,De=Symbol("solid-proxy"),ut={equals:Sn};let tr=sr;const Be={},$e=1,Pt=2,rr={owned:null,cleanups:null,context:null,owner:null},[wn,_c]=F(!1);var W=null;let Je=null,z=null,Ke=null,q=null,he=null,_t=0;function je(e,t){t&&(W=t);const r=z,n=W,l=e.length===0?rr:{owned:null,cleanups:null,context:null,owner:n};W=l,z=null;let o;try{It(()=>o=e(()=>Rt(l)),!0)}finally{z=r,W=n}return o}function F(e,t){t=t?Object.assign({},ut,t):ut;const r={value:e,observers:null,observerSlots:null,pending:Be,comparator:t.equals||void 0};return[lr.bind(r),n=>(typeof n=="function"&&(n=n(r.pending!==Be?r.pending:r.value)),Et(r,n))]}function Nt(e,t,r){Ze(ft(e,t,!0,$e))}function A(e,t,r){Ze(ft(e,t,!1,$e))}function Pe(e,t,r){tr=kn;const n=ft(e,t,!1,$e);n.user=!0,he&&he.push(n)}function $(e,t,r){r=r?Object.assign({},ut,r):ut;const n=ft(e,t,!0,0);return n.pending=Be,n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Ze(n),lr.bind(n)}function _e(e,t,r){arguments.length===2?typeof t=="object"&&(r=t,t=e,e=!0):arguments.length===1&&(t=e,e=!0);const n=new Set,[l,o]=F((r||{}).initialValue),[s,i]=F(void 0,{equals:!1}),[c,u]=F(!1),[d,g]=F();let m,p=null,h=null,C=typeof e=="function";function _(w,S,T){return p===w&&(g(m=T),p=null,I(S)),S}function I(w){Qe(()=>{o(()=>w),u(!1);for(const S of n.keys())S.decrement();n.clear()})}function N(){const w=Rn,S=l();if(m)throw m;return z&&!z.user&&w&&Nt(()=>{s(),p&&(w.resolved||n.has(w)||(w.increment(),n.add(w)))}),S}function x(){g(m=void 0);const w=C?e():e;if(w==null||w===!1){_(p,se(l));return}const S=h||se(()=>t(w,l));if(h=null,typeof S!="object"||!("then"in S)){_(p,S);return}p=S,Qe(()=>{u(!0),i()}),S.then(T=>_(S,T),T=>_(S,T,T))}return Object.defineProperties(N,{loading:{get(){return c()}},error:{get(){return d()}}}),C?Nt(x):x(),[N,{refetch:x,mutate:o}]}function Qe(e){if(Ke)return e();let t;const r=Ke=[];try{t=e()}finally{Ke=null}return It(()=>{for(let n=0;n<r.length;n+=1){const l=r[n];if(l.pending!==Be){const o=l.pending;l.pending=Be,Et(l,o)}}},!1),t}function se(e){let t,r=z;return z=null,t=e(),z=r,t}function nr(e,t,r){const n=Array.isArray(e);let l,o=r&&r.defer;return s=>{let i;if(n){i=[];for(let u=0;u<e.length;u++)i.push(e[u]())}else i=e();if(o){o=!1;return}const c=se(()=>t(i,l,s));return l=i,c}}function Pn(e){Pe(()=>se(e))}function Ve(e){return W===null||(W.cleanups===null?W.cleanups=[e]:W.cleanups.push(e)),e}function or(){return z}function _n(){return W}function Nn(e,t){const r=W;W=e;try{return t()}finally{W=r}}function En(e,t){queueMicrotask(()=>{Qe(e),t&&t()})}function In(){return[wn,En]}function dt(e){const t=Symbol("context");return{id:t,Provider:Ln(t),defaultValue:e}}function Ye(e){return ar(W,e.id)||e.defaultValue}function Tn(e){const t=$(e);return $(()=>Ot(t()))}let Rn;function lr(){const e=Je;if(this.sources&&(this.state||e)){const t=q;q=null,this.state===$e||e?Ze(this):Tt(this),q=t}if(z){const t=this.observers?this.observers.length:0;z.sources?(z.sources.push(this),z.sourceSlots.push(t)):(z.sources=[this],z.sourceSlots=[t]),this.observers?(this.observers.push(z),this.observerSlots.push(z.sources.length-1)):(this.observers=[z],this.observerSlots=[z.sources.length-1])}return this.value}function Et(e,t,r){if(e.comparator&&e.comparator(e.value,t))return t;if(Ke)return e.pending===Be&&Ke.push(e),e.pending=t,t;let n=!1;return e.value=t,e.observers&&e.observers.length&&It(()=>{for(let l=0;l<e.observers.length;l+=1){const o=e.observers[l];n&&Je.disposed.has(o),o.pure?q.push(o):he.push(o),o.observers&&(n&&!o.tState||!n&&!o.state)&&ir(o),n||(o.state=$e)}if(q.length>1e6)throw q=[],new Error},!1),t}function Ze(e){if(!e.fn)return;Rt(e);const t=W,r=z,n=_t;z=W=e,On(e,e.value,n),z=r,W=t}function On(e,t,r){let n;try{n=e.fn(t)}catch(l){cr(l)}(!e.updatedAt||e.updatedAt<=r)&&(e.observers&&e.observers.length?Et(e,n):e.value=n,e.updatedAt=r)}function ft(e,t,r,n=$e,l){const o={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:W,context:null,pure:r};return W===null||W!==rr&&(W.owned?W.owned.push(o):W.owned=[o]),o}function et(e){const t=Je;if(e.state!==$e)return e.state=0;if(e.suspense&&se(e.suspense.inFallback))return e.suspense.effects.push(e);const r=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<_t);)(e.state||t)&&r.push(e);for(let n=r.length-1;n>=0;n--)if(e=r[n],e.state===$e||t)Ze(e);else if(e.state===Pt||t){const l=q;q=null,Tt(e),q=l}}function It(e,t){if(q)return e();let r=!1;t||(q=[]),he?r=!0:he=[],_t++;try{e()}catch(n){cr(n)}finally{An(r)}}function An(e){q&&(sr(q),q=null),!e&&(he.length?Qe(()=>{tr(he),he=null}):he=null)}function sr(e){for(let t=0;t<e.length;t++)et(e[t])}function kn(e){let t,r=0;for(t=0;t<e.length;t++){const l=e[t];l.user?e[r++]=l:et(l)}const n=e.length;for(t=0;t<r;t++)et(e[t]);for(t=n;t<e.length;t++)et(e[t])}function Tt(e){e.state=0;const t=Je;for(let r=0;r<e.sources.length;r+=1){const n=e.sources[r];n.sources&&(n.state===$e||t?et(n):(n.state===Pt||t)&&Tt(n))}}function ir(e){const t=Je;for(let r=0;r<e.observers.length;r+=1){const n=e.observers[r];(!n.state||t)&&(n.state=Pt,n.pure?q.push(n):he.push(n),n.observers&&ir(n))}}function Rt(e){let t;if(e.sources)for(;e.sources.length;){const r=e.sources.pop(),n=e.sourceSlots.pop(),l=r.observers;if(l&&l.length){const o=l.pop(),s=r.observerSlots.pop();n<l.length&&(o.sourceSlots[s]=n,l[n]=o,r.observerSlots[n]=s)}}if(e.owned){for(t=0;t<e.owned.length;t++)Rt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=0;t<e.cleanups.length;t++)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function cr(e){throw e}function ar(e,t){return e&&(e.context&&e.context[t]||e.owner&&ar(e.owner,t))}function Ot(e){if(typeof e=="function"&&!e.length)return Ot(e());if(Array.isArray(e)){const t=[];for(let r=0;r<e.length;r++){const n=Ot(e[r]);Array.isArray(n)?t.push.apply(t,n):t.push(n)}return t}return e}function Ln(e){return function(r){let n;return Nt(()=>n=se(()=>(W.context={[e]:r.value},Tn(()=>r.children)))),n}}const Mn=Symbol("fallback");function ur(e){for(let t=0;t<e.length;t++)e[t]()}function Fn(e,t,r={}){let n=[],l=[],o=[],s=0,i=t.length>1?[]:null;return Ve(()=>ur(o)),()=>{let c=e()||[],u,d;return se(()=>{let m=c.length,p,h,C,_,I,N,x,w,S;if(m===0)s!==0&&(ur(o),o=[],n=[],l=[],s=0,i&&(i=[])),r.fallback&&(n=[Mn],l[0]=je(T=>(o[0]=T,r.fallback())),s=1);else if(s===0){for(l=new Array(m),d=0;d<m;d++)n[d]=c[d],l[d]=je(g);s=m}else{for(C=new Array(m),_=new Array(m),i&&(I=new Array(m)),N=0,x=Math.min(s,m);N<x&&n[N]===c[N];N++);for(x=s-1,w=m-1;x>=N&&w>=N&&n[x]===c[w];x--,w--)C[w]=l[x],_[w]=o[x],i&&(I[w]=i[x]);for(p=new Map,h=new Array(w+1),d=w;d>=N;d--)S=c[d],u=p.get(S),h[d]=u===void 0?-1:u,p.set(S,d);for(u=N;u<=x;u++)S=n[u],d=p.get(S),d!==void 0&&d!==-1?(C[d]=l[u],_[d]=o[u],i&&(I[d]=i[u]),d=h[d],p.set(S,d)):o[u]();for(d=N;d<m;d++)d in C?(l[d]=C[d],o[d]=_[d],i&&(i[d]=I[d],i[d](d))):l[d]=je(g);l=l.slice(0,s=m),n=c.slice(0)}return l});function g(m){if(o[d]=m,i){const[p,h]=F(d);return i[d]=h,t(c[d],p)}return t(c[d])}}}function a(e,t){return se(()=>e(t))}function ht(){return!0}const dr={get(e,t,r){return t===De?r:e.get(t)},has(e,t){return e.has(t)},set:ht,deleteProperty:ht,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:ht,deleteProperty:ht}},ownKeys(e){return e.keys()}};function At(e){return typeof e=="function"?e():e}function fr(...e){return new Proxy({get(t){for(let r=e.length-1;r>=0;r--){const n=At(e[r])[t];if(n!==void 0)return n}},has(t){for(let r=e.length-1;r>=0;r--)if(t in At(e[r]))return!0;return!1},keys(){const t=[];for(let r=0;r<e.length;r++)t.push(...Object.keys(At(e[r])));return[...new Set(t)]}},dr)}function hr(e,...t){const r=new Set(t.flat()),n=Object.getOwnPropertyDescriptors(e),l=t.map(o=>{const s={};for(let i=0;i<o.length;i++){const c=o[i];Object.defineProperty(s,c,n[c]?n[c]:{get(){return e[c]}})}return s});return l.push(new Proxy({get(o){return r.has(o)?void 0:e[o]},has(o){return r.has(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!r.has(o))}},dr)),l}function gt(e){let t;const r=n=>{if(t){const o=t();if(o)return o(n)}else{const[o]=_e(()=>e().then(s=>s.default));t=o}let l;return $(()=>(l=t())&&se(()=>l(n)))};return r.preload=()=>t||e().then(n=>t=()=>n.default),r}function G(e){const t="fallback"in e&&{fallback:()=>e.fallback};return $(Fn(()=>e.each,e.children,t||void 0))}function Ue(e){let t=!1;const r=$(()=>e.when,void 0,{equals:(n,l)=>t?n===l:!n==!l});return $(()=>{const n=r();if(n){const l=e.children;return(t=typeof l=="function"&&l.length>0)?se(()=>l(n)):l}return e.fallback})}const Dn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Bn=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Dn]),jn=new Set(["innerHTML","textContent","innerText","children"]),Vn={className:"class",htmlFor:"for"},gr={class:"className",formnovalidate:"formNoValidate",ismap:"isMap",nomodule:"noModule",playsinline:"playsInline",readonly:"readOnly"},Un=new Set(["beforeinput","click","dblclick","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Wn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function y(e,t){return $(e,void 0,t?void 0:{equals:t})}function mr(e,t,r){let n=r.length,l=t.length,o=n,s=0,i=0,c=t[l-1].nextSibling,u=null;for(;s<l||i<o;){if(t[s]===r[i]){s++,i++;continue}for(;t[l-1]===r[o-1];)l--,o--;if(l===s){const d=o<n?i?r[i-1].nextSibling:r[o-i]:c;for(;i<o;)e.insertBefore(r[i++],d)}else if(o===i)for(;s<l;)(!u||!u.has(t[s]))&&e.removeChild(t[s]),s++;else if(t[s]===r[o-1]&&r[i]===t[l-1]){const d=t[--l].nextSibling;e.insertBefore(r[i++],t[s++].nextSibling),e.insertBefore(r[--o],d),t[l]=r[o]}else{if(!u){u=new Map;let g=i;for(;g<o;)u.set(r[g],g++)}const d=u.get(t[s]);if(d!=null)if(i<d&&d<o){let g=s,m=1,p;for(;++g<l&&g<o&&!((p=u.get(t[g]))==null||p!==d+m);)m++;if(m>d-i){const h=t[s];for(;i<d;)e.insertBefore(r[i++],h)}else e.replaceChild(r[i++],t[s++])}else s++;else e.removeChild(t[s++])}}}const pr="_$DX_DELEGATE";function zn(e,t,r){let n;return je(l=>{n=l,f(t,e(),t.firstChild?null:void 0,r)}),()=>{n(),t.textContent=""}}function b(e,t,r){const n=document.createElement("template");n.innerHTML=e;let l=n.content.firstChild;return r&&(l=l.firstChild),l}function Y(e,t=window.document){const r=t[pr]||(t[pr]=new Set);for(let n=0,l=e.length;n<l;n++){const o=e[n];r.has(o)||(r.add(o),t.addEventListener(o,Jn))}}function Oe(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function Gn(e,t,r,n){n==null?e.removeAttributeNS(t,r):e.setAttributeNS(t,r,n)}function tt(e,t,r,n){n?Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r:Array.isArray(r)?e.addEventListener(t,l=>r[0](r[1],l)):e.addEventListener(t,r)}function Hn(e,t,r={}){const n=Object.keys(t||{}),l=Object.keys(r);let o,s;for(o=0,s=l.length;o<s;o++){const i=l[o];!i||i==="undefined"||t[i]||(br(e,i,!1),delete r[i])}for(o=0,s=n.length;o<s;o++){const i=n[o],c=!!t[i];!i||i==="undefined"||r[i]===c||!c||(br(e,i,!0),r[i]=c)}return r}function vr(e,t,r={}){const n=e.style;if(t==null||typeof t=="string")return n.cssText=t;typeof r=="string"&&(r={});let l,o;for(o in r)t[o]==null&&n.removeProperty(o),delete r[o];for(o in t)l=t[o],l!==r[o]&&(n.setProperty(o,l),r[o]=l);return r}function $r(e,t,r,n){typeof t=="function"?A(l=>xr(e,t(),l,r,n)):xr(e,t,void 0,r,n)}function f(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return We(e,t,n,r);A(l=>We(e,t(),l,r),n)}function Xn(e,t,r,n,l={}){let o,s,i;for(const c in t){if(c==="children"){n||We(e,t.children);continue}const u=t[c];if(u!==l[c]){if(c==="style")vr(e,u,l[c]);else if(c==="classList")Hn(e,u,l[c]);else if(c==="ref")u(e);else if(c.slice(0,3)==="on:")e.addEventListener(c.slice(3),u);else if(c.slice(0,10)==="oncapture:")e.addEventListener(c.slice(10),u,!0);else if(c.slice(0,2)==="on"){const d=c.slice(2).toLowerCase(),g=Un.has(d);tt(e,d,u,g),g&&Y([d])}else if((i=jn.has(c))||!r&&(gr[c]||(s=Bn.has(c)))||(o=e.nodeName.includes("-")))o&&!s&&!i?e[qn(c)]=u:e[gr[c]||c]=u;else{const d=r&&c.indexOf(":")>-1&&Wn[c.split(":")[0]];d?Gn(e,d,c,u):Oe(e,Vn[c]||c,u)}l[c]=u}}}function qn(e){return e.toLowerCase().replace(/-([a-z])/g,(t,r)=>r.toUpperCase())}function br(e,t,r){const n=t.trim().split(/\s+/);for(let l=0,o=n.length;l<o;l++)e.classList.toggle(n[l],r)}function Jn(e){const t=`$$${e.type}`;let r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r}});r!==null;){const n=r[t];if(n&&!r.disabled){const l=r[`${t}Data`];if(l!==void 0?n(l,e):n(e),e.cancelBubble)return}r=r.host&&r.host!==r&&r.host instanceof Node?r.host:r.parentNode}}function xr(e,t,r={},n,l){return!l&&"children"in t&&A(()=>r.children=We(e,t.children,r.children)),A(()=>Xn(e,t,n,!0,r)),r}function We(e,t,r,n,l){for(;typeof r=="function";)r=r();if(t===r)return r;const o=typeof t,s=n!==void 0;if(e=s&&r[0]&&r[0].parentNode||e,o==="string"||o==="number")if(o==="number"&&(t=t.toString()),s){let i=r[0];i&&i.nodeType===3?i.data=t:i=document.createTextNode(t),r=rt(e,r,n,i)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||o==="boolean")r=rt(e,r,n);else{if(o==="function")return A(()=>{let i=t();for(;typeof i=="function";)i=i();r=We(e,i,r,n)}),()=>r;if(Array.isArray(t)){const i=[];if(kt(i,t,l))return A(()=>r=We(e,i,r,n,!0)),()=>r;if(i.length===0){if(r=rt(e,r,n),s)return r}else Array.isArray(r)?r.length===0?yr(e,i,n):mr(e,r,i):r==null||r===""?yr(e,i):mr(e,s&&r||[e.firstChild],i);r=i}else if(t instanceof Node){if(Array.isArray(r)){if(s)return r=rt(e,r,n,t);rt(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function kt(e,t,r){let n=!1;for(let l=0,o=t.length;l<o;l++){let s=t[l],i;if(s instanceof Node)e.push(s);else if(!(s==null||s===!0||s===!1))if(Array.isArray(s))n=kt(e,s)||n;else if((i=typeof s)==="string")e.push(document.createTextNode(s));else if(i==="function")if(r){for(;typeof s=="function";)s=s();n=kt(e,Array.isArray(s)?s:[s])||n}else e.push(s),n=!0;else e.push(document.createTextNode(s.toString()))}return n}function yr(e,t,r){for(let n=0,l=t.length;n<l;n++)e.insertBefore(t[n],r)}function rt(e,t,r,n){if(r===void 0)return e.textContent="";const l=n||document.createTextNode("");if(t.length){let o=!1;for(let s=t.length-1;s>=0;s--){const i=t[s];if(l!==i){const c=i.parentNode===e;!o&&!s?c?e.replaceChild(l,i):e.insertBefore(l,r):c&&e.removeChild(i)}else o=!0}}else e.insertBefore(l,r);return[l]}const Kn="http://www.w3.org/2000/svg";function Qn(e,t=!1){return t?document.createElementNS(Kn,e):document.createElement(e)}function Yn(e){const{useShadow:t}=e,r=document.createTextNode(""),n=e.mount||document.body;function l(){return()=>e.children}if(n instanceof HTMLHeadElement){const[o,s]=F(!1),i=()=>s(!0);je(c=>f(n,()=>o()?c():l()(),null)),Ve(()=>{i()})}else{const o=Qn(e.isSVG?"g":"div",e.isSVG),s=t&&o.attachShadow?o.attachShadow({mode:"open"}):o;Object.defineProperty(o,"host",{get(){return r.parentNode}}),f(s,l()),n.appendChild(o),e.ref&&e.ref(o),Ve(()=>n.removeChild(o))}return r}function Zn(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function eo([e,t],r,n){return[r?()=>r(e()):e,n?l=>t(n(l)):t]}function to(e,t,r,n){let l=!1;const o=eo(F({value:e()},{equals:(s,i)=>s.value===i.value}),void 0,s=>(!l&&t(s),s));return r&&Ve(r((s=e())=>{l=!0,o[1]({value:s}),l=!1})),{signal:o,utils:n}}function ro(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:F({value:""})};return e}function no(){return to(()=>window.location.pathname+window.location.search+window.location.hash,({value:e,replace:t,scroll:r})=>{t?window.history.replaceState(null,"",e):window.history.pushState(null,"",e),r&&window.scrollTo(0,0)},e=>Zn(window,"popstate",()=>e()))}const oo=/^(?:[a-z0-9]+:)?\/\//i,lo=/^\/+|\/+$|\s+/;function Lt(e){const t=e.replace(lo,"");return t?"/"+t:""}function mt(e,t,r){if(oo.test(t))return;const n=Lt(e),l=r&&Lt(r);let o="";return!l||t.charAt(0)==="/"?o=n:l.toLowerCase().indexOf(n.toLowerCase())!==0?o=n+l:o=l,o+Lt(t)||"/"}function so(e,t){if(e==null)throw new Error(t);return e}function io(e,t){return`${e.replace(/[/*]+$/,"")}/${t.replace(/^\/+/,"")}`}function co(e){const t={};return e.searchParams.forEach((r,n)=>{t[n]=r}),t}function ao(e,t){const[r,n]=e.split("/*",2),l=r.split("/").filter(Boolean),o=l.length;return s=>{const i=s.split("/").filter(Boolean),c=i.length-o;if(c<0||c>0&&n===void 0&&!t)return null;const u={path:o?"":"/",params:{}};for(let d=0;d<o;d++){const g=l[d],m=i[d];if(g[0]===":")u.params[g.slice(1)]=m;else if(g.localeCompare(m,void 0,{sensitivity:"base"})!==0)return null;u.path+=`/${m}`}return n&&(u.params[n]=c?i.slice(-c).join("/"):""),u}}function uo(e){const[t,r]=e.pattern.split("/*",2),n=t.split("/").filter(Boolean);return n.reduce((l,o)=>l+(o.startsWith(":")?2:3),n.length-(r===void 0?0:1))}function Cr(e){const t=new Map,r=_n();return new Proxy({},{get(n,l){return(t.get(l)||Nn(r,()=>{const s=$(()=>e()[l]);return t.set(l,s),s}))()}})}const fo=100,Sr=dt(),pt=dt(),nt=()=>so(Ye(Sr),"Make sure your app is wrapped in a <Router />"),Mt=()=>Ye(pt)||nt().base,wr=e=>{const t=Mt();return $(()=>t.resolvePath(e()))},ho=e=>{const t=nt();return $(()=>{const r=e();return r!==void 0?t.renderPath(r):r})},go=()=>nt().navigatorFactory(),Pr=()=>nt().location;function mo(e,t="",r){const{path:n,component:l,data:o,children:s}=e,i=!s||Array.isArray(s)&&!s.length,c=io(t,n),u=i?c:c.split("/*",1)[0];return{originalPath:n,pattern:u,element:l?()=>a(l,{}):()=>{const{element:d}=e;return d===void 0&&r?a(r,{}):d},preload:e.component?l.preload:e.preload,data:o,matcher:ao(u,!i)}}function po(e,t=0){return{routes:e,score:uo(e[e.length-1])*1e4-t,matcher(r){const n=[];for(let l=e.length-1;l>=0;l--){const o=e[l],s=o.matcher(r);if(!s)return null;n.unshift({...s,route:o})}return n}}}function _r(e,t="",r,n=[],l=[]){const o=Array.isArray(e)?e:[e];for(let s=0,i=o.length;s<i;s++){const c=o[s],u=mo(c,t,r);if(n.push(u),c.children)_r(c.children,u.pattern,r,n,l);else{const d=po([...n],l.length);l.push(d)}n.pop()}return n.length?l:l.sort((s,i)=>i.score-s.score)}function vo(e,t){for(let r=0,n=e.length;r<n;r++){const l=e[r].matcher(t);if(l)return l}return[]}function $o(e){const t=new URL("http://sar"),r=$(c=>{const u=e();try{return new URL(u,t)}catch{return console.error(`Invalid path ${u}`),c}},t,{equals:(c,u)=>c.href===u.href}),n=$(()=>r().pathname),l=$(()=>r().search.slice(1)),o=$(()=>r().hash.slice(1)),s=$(()=>null),i=$(()=>"");return{get pathname(){return n()},get search(){return l()},get hash(){return o()},get state(){return s()},get key(){return i()},query:Cr(nr(l,()=>co(r())))}}function bo(e,t="",r,n){const{signal:[l,o],utils:s}=ro(e),i=mt("",t),c=void 0;if(i===void 0)throw new Error(`${i} is not a valid base path`);i&&!l().value&&o({value:i,replace:!0,scroll:!1});const[u,d]=In(),[g,m]=F(l().value),p=$o(g),h=[],C={pattern:i,params:{},path:()=>i,outlet:()=>null,resolvePath(x){return mt(i,x)}};r&&(C.data=r({params:{},location:p,navigate:I(C)}));function _(x,w,S){se(()=>{if(typeof w=="number"){console.warn("Relative navigation is not implemented - doing nothing :)");return}const{replace:T,resolve:O,scroll:L}={replace:!1,resolve:!0,scroll:!0,...S},J=O?x.resolvePath(w):mt("",w);if(J===void 0)throw new Error(`Path '${w}' is not a routable path`);if(h.length>=fo)throw new Error("Too many redirects");const X=g();if(J!==X){const re=h.push({value:X,replace:T,scroll:L});d(()=>m(J),()=>{h.length===re&&N(J)})}})}function I(x){return x=x||Ye(pt)||C,(w,S)=>_(x,w,S)}function N(x){const w=h[0];w&&(x!==w.value&&o({value:x,replace:w.replace,scroll:w.scroll}),h.length=0)}return A(()=>{const x=l().value;x!==se(g)&&d(()=>m(x))}),{base:C,out:c,location:p,isRouting:u,renderPath:s&&s.renderPath||(x=>x),navigatorFactory:I}}function xo(e,t,r,n){const{base:l,location:o,navigatorFactory:s}=e,{pattern:i,element:c,preload:u,data:d}=n().route,g=$(()=>n().path),m=Cr(()=>n().params);u&&u();const p={parent:t,pattern:i,get child(){return r()},path:g,params:m,outlet:c,resolvePath(h){return mt(l.path(),h,g())}};return d&&(p.data=d({params:m,location:o,navigate:s(p)})),p}const yo=b("<a></a>"),Co=e=>{const{source:t,url:r,base:n,data:l,out:o}=e,s=t||no(),i=bo(s,n,l);return a(Sr.Provider,{value:i,get children(){return e.children}})},So=e=>{const t=nt(),r=Mt(),n=wr(()=>e.base||""),l=$(()=>_r(e.children,n()||"",wo)),o=$(()=>vo(l(),t.location.pathname));t.out&&t.out.matches.push(o().map(({route:u,path:d,params:g})=>({originalPath:u.originalPath,pattern:u.pattern,path:d,params:g})));const s=[];let i;const c=$(nr(o,(u,d,g)=>{let m=d&&u.length===d.length;const p=[];for(let h=0,C=u.length;h<C;h++){const _=d&&d[h],I=u[h];g&&_&&I.route.pattern===_.route.pattern?p[h]=g[h]:(m=!1,s[h]&&s[h](),je(N=>{s[h]=N,p[h]=xo(t,p[h-1]||r,()=>c()[h+1],()=>o()[h])}))}return s.splice(u.length).forEach(h=>h()),g&&m?g:(i=p[0],p)}));return a(Ue,{get when(){return c()&&i},children:u=>a(pt.Provider,{value:u,get children(){return u.outlet()}})})},ze=e=>e,wo=()=>{const e=Mt();return a(Ue,{get when(){return e.child},children:t=>a(pt.Provider,{value:t,get children(){return t.outlet()}})})};function Po(e){const[,t]=hr(e,["children","to","href","onClick"]),r=go(),n=ho(()=>e.to),l=o=>{const{onClick:s,to:i,target:c}=e;typeof s=="function"?s(o):s&&s[0](s[1],o),i!==void 0&&!o.defaultPrevented&&o.button===0&&(!c||c==="_self")&&!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)&&(o.preventDefault(),r(i,{resolve:!1,replace:e.replace||!1,scroll:!e.noScroll}))};return(()=>{const o=yo.cloneNode(!0);return o.$$click=l,$r(o,t,!1,!0),f(o,()=>e.children),A(()=>Oe(o,"href",n()||e.href)),o})()}function Nr(e){e=fr({activeClass:"active"},e);const[,t]=hr(e,["activeClass","end"]),r=Pr(),n=wr(()=>e.href),l=$(()=>{const o=n();if(o===void 0)return!1;const s=o.split(/[?#]/,1)[0].toLowerCase(),i=r.pathname.toLowerCase();return e.end?s===i:i.startsWith(s)});return a(Po,fr(t,{get to(){return n()},get classList(){return{[e.activeClass]:l()}},get["aria-current"](){return l()?"page":void 0}}))}Y(["click"]);var Er={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var n=[],l=0;l<arguments.length;l++){var o=arguments[l];if(!!o){var s=typeof o;if(s==="string"||s==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var i=r.apply(null,o);i&&n.push(i)}}else if(s==="object")if(o.toString===Object.prototype.toString)for(var c in o)t.call(o,c)&&o[c]&&n.push(c);else n.push(o.toString())}}return n.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(Er);var j=Er.exports;const _o=b('<div class="inline-block"></div>'),No=b("<div></div>"),Eo="SW",Io="SE",To=(e,t,r,n,l,o,s)=>{switch(e){case"E":return{x:l,y:s};case"N":return{x:o,y:t};case"NE":return{x:l,y:t};case"NW":return{x:n,y:t};case"W":return{x:n,y:s};case"S":return{x:o,y:r};case"SE":return{x:l,y:r};case"SW":return{x:n,y:r}}},Ro=e=>{switch(e){case"E":return{x:"0px",y:"-50%"};case"N":return{x:"-50%",y:"-100%"};case"NE":return{x:"0px",y:"-100%"};case"NW":return{x:"-100%",y:"-100%"};case"W":return{x:"-100%",y:"-50%"};case"S":return{x:"-50%",y:"0px"};case"SE":return{x:"0px",y:"0px"};case"SW":return{x:"-100%",y:"0px"}}};var Ir=e=>{let t;const[r,n]=F({left:"0px",top:"0px"}),l=()=>{const o=t.getBoundingClientRect(),s=To(e.origin??Eo,o.top,o.top+o.height,o.left,o.left+o.width,o.left+o.width/2,o.top+o.height/2),i=Ro(e.direction??Io);n({left:`${s.x}px`,top:`${s.y+document.documentElement.scrollTop}px`,transform:`translate3d(${i.x}, ${i.y}, 0)`})};return Pe(()=>{e.isMenuOpen()?(window.addEventListener("scroll",l),window.addEventListener("resize",l),l()):(window.removeEventListener("scroll",l),window.removeEventListener("resize",l))}),Ve(()=>{window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}),(()=>{const o=_o.cloneNode(!0),s=t;return typeof s=="function"?s(o):t=o,f(o,()=>e.children,null),f(o,(()=>{const i=y(()=>!!e.isMenuOpen(),!0);return()=>i()&&a(Yn,{get children(){const c=No.cloneNode(!0);return f(c,()=>e.renderMenu()),A(u=>{const d=j("absolute",{[e?.class??""]:!!e.class}),g=r();return d!==u._v$&&(c.className=u._v$=d),u._v$2=vr(c,g,u._v$2),u},{_v$:void 0,_v$2:void 0}),c}})})(),null),o})()},Oo=(e,t)=>{const[r,n]=F(!1),l=()=>{if(r()){n(!1);return}e()};return Pe(()=>{t()?(document.addEventListener("click",l),window.addEventListener("blur",l)):(document.removeEventListener("click",l),window.removeEventListener("blur",l))}),{onClickCapture:()=>n(!0)}};const Ao=b('<div role="menu" aria-orientation="vertical" aria-labelledby="menu-button" tabindex="-1"><div class="py-1" role="none"></div></div>'),ko=b('<button role="menuitem"></button>'),Lo=b('<div class="bg-bgColor-primary text-textColor block px-4 py-2 text-sm w-full text-left"></div>'),Mo=b('<div><button type="button" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover inline-flex justify-center w-full rounded-md border h-8 px-2 py-1 text-sm font-small focus:outline-none" id="menu-button" aria-expanded="true" aria-haspopup="true"><svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div>');var Ne=e=>{const[t,r]=F(!1),n=Oo(()=>r(!1),t);return a(Ir,{isMenuOpen:t,renderMenu:()=>t()?(()=>{const o=Ao.cloneNode(!0),s=o.firstChild;return $r(o,n,!1,!0),f(s,a(G,{get each(){return e.values},children:i=>i.selectable!==!1?(()=>{const c=ko.cloneNode(!0);return c.$$click=()=>{r(!1),e.onChange(i.value)},f(c,()=>i.text),A(()=>c.className=j("bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor block px-4 py-2 text-sm w-full text-left",{["bg-bgColor-primary-hover"]:i.value==e.value})),c})():(()=>{const c=Lo.cloneNode(!0);return f(c,()=>i.text),c})()})),A(()=>o.className=j("bg-bgColor-primary text-textColor border-borderColor-primary w-56 rounded-md shadow-lg border transform focus:outline-none z-50",{["transition ease-out duration-100 opacity-100 scale-100"]:t(),["transition ease-in duration-75 opacity-0 scale-95"]:!t()})),o})():void 0,get origin(){return e.origin},get direction(){return e.direction},get children(){const o=Mo.cloneNode(!0),s=o.firstChild,i=s.firstChild;return s.$$click=c=>{r(u=>!u),c.stopPropagation()},f(s,()=>e.values.find(c=>c.value==e.value)?.text,i),A(()=>o.className=j("inline-block text-left",e.class)),o}})};Y(["click"]);const Fo=b('<nav class="bg-bgColor-secondary"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16"><div class="flex items-center"><div class="flex-shrink-0"><img class="h-8 w-8" src="eco-icon.ico" alt="Workflow"></div><div class="hidden md:block"><div class="ml-10 flex items-baseline space-x-4"></div></div></div><div></div><div class="-mr-2 flex md:hidden"><button type="button" class="text-textColor-secondary hover:bg-bgColor-secondary-hover focus:bg-bgColor-secondary-hover inline-flex items-center justify-center p-2 rounded-md focus:outline-none" aria-controls="mobile-menu" aria-expanded="false"><span class="sr-only">Open main menu</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div></div><div id="mobile-menu"><div class="px-2 pt-2 pb-3 space-y-1 sm:px-3"></div></div></nav>'),Ft="os",Tr="dark",Rr="light",Do=()=>window.matchMedia("(prefers-color-scheme: dark)").matches,Or=e=>{localStorage.theme=e;let t=e!==Ft?e:Do()?Tr:Rr;document.documentElement.className=t};var Bo=e=>{const[t,r]=F(!1),[n,l]=F("theme"in localStorage?localStorage.theme:Ft),o=s=>{l(s),Or(s)};return Or(n()),(()=>{const s=Fo.cloneNode(!0),i=s.firstChild,c=i.firstChild,u=c.firstChild,d=u.firstChild,g=d.nextSibling,m=g.firstChild,p=u.nextSibling,h=p.nextSibling,C=h.firstChild,_=C.firstChild,I=_.nextSibling,N=I.nextSibling,x=i.nextSibling,w=x.firstChild;return f(m,()=>e.routes.map(S=>a(Nr,{get href(){return S.href},end:!0,get class(){return j("bg-bgColor-secondary text-textColor px-3 py-2 rounded-md text-sm font-medium ",{"bg-bgColor-secondary-hover text-textColor-secondary":S.highlight,"hover:bg-bgColor-secondary-hover hover: text-textColor-secondary":!S.highlight})},get["aria-current"](){return S.highlight?"page":void 0},get children(){return S.text}}))),f(p,a(Ne,{get value(){return n()},values:[{value:Ft,text:"System theme"},{value:Rr,text:"Light theme"},{value:Tr,text:"Dark theme"}],onChange:S=>o(`${S}`),origin:"SE",direction:"SW"})),C.$$click=()=>r(S=>!S),f(w,()=>e.routes.map(S=>a(Nr,{get href(){return S.href},end:!0,get class(){return j("block px-3 py-2 rounded-md text-base font-medium",{"bg-bgColor-secondary-hover text-textColor-secondary":S.highlight,"hover:bg-bgColor-secondary-hover hover: text-textColor-secondary":!S.highlight})},get["aria-current"](){return S.highlight?"page":void 0},get children(){return S.text}}))),A(S=>{const T=j("h-6 w-6",{block:!t(),hidden:t()}),O=j("h-6 w-6",{block:t(),hidden:!t()}),L=j("md:hidden",{block:t(),hidden:!t()});return T!==S._v$&&Oe(I,"class",S._v$=T),O!==S._v$2&&Oe(N,"class",S._v$2=O),L!==S._v$3&&(x.className=S._v$3=L),S},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()};Y(["click"]);const Dt=Symbol("store-raw"),vt=Symbol("store-node"),jo=Symbol("store-name");function Ar(e,t){let r=e[De];if(!r){Object.defineProperty(e,De,{value:r=new Proxy(e,Wo)});const n=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];if(l[i].get){const c=l[i].get.bind(r);Object.defineProperty(e,i,{get:c})}}}return r}function Ge(e){return e!=null&&typeof e=="object"&&(!e.__proto__||e.__proto__===Object.prototype||Array.isArray(e))}function ot(e,t=new Set){let r,n,l,o;if(r=e!=null&&e[Dt])return r;if(!Ge(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let s=0,i=e.length;s<i;s++)l=e[s],(n=ot(l,t))!==l&&(e[s]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const s=Object.keys(e),i=Object.getOwnPropertyDescriptors(e);for(let c=0,u=s.length;c<u;c++)o=s[c],!i[o].get&&(l=e[o],(n=ot(l,t))!==l&&(e[o]=n))}return e}function $t(e){let t=e[vt];return t||Object.defineProperty(e,vt,{value:t={}}),t}function Vo(e,t){const r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||t===De||t===vt||t===jo||(delete r.value,delete r.writable,r.get=()=>e[De][t]),r}function Uo(e){if(or()){const t=$t(e);(t._||(t._=Bt()))()}return Reflect.ownKeys(e)}function Bt(){const[e,t]=F(void 0,{equals:!1,internal:!0});return e.$=t,e}const Wo={get(e,t,r){if(t===Dt)return e;if(t===De)return r;const n=e[t];if(t===vt||t==="__proto__")return n;const l=Ge(n);if(or()&&(typeof n!="function"||e.hasOwnProperty(t))){let o,s;l&&(o=$t(n))&&(s=o._||(o._=Bt()),s()),o=$t(e),s=o[t]||(o[t]=Bt()),s()}return l?Ar(n):n},set(){return!0},deleteProperty(){return!0},ownKeys:Uo,getOwnPropertyDescriptor:Vo};function bt(e,t,r){if(e[t]===r)return;const n=Array.isArray(e),l=e.length,o=r===void 0,s=n||o===t in e;o?delete e[t]:e[t]=r;let i=$t(e),c;(c=i[t])&&c.$(),n&&e.length!==l&&(c=i.length)&&c.$(),s&&(c=i._)&&c.$()}function zo(e,t){const r=Object.keys(t);for(let n=0;n<r.length;n+=1){const l=r[n];bt(e,l,t[l])}}function lt(e,t,r=[]){let n,l=e;if(t.length>1){n=t.shift();const s=typeof n,i=Array.isArray(e);if(Array.isArray(n)){for(let c=0;c<n.length;c++)lt(e,[n[c]].concat(t),[n[c]].concat(r));return}else if(i&&s==="function"){for(let c=0;c<e.length;c++)n(e[c],c)&&lt(e,[c].concat(t),[c].concat(r));return}else if(i&&s==="object"){const{from:c=0,to:u=e.length-1,by:d=1}=n;for(let g=c;g<=u;g+=d)lt(e,[g].concat(t),[g].concat(r));return}else if(t.length>1){lt(e[n],t,[n].concat(r));return}l=e[n],r=[n].concat(r)}let o=t[0];typeof o=="function"&&(o=o(l,r),o===l)||n===void 0&&o==null||(o=ot(o),n===void 0||Ge(l)&&Ge(o)&&!Array.isArray(o)?zo(l,o):bt(e,n,o))}function Go(e,t){const r=ot(e||{}),n=Ar(r);function l(...o){Qe(()=>lt(r,o))}return[n,l]}const kr={get(e,t){if(t===Dt)return e;const r=e[t];return Ge(r)?new Proxy(r,kr):r},set(e,t,r){return bt(e,t,ot(r)),!0},deleteProperty(e,t){return bt(e,t,void 0),!0}};function Lr(e){return t=>{const r=t;return Ge(r)&&e(new Proxy(r,kr)),r}}function ae(e,t){const[r,n]=Go(e);return localStorage[t]&&n(JSON.parse(localStorage[t])),Pe(()=>localStorage[t]=JSON.stringify(r)),[r,n]}const Ho=/(<([^>]+)>)/gi,Xo=e=>e.replace(Ho,""),ge=(e,t)=>e.length===0||t?.toLowerCase()?.indexOf(e?.toLowerCase())>=0,Mr=(e,t)=>e.length===0||t?.toLowerCase()===e?.toLowerCase(),Ae=(e,t)=>e.length===0||e[0].length===0||e.some(r=>t.includes(r)),jt=(e,t,r)=>r.indexOf(e)===t,Fr=(e,t,r)=>r?.slice((e-1)*t,e*t),Dr=(e,t)=>Math.ceil((t?.length??0)/e),D=e=>+e.toFixed(2),ke=(e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()),qo=e=>(t,r)=>e(t).toLowerCase().localeCompare(e(r).toLowerCase()),Jo=e=>(t,r)=>{const n=t.indexOf(e)>=0,l=r.indexOf(e)>=0;return n&&l||!n&&!l?t.toLowerCase().localeCompare(r.toLowerCase()):n?1:-1},Ko=e=>{const t=e.reduce((r,n)=>({sum:r.sum+n.price*n.quantity,count:r.count+n.quantity}),{sum:0,count:0});return t.count>0?D(t.sum/t.count):null},Qo=(e,t)=>Math.ceil(e*t),Br=(e,t)=>t?D(e*t):0,Yo=e=>1/(1-e/100),Zo=e=>{const t=Math.floor(100/e.Products.length);return e.Products.map((r,n)=>({prod:r.Name,perc:n!==e.Products.length-1?t:100-(e.Products.length-1)*t}))},jr=(e,t,r)=>{let n=r;return e.map((l,o)=>{let s=l.prod===t?r:l.perc;return l.prod!==t&&(n+s>100&&(s=100-n),n+=s),o===e.length-1&&(s+=100-n),{...l,perc:s}})},He=e=>`T_${e}`,ue=e=>`I_${e}`,de=e=>e.IsSpecificItem?ue(e.Name):He(e.Tag),Vt=e=>e.IsSpecificItem?e.Name:`Tag ${e.Tag}`,el=e=>e.startsWith(ue(""))?{IsSpecificItem:!0,Name:e.substring(ue("").length),Tag:""}:e.startsWith(He(""))?{IsSpecificItem:!1,Name:"",Tag:e.substring(He("").length)}:{IsSpecificItem:!0,Name:"old_"+e,Tag:""},tl=e=>new Date(e.Year,e.Month-1,e.Day,e.Hour,e.Min,e.Sec),Vr=(e,t,r)=>{const n=e?.filter(o=>r.includes(o.ItemName)&&o.CurrencyName===t)??[],l=n.filter(o=>!o.Buying&&o.Quantity>0);return{Offers:n,AvgPrice:Ko(l?.map(o=>({price:o.Price,quantity:o.Quantity}))??[])}},Ur={readServer:".netlify/functions/servers",readDB:(e,t)=>`.netlify/functions/files?server=${e}&file=${t}`};async function Le(e){try{return await(await fetch(e)).json()}catch{}}async function rl(e){var t=localStorage.getItem("authtoken")??"",r=localStorage.getItem("authtokentype")??"";try{return await(await fetch(e,{headers:{"X-Auth-Token":t,"X-Auth-Token-Type":r}})).json()}catch{}}async function nl(e,t){var r=localStorage.getItem("authtoken")??"",n=localStorage.getItem("authtokentype")??"";try{return await(await fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json","X-Auth-Token":r,"X-Auth-Token-Type":n}})).json()}catch{}}const ol=(e,t)=>Le(Ur.readDB(e,t)),ll=()=>Le(Ur.readServer),sl=e=>Le("/data/Stores.json").then(t=>t?{...t,Stores:t?.Stores?.map(r=>({...r,Name:Xo(r.Name)}))}:void 0),il=e=>Le("/data/Recipes.json"),cl=e=>Le("/data/Tags.json"),al=e=>Le("/data/AllItems.json"),ul=e=>Le("/data/CraftingTables.json"),dl=()=>rl("/api/v1/plugins/EcoLiveDataExporter/username"),fl=e=>nl("/api/v1/plugins/EcoLiveDataExporter/updateShopPricing",e),Wr=dt({serversResource:void 0,storesResource:void 0,recipesResource:void 0,tagsResource:void 0,craftingTablesResource:void 0,currentServer:()=>"",isLoadingResources:()=>!0,dbs:()=>[],currentCurrency:()=>"",allCurrencies:()=>[],allProfessions:()=>[],allCraftingTables:()=>[],allProductsInStores:()=>[],allCraftableProducts:()=>({}),allCraftableProductsWithOffers:()=>[],allItemsAndTagsWithPrice:()=>({}),allTablesPerUser:()=>({}),mainState:{server:"",currency:"",userName:"",calorieCost:0,costPer1kJoule:0},forceRefetch:{servers:()=>{},stores:()=>{},recipes:()=>{},tags:()=>{},allItems:()=>{},craftingTables:()=>{}},get:{personalPrice:e=>0,craftAmmount:e=>1,craftModule:e=>0,craftLavish:e=>!0,calorieCostPerRecipe:e=>0,recipeMargin:e=>0,costPercentage:e=>[],craftLevel:e=>0,itemsInTag:e=>[]},getState:{personalPrice:{}},update:{server:()=>{},currency:()=>{},userName:()=>{},personalPrice:(e,t,r)=>{},craftAmmount:(e,t)=>{},craftModule:(e,t)=>{},craftLavish:(e,t)=>{},craftLevel:(e,t)=>{},recipeMargin:(e,t)=>{},costPercentage:()=>{},calorieCost:e=>{},costPer1kJoule:e=>{}},clear:{personalPriceCurrency:(e,t)=>{},personalPriceProduct:e=>{},personalCurrency:e=>{}}}),hl=e=>{const[t,r]=ae({},"PersonalPricesStore"),[n,l]=ae({},"craftAmmountStore"),[o,s]=ae({},"craftModuleStore"),[i,c]=ae({},"craftLavishStore"),[u,d]=ae({},"craftLevelStore"),[g,m]=ae({},"recipeMarginStore"),[p,h]=ae({},"CostPercentagesStore"),[C,_]=ae({server:"local",currency:"",userName:"",calorieCost:0,costPer1kJoule:0},"MainStore"),[I,{refetch:N}]=_e(ll),x=$(()=>(I?.()??[])?.map(v=>v.key).includes(C.server)?C.server:I?.()?.length??0>0?I()?.[0].key??"":C.server),[w,{refetch:S}]=_e(x,sl),[T,{refetch:O}]=_e(x,il),[L,{refetch:J}]=_e(x,cl),[X,{refetch:re}]=_e(x,al);dl().then(v=>{console.log(v?.username)});const[ne,{refetch:oe}]=_e(x,ul),pe=$(()=>Object.entries(X()?.AllItems??{}).reduce((v,P)=>(P[1]?.Tags?.forEach(M=>{v[M]=[...v?.[M]??[],P[0]]}),v),{})),Ce=$(()=>!w()||!T()||!L()||!ne()),le=$(()=>w()?.Stores?.map(v=>v.CurrencyName).filter(jt).sort(Jo("Credit"))),ie=$(()=>{if(le()?.includes(C.currency))return C.currency;if(C.userName.length>0){const v=le()?.find(P=>P.indexOf(C.userName)===1);if(v)return v}return le()?.[0]??""}),Se=$(()=>w()?.Stores?.map(v=>v.AllOffers.map(P=>({...P,StoreName:v.Name,StoreOwner:v.Owner,CurrencyName:v.CurrencyName}))).flat().sort((v,P)=>{const M=v.ItemName?.toLowerCase().localeCompare(P.ItemName?.toLowerCase());return M!==0?M:v.Buying?1:-1})),ve=$(()=>T()?.Recipes?.map(v=>v.Variants.map(P=>P.Products.map(M=>({Name:M.Name,Recipe:v,Variant:P})))?.flat())?.flat()?.reduce((v,P)=>({...v,[P.Name]:{Name:P.Name,RecipeVariants:[...v[P.Name]?.RecipeVariants??[],{Recipe:P.Recipe,Variant:P.Variant}]}}),{})??{}),it=$(()=>Object.values(ve()).map(v=>({...v,Offers:Se()?.filter(P=>P.ItemName===v.Name)})).map(v=>{for(let P=0;P<v.RecipeVariants.length;++P){const M=v.RecipeVariants[P];v.RecipeVariants.findIndex((Fe,bn)=>Fe.Variant.Key==M.Variant.Key&&P!=bn)>=0&&(M.Variant.Key+=""+P)}return v}).sort((v,P)=>v.Name?.toLowerCase()?.localeCompare(P.Name?.toLowerCase()??"")??0)),ct=$(()=>T()?.Recipes?.map(v=>v.SkillNeeds.map(P=>P.Skill)).flat().filter(jt).sort(ke)),Zt=$(()=>T()?.Recipes?.map(v=>v.CraftingTable).filter(jt).sort(ke)),R=$(()=>Object.keys(X()?.AllItems??{}).reduce((v,P)=>(v[P]===void 0&&(v[P]={Name:P,RecipeVariants:ve()[P]?.RecipeVariants??[]}),v),{})),B=$(()=>Object.entries(R()).reduce((v,[P,M])=>(v[ue(P)]={Name:M.Name,IsSpecificItem:!0,...Vr(Se(),ie(),[M.Name])},v),{})),we=$(()=>Object.entries(pe()).reduce((v,[P,M])=>(v[He(P)]={Name:P,IsSpecificItem:!1,...Vr(Se(),ie(),M)},v),{})),Re=$(()=>({...B(),...we()})),ce=$(()=>ne()?.CraftingTables?.reduce((v,P)=>(v[P.OwnerName]=[...v[P.OwnerName]??[],P],v),{})),Q={serversResource:I,storesResource:w,recipesResource:T,tagsResource:L,craftingTablesResource:ne,currentServer:x,isLoadingResources:Ce,currentCurrency:ie,allCurrencies:le,allProfessions:ct,allCraftingTables:Zt,allProductsInStores:Se,allCraftableProducts:ve,allCraftableProductsWithOffers:it,allItemsAndTagsWithPrice:Re,allTablesPerUser:ce,mainState:C,forceRefetch:{servers:N,stores:S,recipes:O,tags:J,allItems:re,craftingTables:oe},get:{personalPrice:v=>t[v??""]?.[ie()],craftAmmount:v=>n[v??""]??1,craftModule:v=>o[v??""]??0,craftLavish:v=>i[v??""],craftLevel:v=>u[v??""]??0,recipeMargin:v=>g[v??""]??0,costPercentage:v=>p[v??""],itemsInTag:v=>pe()?.[v]?.map(P=>({Name:P,...X()?.AllItems[P]}))??[]},getState:{personalPrice:t},update:{server:v=>_({server:v}),currency:v=>_({currency:v}),userName:v=>{if(ie().length==0||le()?.filter(P=>P===ie()).length===0){const P=le()?.find(M=>M.indexOf(v)===1);P&&_({currency:P})}_({userName:v})},personalPrice:(v,P,M)=>r(Fe=>({[v]:{...Fe[v]??{},[P]:M}})),craftAmmount:(v,P)=>l({[v]:P}),craftModule:(v,P)=>s({[v]:P}),craftLavish:(v,P)=>c({[v]:P}),craftLevel:(v,P)=>d({[v]:P}),recipeMargin:(v,P)=>m({[v]:P}),costPercentage:(v,P)=>h(M=>({...M,[v]:P})),calorieCost:v=>_({calorieCost:v}),costPer1kJoule:v=>_({costPer1kJoule:v})},clear:{personalPriceCurrency:(v,P)=>r(Lr(M=>{delete M[v][P],Object.keys(M[v]).length===0&&delete M[v]})),personalPriceProduct:v=>r(v,()=>{}),personalCurrency:v=>r(Lr(P=>{Object.entries(P).forEach(([M,Fe])=>{delete Fe[v],Object.keys(Fe).length===0&&delete P[M]})}))}};return a(Wr.Provider,{value:Q,get children(){return e.children}})},U=()=>Ye(Wr),gl=b('<div class="flex flex-col flex-grow"><div class="-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8"><div class="py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8"><div class="text-textColor border-borderColor-primary shadow overflow-hidden border sm:rounded-lg"><table class="min-w-full divide-y divide-borderColor-primary"></table></div></div></div></div>');var Z=e=>(()=>{const t=gl.cloneNode(!0),r=t.firstChild,n=r.firstChild,l=n.firstChild,o=l.firstChild;return f(o,()=>e.children),t})();const ml=b('<tbody class="divide-y divide-borderColor-primary"></tbody>');var ee=e=>(()=>{const t=ml.cloneNode(!0);return f(t,()=>e.children),t})();const pl=b('<thead class="bg-bgColor-primary-hover"><tr></tr></thead>');var te=e=>(()=>{const t=pl.cloneNode(!0),r=t.firstChild;return f(r,()=>e.children),t})();const vl="_sortableLink_h1sbs_1",$l="_sortIcon_h1sbs_15",bl="_sorted_h1sbs_23";var Ut={sortableLink:vl,sortIcon:$l,sorted:bl};const xl=b('<th scope="col" class="text-textColor px-6 py-3 text-left text-xs font-medium uppercase tracking-wider whitespace-nowrap"></th>'),yl=b("<a><div></div></a>"),Cl=b('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3.202l3.839 4.798h-7.678l3.839-4.798zm0-3.202l-8 10h16l-8-10zm3.839 16l-3.839 4.798-3.839-4.798h7.678zm4.161-2h-16l8 10 8-10z"></path></svg>'),Sl=b('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3.202l3.839 4.798h-7.678l3.839-4.798zm0-3.202l-8 10h16l-8-10zm8 14h-16l8 10 8-10z"></path></svg>'),wl=b('<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0l-8 10h16l-8-10zm3.839 16l-3.839 4.798-3.839-4.798h7.678zm4.161-2h-16l8 10 8-10z"></path></svg>');var E=e=>(()=>{const t=xl.cloneNode(!0);return f(t,()=>!e.onSort&&e.children,null),f(t,(()=>{const r=y(()=>!!e.onSort,!0);return()=>r()&&(()=>{const n=yl.cloneNode(!0),l=n.firstChild;return tt(n,"click",e.onSort,!0),f(n,()=>e.children,l),f(l,(()=>{const o=y(()=>e.directionDesc===void 0,!0);return()=>o()&&Cl.cloneNode(!0)})(),null),f(l,(()=>{const o=y(()=>e.directionDesc===!0,!0);return()=>o()&&Sl.cloneNode(!0)})(),null),f(l,(()=>{const o=y(()=>e.directionDesc===!1,!0);return()=>o()&&wl.cloneNode(!0)})(),null),A(o=>{const s=j(Ut.sortableLink,{[Ut.sorted]:e.directionDesc!==void 0}),i=Ut.sortIcon;return s!==o._v$&&(n.className=o._v$=s),i!==o._v$2&&(l.className=o._v$2=i),o},{_v$:void 0,_v$2:void 0}),n})()})(),null),t})();Y(["click"]);const Pl=b('<th scope="col" class="relative px-6 py-3"><span class="sr-only"></span></th>');var _l=e=>(()=>{const t=Pl.cloneNode(!0),r=t.firstChild;return f(r,()=>e.children),t})();const Nl=b('<div class="fixed z-10 inset-0 overflow-y-auto modal-open" aria-labelledby="modal-title" role="dialog" aria-modal="true"><div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"><div class="bg-bgColor-primary-overlay fixed inset-0 transition-opacity" aria-hidden="true"></div><span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span><div><div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4 relative"><div class="absolute top-2 right-2 flex items-center justify-center h-8 w-8 rounded-full bg-gray-100"><button><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div></div></div></div></div>');var Wt=e=>(()=>{const t=Nl.cloneNode(!0),r=t.firstChild,n=r.firstChild,l=n.nextSibling,o=l.nextSibling,s=o.firstChild,i=s.firstChild,c=i.firstChild;return tt(c,"click",e.onClose,!0),f(s,()=>e.children,null),A(()=>o.className=j("bg-bgColor-primary text-textColor border-borderColor-primary border inline-block align-bottom rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full md:max-w-2xl lg:max-w-4xl xl:max-w-5xl",{[e.class??""]:(e.class??"").length>0})),t})();Y(["click"]);const El=b('<h3 class="text-lg leading-6 font-medium text-gray-900 md-2" id="modal-title"></h3>');var zt=e=>(()=>{const t=El.cloneNode(!0);return f(t,()=>e.children),t})();const Il=b('<div class="inline-flex shadow-sm rounded-md" role="group"></div>'),Tl=b('<button type="button"></button>');var Ee=e=>(()=>{const t=Il.cloneNode(!0);return f(t,a(G,{get each(){return e.options},children:(r,n)=>(()=>{const l=Tl.cloneNode(!0);return l.$$click=()=>r.value!==e.selected?e.onChange(r.value):void 0,f(l,()=>r.text),A(()=>l.className=j("bg-bgColor-primary text-textColor border-borderColor-primary text-sm font-medium px-4 py-1 h-8",{["bg-bgColor-primary-hover"]:r.value==e.selected,["hover:bg-bgColor-primary-hover hover:border-borderColor-hover"]:r.value!=e.selected,["rounded-l-lg border"]:n()===0,["rounded-r-md border"]:n()===e.options.length-1,["border-t border-b"]:n()>0&&n()<e.options.length-1,["border-l"]:n()>1&&n()<e.options.length-1})),l})()})),t})();Y(["click"]);const Rl=b('<div class="flex justify-center mt-2"></div>');var st=e=>(()=>{const t=Rl.cloneNode(!0);return f(t,a(Ee,{get options(){return Array.from(new Array(Math.min(e.totalPages,20))).map((r,n)=>({value:n+1,text:`${n+1}`}))},onChange:r=>e.onChange(Number(r)),get selected(){return`${e.currentPage}`}})),t})();const Ol="_hasTooltip_1eorl_1",Al="_tooltip_1eorl_11",kl="_tooltipArrow_1eorl_33";var Ll={hasTooltip:Ol,tooltip:Al,tooltipArrow:kl};const Ml=b('<div class="inline-block relative"><div></div></div>'),Fl=b('<div class="bg-bgColor-secondary text-textColor-secondary mb-1 inline-block font-medium shadow-sm py-2 px-3 text-sm rounded-lg"></div>'),Dl=b("<div></div>");var k=e=>{let t;const[r,n]=F(!1),l=()=>n(!0),o=()=>n(!1);return Pn(()=>{t?.addEventListener("mouseenter",l,!1),t?.addEventListener("mouseleave",o,!1)}),Ve(()=>{t?.removeEventListener("mouseenter",l),t?.removeEventListener("mouseleave",o)}),a(Ir,{isMenuOpen:r,renderMenu:()=>(()=>{const s=Fl.cloneNode(!0);return f(s,()=>e.text),s})(),get origin(){return e.origin??"N"},get direction(){return e.direction??"N"},class:"z-50",get children(){const s=Ml.cloneNode(!0),i=s.firstChild,c=t;return typeof c=="function"?c(s):t=s,f(i,()=>e.children),f(s,(()=>{const u=y(()=>!!r(),!0);return()=>u()&&(()=>{const d=Dl.cloneNode(!0);return A(()=>d.className=Ll.tooltipArrow),d})()})(),null),A(()=>i.className=j({["bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-sm border rounded inline-block border-dashed"]:!e.noStyle})),s}})};const zr=(e,t)=>{let r;const n=()=>clearTimeout(r);return[(...o)=>{r!==void 0&&n(),r=window.setTimeout(()=>e(...o),t)},n]};var Gr=function(){function e(t,r,n,l,o){return t<r||n<r?t>n?n+1:t+1:l===o?r:r+1}return function(t,r){if(t===r)return 0;if(t.length>r.length){var n=t;t=r,r=n}for(var l=t.length,o=r.length;l>0&&t.charCodeAt(l-1)===r.charCodeAt(o-1);)l--,o--;for(var s=0;s<l&&t.charCodeAt(s)===r.charCodeAt(s);)s++;if(l-=s,o-=s,l===0||o<3)return o;var i=0,c,u,d,g,m,p,h,C,_,I,N,x,w=[];for(c=0;c<l;c++)w.push(c+1),w.push(t.charCodeAt(s+c));for(var S=w.length-1;i<o-3;)for(_=r.charCodeAt(s+(u=i)),I=r.charCodeAt(s+(d=i+1)),N=r.charCodeAt(s+(g=i+2)),x=r.charCodeAt(s+(m=i+3)),p=i+=4,c=0;c<S;c+=2)h=w[c],C=w[c+1],u=e(h,u,d,_,C),d=e(u,d,g,I,C),g=e(d,g,m,N,C),p=e(g,m,p,x,C),w[c]=p,m=g,g=d,d=u,u=h;for(;i<o;)for(_=r.charCodeAt(s+(u=i)),p=++i,c=0;c<S;c+=2)h=w[c],w[c]=p=e(h,u,p,_,w[c+1]),u=h;return p}}();const Gt=100,Hr="Survivalist";var Bl=()=>{const{allCraftableProductsWithOffers:e,allProductsInStores:t,mainState:r}=U(),[n,l]=ae({search:"",filterProfession:"",filterCraftingTable:"",currentPage:1,showPricesForProductsModal:void 0,showPricesForFuelModal:!1,filterByOwner:!1},"PriceCalculatorListProductsStore"),o=$(()=>!n.filterByOwner||r.userName.length===0?[]:t()?.filter(d=>d.StoreOwner===r.userName&&!d.Buying).map(d=>d.ItemName)??[]),s=$(()=>e()?.filter(d=>ge(n.search,d.Name??"")&&Ae([n.filterProfession],d.RecipeVariants.map(g=>g.Recipe.SkillNeeds.map(m=>m.Skill)).flat())&&Ae([n.filterCraftingTable],d.RecipeVariants.map(g=>g.Recipe.CraftingTable).flat())&&(!n.filterByOwner||r.userName.length===0||Ae(o(),[d.Name]))).sort((d,g)=>Gr(d.Name,n.search)-Gr(g.Name,n.search))),i=$(()=>s()?.slice((n.currentPage-1)*Gt,n.currentPage*Gt)),c=$(()=>Math.ceil((s()?.length??0)/Gt)),[u]=zr(d=>l({search:d,currentPage:1}),200);return{state:n,paginatedProducts:i,totalPages:c,update:{setSearch:u,setFilterProfession:d=>l({filterProfession:d===Hr?"":d,currentPage:1}),setFilterCraftingTable:d=>l({filterCraftingTable:d,currentPage:1}),setCurrentPage:d=>l({currentPage:d}),showPricesForProductsModal:(d,g)=>l({showPricesForProductsModal:{name:d,isSpecificProduct:g}}),hidePricesForProductsModal:()=>l({showPricesForProductsModal:void 0}),showPricesForFuelModal:()=>l({showPricesForFuelModal:!0}),hidePricesForFuelModal:()=>l({showPricesForFuelModal:!1}),setFilterByOwner:d=>l({filterByOwner:d}),clearFilters:()=>l({search:"",currentPage:1,filterProfession:"",filterCraftingTable:"",filterByOwner:!1})}}};const Xr=(e,t)=>t?e.find(r=>r.Variant.Key===t):void 0,qr=(e,t)=>e.length===1?e?.[0]:Xr(e,t),Ht=(e,t,r,n,l,o)=>{const s=e.find(d=>d.Name===n),i=ue(n);if(s==null)return{ingredientId:i,productName:n,recipeVariants:[],isTag:!1,quantity:o};const c=qr(s.RecipeVariants,t[i]),u=l.includes(n)?[]:c?.Variant.Ingredients.map(d=>Jr(e,t,r,d,[...l,n]));return{ingredientId:i,isTag:!1,productName:n,recipeVariants:s.RecipeVariants,selectedVariant:c,ancestors:u,quantity:o}},jl=(e,t,r,n,l,o)=>{const s=He(n),i=r[n]??[],c=e.filter(m=>i.includes(m.Name));if(c==null||c.length==0)return{ingredientId:s,productName:`Tag: ${n}`,recipeVariants:[],isTag:!0,quantity:o};const u=c.map(m=>m.RecipeVariants).flat(),d=Xr(u,t[s]),g=l.includes(s)||d==null?[]:d.Variant.Ingredients.map(m=>Jr(e,t,r,m,[...l,s]));return{ingredientId:s,isTag:!0,productName:`Tag: ${n}`,recipeVariants:u,selectedVariant:d,ancestors:g,quantity:o}},Jr=(e,t,r,n,l)=>n.IsSpecificItem?Ht(e,t,r,n.Name,l,n.Ammount):jl(e,t,r,n.Tag,l,n.Ammount),xt=(e,t,r)=>({ingredientId:e.ingredientId,isTag:e.isTag,productName:e.productName,recipeVariants:e.recipeVariants,selectedVariant:e.selectedVariant,level:t,path:r,quantity:e.quantity}),Kr=(e,t=0,r=[])=>{const n=[...r,e.ingredientId];return[xt(e,t,n),...(e.ancestors?.map(l=>Kr(l,t+1,n))??[]).flat()]},Qr=(e,t,r=[])=>{const n=[...r,e.ingredientId];if(t.length<=1||e.ingredientId!==t[0])return[xt(e,0,n)];const l=e.ancestors?.find(o=>o.ingredientId===t[1]);return l==null?[xt(e,0,n)]:[xt(e,0,n),...Qr(l,t.slice(1),[...r,e.ingredientId])]},Yr=(e,t,r,n)=>{const l=Ht(e,t,r,n,[],1);return Kr(l)},Vl=(e,t,r,n,l)=>{const o=Ht(e,t,r,n,[],1);return Qr(o,l)},Zr=e=>e.join("=>"),Ul={"Bakery Oven":10,"Blast Furnace":50,Bloomery:10,Campfire:10,"Cast Iron Stove":10,"Cement Kiln":50,Kiln:50,"Oil Refinery":50},en=[1,.9,.75,.6,.55,.5];var Wl=()=>{const{mainState:e,get:t,allCraftableProducts:r,tagsResource:n,allItemsAndTagsWithPrice:l}=U(),[o,s]=ae({simpleMode:!0,showRecipes:!1,showPersonalPrices:!1,showRecipeTree:!1,focusedProdPath:[]},"PriceCalculatorPriceCalcStore"),[i,c]=F(),[u,d]=F({}),g=$(()=>Yr(Object.values(r())??[],u(),n?.()?.Tags??{},i()??"")),m=$(()=>o.focusedProdPath.length===0?void 0:o.focusedProdPath[o.focusedProdPath.length-1]),p=$(()=>g().find(R=>R.ingredientId==m())),h=$(()=>p()?.selectedVariant?.Recipe),C=$(()=>h()?.SkillNeeds?.[0]?.Skill??""),_=$(()=>qr(p()?.recipeVariants??[],u()[m()??""])),I=$(()=>_()?.Variant.Key??""),N=$(()=>o.simpleMode?0:t.craftModule(I())),x=$(()=>o.simpleMode?1:t.craftAmmount(I())),w=$(()=>o.simpleMode?!1:t.craftLavish(I())),S=$(()=>o.simpleMode?1:t.craftLevel(C())),T=$(()=>o.simpleMode?10:t.recipeMargin(I())),O=$(()=>{const R=_()?.Variant;return R==null?[]:t.costPercentage(R.Key)??Zo(R)}),L=$(()=>{const R=_();return R==null?[]:R.Variant.Ingredients.map(B=>{const we=en[N()]*(w()?.95:1),Re=D(B.Ammount*(B.IsStatic?1:we)),ce=Qo(Re,x());return{...B,calcQuantity:ce,unitPrice:Br(ce/x(),o.simpleMode?l()?.[de(B)]?.AvgPrice??0:t.personalPrice(de(B))),calcPrice:Br(ce,o.simpleMode?l()?.[de(B)]?.AvgPrice??0:t.personalPrice(de(B)))}})}),J=[.5,.45,.4,.35,.3,.25,.2],X=$(()=>h()?.SkillNeeds.length??0>0?J[S()]:1),re=$(()=>(h()?.BaseLaborCost??0)*X()),ne=$(()=>re()/1e3*e.calorieCost),oe=$(()=>ne()*x()),pe=$(()=>Ul[h()?.CraftingTable??""]??0),Ce=$(()=>(h()?.BaseCraftTime??0)*60*X()),le=$(()=>Ce()*pe()),ie=$(()=>le()*e.costPer1kJoule/1e3),Se=$(()=>ie()*x()),ve=$(()=>D((L()?.reduce((R,B)=>R+B.calcPrice,0)??0)+oe()+Se())),it=$(()=>D(ve()/x()*Yo(T()))),ct=$(()=>{const R=_();return R==null?[]:R.Variant.Products.map(B=>{const we=O().find(Re=>Re.prod===B.Name)?.perc??0;return{...B,costPercentage:we,productionCost:D(ve()/x()*(we/100)/B.Ammount),retailPrice:D(it()*(we/100)/B.Ammount)}})});return{state:o,craftModule:N,craftAmmount:x,craftLavish:w,craftLevel:S,recipeMargin:T,recipeIngredients:L,recipeCalories:re,recipeCalorieCost:ne,recipeCalorieTotalCost:oe,recipeCraftTimeInSeconds:Ce,recipeJoules:le,recipeFuelCost:ie,recipeFuelTotalCost:Se,totalIngredientCost:ve,unitCostWithProfit:it,recipeProducts:ct,focusedNode:p,selectedVariant:_,recipe:h,recipeSkill:C,variantId:I,selectedProduct:i,selectedRecipes:u,costPercentages:O,setSelectedProduct:R=>{c(R),R!=null&&s({focusedProdPath:[ue(R)]})},setSelectedRecipes:d,update:{toggleSimpleMode:()=>s(R=>({simpleMode:!R.simpleMode})),setShowRecipes:R=>s({showRecipes:R}),setShowPersonalPrices:R=>s({showPersonalPrices:R}),toggleShowRecipeTree:()=>s(R=>({showRecipeTree:!R.showRecipeTree})),replaceFocusedProductPath:R=>s({focusedProdPath:R}),focusChildProduct:R=>s(B=>({focusedProdPath:[...B.focusedProdPath,R]}))},calcExplanation:(R,B)=>{const Re=L().map(Q=>` - ${Q.calcQuantity}(${x()===1?"":x()+"x"}${Q.Ammount}${Q.IsStatic?"":"x"+en[N()]}${!Q.IsStatic&&w()?"x0.95":""}) ${Vt(Q)} @ ${t.personalPrice(de(Q))} ${B} = ${Q.calcPrice} ${B}`),ce=ct().find(Q=>Q.Name===R);return[`Calculated cost of ${R} = ${ce?.productionCost} ${B}`,`Using recipe ${p()?.selectedVariant?.Variant.Key} at table ${h()?.CraftingTable} with module lvl ${N()}`,`From ${ce?.Ammount!==1?`1/${ce?.Ammount} of `:""}${ce?.costPercentage!==100?`${ce?.costPercentage}% of `:""}${D(ve()/x())} ${B} ${x()>1?`(total of ${ve()} each) `:""}from the sum of ingredients for ${x()} repetition(s):`,...Re,oe()>0?` - Labor ${D(oe()??0)} ${B}`:void 0,le()>0?` - Fuel ${D(Se())} ${B}`:void 0].filter(Q=>!!Q).join(`
`)}}};const tn=dt({}),zl=e=>{const t=Bl(),r=Wl(),n={listProductsStore:t,priceCalcStore:r};return a(tn.Provider,{value:n,get children(){return e.children}})},K=()=>Ye(tn),Gl=b("<button></button>");var V=e=>(()=>{const t=Gl.cloneNode(!0);return tt(t,"click",e.onClick,!0),f(t,()=>e.children),A(()=>t.className=j("bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-sm font-semibold py-1 px-2 border rounded",e.class??"")),t})();Y(["click"]);const Hl=b('<div><div class="flex items-center h-5"><input type="checkbox" class="bg-bgColor-primary hover:bg-bgColor-primary-hover border-borderColor-primary hover:border-borderColor-hover border h-4 w-4 rounded cursor-pointer focus:outline-none"></div><div class="text-sm px-2"><label class="text-textColor-primary font-medium select-none cursor-pointer"></label></div></div>');var be=e=>{const t=e.fieldId??e.label.replaceAll(" ","_");return(()=>{const r=Hl.cloneNode(!0),n=r.firstChild,l=n.firstChild,o=n.nextSibling,s=o.firstChild;return l.addEventListener("change",i=>e.onChange(i.currentTarget.checked)),Oe(l,"id",t),Oe(l,"aria-describedby",t),Oe(s,"for",t),f(s,()=>e.label),A(i=>{const c=j("flex items-start",{"flex-row":!e.left,"flex-row-reverse":e.left},e.class),u=e.checked;return c!==i._v$&&(r.className=i._v$=c),u!==i._v$2&&(l.checked=i._v$2=u),i},{_v$:void 0,_v$2:void 0}),r})()};const Xl=b('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-1 flex"></div><div class="mt-2 overflow-auto"></div></div></div>'),ql=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),rn=10;var Jl=()=>{const{listProductsStore:{state:e,update:{hidePricesForProductsModal:t}},priceCalcStore:r}=K(),{allProductsInStores:n,currentCurrency:l,update:o,tagsResource:s}=U(),[i,c]=F(1),[u,d]=F(!1),[g,m]=F(!0),p=$(()=>e.showPricesForProductsModal==null?[]:e.showPricesForProductsModal.isSpecificProduct?[e.showPricesForProductsModal.name]:s?.()?.Tags?.[e.showPricesForProductsModal.name]??[]),h=$(()=>n()?.some(N=>Ae(p(),[N.ItemName])&&N.CurrencyName===l())??!1);Pe(()=>d(h()));const C=$(()=>n()?.filter(N=>Ae(p(),[N.ItemName])&&(!l()||!u()||N.CurrencyName===l())&&(!g()||!N.Buying&&N.Quantity>0)).sort((N,x)=>N.Buying===x.Buying?N.Price-x.Price:N.Buying?1:-1)),_=$(()=>Fr(i(),rn,C())),I=$(()=>Dr(rn,C()));return(()=>{const N=y(()=>!!e.showPricesForProductsModal,!0);return()=>N()&&a(Wt,{onClose:t,get children(){const x=Xl.cloneNode(!0),w=x.firstChild,S=w.firstChild,T=S.nextSibling;return f(w,a(zt,{get children(){return["Ingame prices for product",y(()=>p().length>1?"s":""),":"," ",y(()=>p().join(", "))]}}),S),f(S,a(be,{label:"Show only buyable products",get checked(){return g()},onChange:O=>m(O)}),null),f(S,a(be,{label:"Show only offers in selected currency",get checked(){return u()},onChange:O=>d(O)}),null),f(T,a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Product Name"}),a(E,{children:"Store Name"}),a(E,{children:"Store Owner"}),a(E,{children:"Quantity"}),a(E,{children:"Price"})]}}),a(ee,{get children(){return a(G,{get each(){return _()},children:O=>(()=>{const L=ql.cloneNode(!0),J=L.firstChild,X=J.nextSibling,re=X.nextSibling,ne=re.nextSibling,oe=ne.nextSibling;return f(J,()=>O.ItemName),f(X,()=>O.StoreName),f(re,()=>O.StoreOwner),f(ne,()=>O.Buying?`Buying ${O.Limit} for`:`Selling ${O.MaxNumWanted} for`),f(oe,()=>r.state.simpleMode&&`${O.Price} ${O.CurrencyName}`,null),f(oe,(()=>{const pe=y(()=>!r.state.simpleMode,!0);return()=>pe()&&a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{onClick:()=>{o.personalPrice(ue(O.ItemName),O.CurrencyName,O.Price),e.showPricesForProductsModal!=null&&!e.showPricesForProductsModal.isSpecificProduct&&o.personalPrice(He(e.showPricesForProductsModal.name),O.CurrencyName,O.Price)},get children(){return`${O.Price} ${O.CurrencyName}`}})}})})(),null),L})()})}})]}}),null),f(T,a(st,{get currentPage(){return i()},get totalPages(){return I()},onChange:c}),null),x}})})()};const Kl=b('<div class="relative"><input class="bg-bgColor-primary hover:bg-bgColor-primary-hover focus:bg-bgColor-primary-hover rounded-md border border-border-primary h-8 px-2 pr-8 rounded-md text-sm font-small focus:outline-none text-textColor border-borderColor-primary hover:border-borderColor-hover" type="search" name="search" placeholder="Search"><button type="submit" class="absolute right-2 top-2"><svg class="text-textColor h-6 w-6 fill-current" xmlns="http://www.w3.org/2000/svg" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 80 80" style="enable-background:new 0 0 56.966 56.966;" width="256px" height="256px"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path></svg></button></div>');var nn=e=>(()=>{const t=Kl.cloneNode(!0),r=t.firstChild;return r.$$input=n=>e.onChange(n.currentTarget.value),A(()=>r.value=e.value),t})();Y(["input"]);var Ql={"custom-number-input":"_custom-number-input_11t1w_1"};const Yl=b('<div><button data-action="decrement" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover border w-10 rounded-l cursor-pointer outline-none"><span class="m-auto text-1xl font-thin">\u2212</span></button><input type="number" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover text-center w-full border-t border-b font-semibold text-md outline-none" name="custom-input-number"><button data-action="increment" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover border-l border-t border-b w-10 cursor-pointer outline-none"><span class="m-auto text-1xl font-thin">+</span></button><button data-action="saveecovalue" class="bg-bgColor-primary hover:bg-bgColor-primary-hover text-textColor border-borderColor-primary hover:border-borderColor-hover border w-10 rounded-r cursor-pointer outline-none"><span class="m-auto text-1xl font-thin"><svg xmlns="http://www.w3.org/2000/svg" height="20" viewBox="0 -960 960 960" width="24"><path d="M160-160v-80h109q-51-44-80-106t-29-134q0-112 68-197.5T400-790v84q-70 25-115 86.5T240-480q0 54 21.5 99.5T320-302v-98h80v240H160Zm440 0q-50 0-85-35t-35-85q0-48 33-82.5t81-36.5q17-36 50.5-58.5T720-480q53 0 91.5 34.5T858-360q42 0 72 29t30 70q0 42-29 71.5T860-160H600Zm116-360q-7-41-27-76t-49-62v98h-80v-240h240v80H691q43 38 70.5 89T797-520h-81ZM600-240h260q8 0 14-6t6-14q0-8-6-14t-14-6h-70v-50q0-29-20.5-49.5T720-400q-29 0-49.5 20.5T650-330v10h-50q-17 0-28.5 11.5T560-280q0 17 11.5 28.5T600-240Zm120-80Z"></path></svg></span></button></div>');var Xe=e=>(()=>{const t=Yl.cloneNode(!0),r=t.firstChild,n=r.nextSibling,l=n.nextSibling,o=l.nextSibling;return r.$$click=()=>e.onChange(D((e.value??0)-1)),n.addEventListener("change",s=>e.onChange(D(Number(s.currentTarget.value)))),l.$$click=()=>e.onChange(D((e.value??0)+1)),o.$$click=()=>e.onSaveValueToEco(D(e.value??0)),A(s=>{const i=j(Ql["custom-number-input"],"flex flex-row h-8 w-24 rounded-md",e.class),c=e.value??"";return i!==s._v$&&(t.className=s._v$=i),c!==s._v$2&&(n.value=s._v$2=c),s},{_v$:void 0,_v$2:void 0}),t})();Y(["click"]);var yt=e=>{const{currentCurrency:t,get:r,update:n}=U(),l=async o=>{await fl({ItemId:e.personalPriceId,NewPrice:o})};return t()?a(Xe,{get value(){return r.personalPrice(e.personalPriceId)},onChange:o=>n.personalPrice(e.personalPriceId,t(),o),onSaveValueToEco:l,get class(){return e.class}}):'"select currency"'},Xt=e=>{const{currentCurrency:t,tagsResource:r,allProductsInStores:n,allItemsAndTagsWithPrice:l}=U(),o=$(()=>{const s=e.isSpecificItem?[e.name]:r?.()?.Tags?.[e.name]??[],i=n()?.filter(u=>s.includes(u.ItemName))??[];if(i.length<=0)return{errorMessage:"no offers"};const c=t()?i.filter(u=>u.CurrencyName===t())??[]:[];return t()&&c.length===0?{calculatedPrice:"no offers in currency"}:{calculatedPrice:t()?l()?.[e.id]?.AvgPrice:0}});return o().errorMessage?()=>o().errorMessage:a(k,{noStyle:!0,text:"Click for ingame prices. Select currency for average.",get children(){return a(V,{onClick:()=>e.showPricesForProductsModal(e.name,e.isSpecificItem),get children(){return[y(()=>!t()&&"select currency"),y((()=>{const s=y(()=>!!(t()&&o()),!0);return()=>s()&&`${o().calculatedPrice??"?"} ${t()}`})())]}})}})};const Zl=b('<tr><td colspan="6"><div class="flex justify-center"><div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div></div></td></tr>');var qt=e=>a(Ue,{get when(){return e.show()},get children(){return Zl.cloneNode(!0)}});const es=b('<div class="flex justify-between"><div></div><div class="flex gap-2 mb-2"></div></div>'),ts=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),rs=b("<div></div>"),ns=b('<div class="flex"></div>');var os=()=>{const{isLoadingResources:e,currentCurrency:t,allProfessions:r,allCraftingTables:n}=U(),{listProductsStore:l,priceCalcStore:o}=K();return(()=>{const s=y(()=>o.selectedProduct()==null,!0);return()=>s()&&[(()=>{const i=es.cloneNode(!0),c=i.firstChild,u=c.nextSibling;return f(c,a(k,{text:"Click to filter items being sold by stores owned by you (set your name in the header above)",origin:"NW",direction:"NE",get children(){return a(be,{label:"Only show what I'm selling",get checked(){return l.state.filterByOwner},onChange:d=>l.update.setFilterByOwner(d)})}})),f(u,a(nn,{get value(){return l.state.search},get onChange(){return l.update.setSearch}}),null),f(u,a(Ne,{get value(){return l.state.filterProfession},get values(){return[{value:"",text:"Filter by Profession"},...r()?.map(d=>({value:d,text:d}))??[]]},onChange:d=>l.update.setFilterProfession(`${d}`),origin:"SE",direction:"SW"}),null),f(u,a(Ne,{get value(){return l.state.filterCraftingTable},get values(){return[{value:"",text:"Filter by crafting station"},...n()?.map(d=>({value:d,text:d}))??[]]},onChange:d=>l.update.setFilterCraftingTable(`${d}`),origin:"SE",direction:"SW"}),null),f(u,a(V,{onClick:()=>l.update.clearFilters(),children:"Clear filters"}),null),i})(),a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Product Name"}),a(E,{children:"Profession/Craft Station"}),a(E,{children:"Average price"}),a(E,{children:"Personal price"})]}}),a(ee,{get children(){return[a(qt,{show:e}),a(G,{get each(){return l.paginatedProducts()},children:i=>(()=>{const c=ts.cloneNode(!0),u=c.firstChild,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling;return f(u,a(k,{noStyle:!0,text:"Click to calculate price for this item",origin:"NW",direction:"NE",get children(){return a(V,{onClick:()=>o.setSelectedProduct(i.Name),get children(){return i.Name}})}})),f(d,()=>i.RecipeVariants.map(p=>(p.Recipe.SkillNeeds.length>0?p.Recipe.SkillNeeds:[{Skill:Hr,Level:0}]).map(h=>({Skill:h.Skill,SkillLevel:h.Level,craftingTable:p.Recipe.CraftingTable})).flat()).flat().filter((p,h,C)=>C.findIndex(_=>_.Skill===p.Skill&&_.SkillLevel===p.SkillLevel&&_.craftingTable===p.craftingTable)===h).filter(p=>Mr(l.state.filterProfession,p.Skill)&&Mr(l.state.filterCraftingTable,p.craftingTable)).map((p,h)=>(()=>{const C=rs.cloneNode(!0);return f(C,[a(k,{noStyle:!0,text:"Click to filter by profession",get children(){return a(V,{onClick:()=>l.update.setFilterProfession(p.Skill),get children(){return p.Skill}})}}),y(()=>` lvl${p.SkillLevel}`)],null),f(C,()=>p.Skill&&" @ ",null),f(C,a(k,{noStyle:!0,text:"Click to filter by craft station",get children(){return a(V,{onClick:()=>l.update.setFilterCraftingTable(p.craftingTable),get children(){return p.craftingTable}})}}),null),A(()=>C.className=j({"mt-1":h>0})),C})())),f(g,a(Xt,{get id(){return de({IsSpecificItem:!0,Name:i.Name,Tag:""})},get name(){return i.Name},isSpecificItem:!0,get showPricesForProductsModal(){return l.update.showPricesForProductsModal}})),f(m,()=>!t()&&"select currency",null),f(m,(()=>{const p=y(()=>!!t(),!0);return()=>p()&&(()=>{const h=ns.cloneNode(!0);return f(h,a(yt,{get personalPriceId(){return de({IsSpecificItem:!0,Name:i.Name,Tag:""})}}),null),f(h,a(V,{class:"ml-2",onClick:()=>o.setSelectedProduct(i.Name),children:"Calculate now"}),null),h})()})(),null),c})()})]}})]}}),a(st,{get currentPage(){return l.state.currentPage},get totalPages(){return l.totalPages()},get onChange(){return l.update.setCurrentPage}})]})()};const ls=b("<div><button><div></div></button><div></div></div>"),ss=b('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg>'),is=b('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>');var Jt=e=>{const[t,r]=F(e.startsOpen??!1);return(()=>{const n=ls.cloneNode(!0),l=n.firstChild,o=l.firstChild,s=l.nextSibling;return l.$$click=()=>!e.notCollapsible&&r(i=>!i),f(l,()=>e.headerText,o),f(o,(()=>{const i=y(()=>!!(!e.notCollapsible&&t()),!0);return()=>i()&&ss.cloneNode(!0)})(),null),f(o,(()=>{const i=y(()=>!e.notCollapsible&&!t(),!0);return()=>i()&&is.cloneNode(!0)})(),null),f(s,()=>e.children),A(i=>{const c=j("border-borderColor-primary text-textColor border rounded",e.class),u=j("bg-bgColor-primary-hover border-borderColor-primary px-8 py-5 px-5 py-3 flex w-full justify-between",{"border-b":t(),"cursor-default":e.notCollapsible}),d=j("px-8 py-5",{hidden:!t()});return c!==i._v$&&(n.className=i._v$=c),u!==i._v$2&&(l.className=i._v$2=u),d!==i._v$3&&(s.className=i._v$3=d),i},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()};Y(["click"]);const cs=b("<span></span>");var xe=e=>e.text&&(()=>{const t=cs.cloneNode(!0);return f(t,()=>e.text),A(()=>t.className=j("font-semibold",{[e.class??""]:!!e.class})),t})();const as=b('<div class="inline-block mx-2"></div>');var on=e=>[y((()=>{const t=y(()=>(e.recipeVariants?.length??0)===1,!0);return()=>t()&&a(xe,{class:"px-2",get text(){return e.recipeVariants?.[0].Recipe.Untranslated}})})()),y((()=>{const t=y(()=>(e.recipeVariants?.length??0)>1,!0);return()=>t()&&(()=>{const r=as.cloneNode(!0);return f(r,a(Ne,{get value(){return e.selectedValue},get values(){return[{value:"",text:"No recipe"},...(e.recipeVariants?.map(n=>({text:n.Variant.Name,value:n.Variant.Key}))??[]).sort(qo(n=>n.text))]},onChange:n=>e.setSelected(`${n}`)})),r})()})())];const us=b('<div class="absolute p-2 border rounded top-0 right-0"></div>');var ds=()=>{const{priceCalcStore:e}=K();return(()=>{const t=us.cloneNode(!0);return f(t,a(be,{label:"show recipes",get checked(){return e.state.showRecipes},onChange:r=>e.update.setShowRecipes(r),left:!0}),null),f(t,a(be,{label:"show personal price",get checked(){return e.state.showPersonalPrices},onChange:r=>e.update.setShowPersonalPrices(r),left:!0}),null),t})()};const fs=b('<div class="relative"></div>'),hs=b('<span>Recipe tree for product <span class="font-bold"></span></span>'),gs=b('<div class="mt-1 flex items-center"></div>'),ms=b('<div class="inline-block py-1 px-4"></div>'),ps=b('<span class="ml-2">with recipe</span>'),vs=b('<span class="border-borderColor-primary border rounded px-2 py-1 ml-2 font-normal"></span>'),$s=b('<span class="ml-2">for</span>');var bs=()=>{const{allCraftableProducts:e,tagsResource:t,currentCurrency:r}=U(),{priceCalcStore:n}=K(),l=$(()=>Yr(Object.values(e())??[],n.selectedRecipes(),t?.()?.Tags??{},n.selectedProduct()??"")),o=$(()=>Zr(n.state.focusedProdPath));return a(Jt,{notCollapsible:!0,startsOpen:!0,get headerText(){return(()=>{const s=hs.cloneNode(!0),i=s.firstChild,c=i.nextSibling;return f(c,()=>n.selectedProduct()),s})()},class:"mt-4",get children(){const s=fs.cloneNode(!0);return f(s,a(G,{get each(){return l()},children:i=>(()=>{const c=gs.cloneNode(!0);return f(c,(()=>{const u=y(()=>i.recipeVariants.length>0,!0);return()=>u()&&a(k,{noStyle:!0,text:"Click to calculate price",get children(){return a(V,{get class(){return j("inline-block py-1 px-4",{"bg-bgColor-primary-hover":Zr(i.path)===o()})},onClick:()=>n.update.replaceFocusedProductPath(i.path),get children(){return i.productName}})}})})(),null),f(c,(()=>{const u=y(()=>i.recipeVariants.length===0,!0);return()=>u()&&(()=>{const d=ms.cloneNode(!0);return f(d,()=>i.productName),d})()})(),null),f(c,(()=>{const u=y(()=>!!(n.state.showRecipes&&(i.recipeVariants?.length??0)>0),!0);return()=>u()&&ps.cloneNode(!0)})(),null),f(c,(()=>{const u=y(()=>!!n.state.showRecipes,!0);return()=>u()&&a(on,{get selectedValue(){return i.selectedVariant?.Variant.Key??""},get recipeVariants(){return i.recipeVariants},setSelected:d=>n.setSelectedRecipes(g=>({...g,[i.ingredientId]:d}))})})(),null),f(c,(()=>{const u=y(()=>!!(n.state.showRecipes&&!!i.selectedVariant?.Variant.Key),!0);return()=>u()&&["at table",(()=>{const d=vs.cloneNode(!0);return f(d,()=>i.recipeVariants.find(g=>g.Variant.Key===i.selectedVariant?.Variant.Key)?.Recipe.CraftingTable),d})()]})(),null),f(c,(()=>{const u=y(()=>!!n.state.showPersonalPrices,!0);return()=>u()&&[$s.cloneNode(!0),a(yt,{class:"mx-2",get personalPriceId(){return i.ingredientId}}),y(r)]})(),null),A(()=>c.style.setProperty("margin-left",`${i.level*30}px`)),c})()}),null),f(s,a(ds,{}),null),s}})};const xs=b("<div><span></span></div>");var Ie=e=>(()=>{const t=xs.cloneNode(!0),r=t.firstChild;return f(r,()=>e.text),f(t,()=>e.children,null),A(()=>t.className=j("flex",{"flex-row gap-2":!e.vertical,"flex-col gap-1":!!e.vertical})),t})();const ys=Array.from(Array(7)).map((e,t)=>({value:t,text:"Level "+(t+1)}));var Cs=e=>a(Ne,{get value(){return e.level},values:ys,onChange:t=>e.onSelectLevel(Number(t))});const Ss="Recipes",ws="CraftingTables",Ps="Tags",_s="Stores",ln="3.2.2";var ye;(function(e){e[e.BUY=0]="BUY",e[e.SELL=1]="SELL",e[e.BOTH=2]="BOTH"})(ye||(ye={}));const sn={BurnableFuel:"Burnable Fuel"};var Ns=e=>{const{get:t,currentCurrency:r,allProductsInStores:n,allItemsAndTagsWithPrice:l}=U(),o=$(()=>{const s=t.itemsInTag(sn.BurnableFuel),i=s.map(m=>m.Name),c=n()?.filter(m=>i.includes(m.ItemName))??[];if(c.length<=0)return{errorMessage:"no offers"};const u=r()?c.filter(m=>m.CurrencyName===r())??[]:[];if(r()&&u.length===0)return{calculatedPrice:"no offers in currency"};const g=u.filter(m=>!m.Buying&&m.Quantity>0).reduce(({ProdName:m,PricePerJoule:p},h)=>{const C=h.ItemName,_=l()[ue(C)]?.AvgPrice??0,I=(s.find(x=>x.Name===C)?.Fuel??0)*2,N=I===0?0:_/I;return m.length===0||N<p?{ProdName:C,PricePerJoule:N}:{ProdName:m,PricePerJoule:p}},{ProdName:"",PricePerJoule:0});return g.ProdName.length===0?{calculatedPrice:"no valid offers in currency"}:{calculatedPrice:r()?D(g.PricePerJoule*1e3):0}});return o().errorMessage?()=>o().errorMessage:a(k,{noStyle:!0,text:"Click for ingame fuel prices. Select currency for average.",get children(){return a(V,{onClick:()=>e.showPricesForFuelModal(),get children(){return[y(()=>!r()&&"select currency"),y((()=>{const s=y(()=>!!(r()&&o()),!0);return()=>s()&&`${o().calculatedPrice??"?"} ${r()}`})())]}})}})};const Es=b('<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block self-center" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>');var Kt=()=>Es.cloneNode(!0);const Is=b('<div class="inline-block px-2 py-1"></div>');var Ts=e=>{const{tagsResource:t,allCraftableProducts:r}=U(),{priceCalcStore:n}=K(),l=de(e.ingredient),o=r()?.[e.ingredient.Name]?.RecipeVariants?.length>0;return!o&&e.ingredient.IsSpecificItem?()=>e.ingredient.Name:o&&e.ingredient.IsSpecificItem?a(k,{noStyle:!0,get text(){return`Click to calculate price for ${e.ingredient.Name}`},get children(){return a(V,{onClick:()=>n.update.focusChildProduct(l),get children(){return e.ingredient.Name}})}}):!o&&!e.ingredient.IsSpecificItem?a(k,{get text(){return`One of: ${t?.()?.Tags?.[e.ingredient.Tag]?.join(", ")}`},origin:"NW",direction:"NE",get children(){const s=Is.cloneNode(!0);return f(s,()=>`Tag ${e.ingredient.Tag}`),s}}):a(k,{noStyle:!0,get text(){return`Click to calculate price for one of: ${t?.()?.Tags?.[e.ingredient.Tag]?.join(", ")}`},origin:"NW",direction:"NE",get children(){return a(V,{onClick:()=>n.update.focusChildProduct(l),get children(){return`Tag ${e.ingredient.Tag}`}})}})};const Rs=b('<span class="pr-1"></span>'),Os=b('<tr><td>Labor</td><td><div></div><div>(<!> Calories)</div></td><td></td><td><div class="flex flex-row gap-2"></div></td><td></td><td></td></tr>'),As=b("<tr><td></td><td></td><td></td><td></td><td></td><td></td></tr>"),ks=b('<tr><td>Fuel</td><td><div> seconds</div><div>(<!> Joules)</div></td><td></td><td><div class="flex flex-row gap-2"></div></td><td></td><td></td></tr>');var Ls=()=>{const{mainState:e,update:t}=U(),{priceCalcStore:r,listProductsStore:n}=K(),l="px-6 py-4 whitespace-nowrap text-sm";return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Ingredient name"}),a(E,{children:"Quantity"}),a(E,{children:"Average price"}),a(E,{children:"Personal price"}),a(E,{children:"Unit price"}),a(E,{children:"Total price"})]}}),a(ee,{get children(){return[a(G,{get each(){return r.recipeIngredients()},children:o=>(()=>{const s=As.cloneNode(!0),i=s.firstChild,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling;return i.className=l,f(i,a(Ts,{ingredient:o})),c.className=l,f(c,()=>o.calcQuantity),u.className=l,f(u,a(Xt,{get id(){return de(o)},get name(){return o.IsSpecificItem?o.Name:o.Tag},get isSpecificItem(){return o.IsSpecificItem},get showPricesForProductsModal(){return n.update.showPricesForProductsModal}})),d.className=l,f(d,a(yt,{get personalPriceId(){return de(o)}})),g.className=l,f(g,()=>D(o.unitPrice)),m.className=l,f(m,()=>D(o.calcPrice)),s})()}),(()=>{const o=Os.cloneNode(!0),s=o.firstChild,i=s.nextSibling,c=i.firstChild,u=c.nextSibling,d=u.firstChild,g=d.nextSibling;g.nextSibling;const m=i.nextSibling,p=m.nextSibling,h=p.firstChild,C=p.nextSibling,_=C.nextSibling;return s.className=l,i.className=l,f(c,()=>(r.recipe()?.BaseLaborCost??0)*r.craftAmmount()),f(u,()=>D((r.recipeCalories()??0)*r.craftAmmount()),g),m.className=l,p.className=l,f(h,a(Xe,{get value(){return D(e.calorieCost)},onChange:I=>t.calorieCost(I)}),null),f(h,a(k,{noStyle:!0,text:"Price per 1000 calories.",get children(){return a(Kt,{})}}),null),C.className=l,f(C,a(k,{noStyle:!0,text:"Labor cost is calculated using price per 1000 calories.",get children(){return[(()=>{const I=Rs.cloneNode(!0);return f(I,()=>D(r.recipeCalorieCost()??0)),I})(),a(Kt,{})]}})),_.className=l,f(_,()=>D(r.recipeCalorieTotalCost()??0)),o})(),y((()=>{const o=y(()=>(r.recipeJoules()??0)>0,!0);return()=>o()&&(()=>{const s=ks.cloneNode(!0),i=s.firstChild,c=i.nextSibling,u=c.firstChild,d=u.firstChild,g=u.nextSibling,m=g.firstChild,p=m.nextSibling;p.nextSibling;const h=c.nextSibling,C=h.nextSibling,_=C.firstChild,I=C.nextSibling,N=I.nextSibling;return i.className=l,c.className=l,f(u,()=>(r.recipeCraftTimeInSeconds()??0)*r.craftAmmount(),d),f(g,()=>D((r.recipeJoules()??0)*r.craftAmmount()),p),h.className=l,f(h,a(Ns,{get showPricesForFuelModal(){return n.update.showPricesForFuelModal}})),C.className=l,f(_,a(Xe,{get value(){return D(e.costPer1kJoule)},onChange:x=>t.costPer1kJoule(x)}),null),f(_,a(k,{noStyle:!0,text:"Price per 1000 Joules",get children(){return a(Kt,{})}}),null),I.className=l,f(I,()=>r.recipeFuelCost()),N.className=l,f(N,()=>D(r.recipeFuelTotalCost()??0)),s})()})())]}})]}})};const Ms=b("<tr><td></td><td></td><td></td><td></td></tr>");var Fs=()=>{const{priceCalcStore:e,listProductsStore:t}=K(),r="px-6 py-4 whitespace-nowrap text-sm";return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Ingredient name"}),a(E,{children:"Quantity"}),a(E,{children:"Price"}),a(E,{children:"Cost"})]}}),a(ee,{get children(){return a(G,{get each(){return e.recipeIngredients()},children:n=>(()=>{const l=Ms.cloneNode(!0),o=l.firstChild,s=o.nextSibling,i=s.nextSibling,c=i.nextSibling;return o.className=r,f(o,()=>Vt(n)),s.className=r,f(s,()=>n.calcQuantity),i.className=r,f(i,a(Xt,{get id(){return de(n)},get name(){return n.IsSpecificItem?n.Name:n.Tag},get isSpecificItem(){return n.IsSpecificItem},get showPricesForProductsModal(){return t.update.showPricesForProductsModal}})),c.className=r,f(c,()=>D(n.unitPrice)),l})()})}})]}})};const Ds=b('<span><span class="font-medium">Ingredients</span>: Calculating costs for <!> using recipe</span>'),Bs=b('<div class="mt-8"></div>'),js=b('<div class="flex items-center mt-8">Recipe production cost is</div>'),Vs=b('<div class="flex gap-5 flex-wrap"></div>');var Us=()=>{const{get:e,update:t}=U(),{priceCalcStore:r,listProductsStore:n}=K();return a(Jt,{notCollapsible:!0,startsOpen:!0,class:"mt-4",get headerText(){return(()=>{const l=Ds.cloneNode(!0),o=l.firstChild,s=o.nextSibling,i=s.nextSibling;return i.nextSibling,f(l,a(xe,{get text(){return r.focusedNode()?.productName}}),i),f(l,a(on,{get selectedValue(){return r.focusedNode()?.selectedVariant?.Variant.Key??""},get recipeVariants(){return r.focusedNode()?.recipeVariants??[]},setSelected:c=>r.setSelectedRecipes(u=>({...u,[r.focusedNode()?.ingredientId??""]:c}))}),null),f(l,(()=>{const c=y(()=>!!r.focusedNode()?.selectedVariant?.Variant.Key,!0);return()=>c()&&["at table",a(xe,{get text(){return r.recipe()?.CraftingTable},class:"pl-2"})]})(),null),l})()},get children(){const l=y(()=>!!r.selectedVariant(),!0);return()=>l()&&[y((()=>{const o=y(()=>!r.state.simpleMode,!0);return()=>o()&&(()=>{const s=Vs.cloneNode(!0);return f(s,a(Ie,{vertical:!0,text:"Craft amount:",get children(){return a(Ee,{options:[{text:"1",value:1},{text:"10",value:10},{text:"100",value:100}],onChange:i=>t.craftAmmount(r.variantId(),Number(i)),get selected(){return e.craftAmmount(r.variantId())}})}}),null),f(s,a(Ie,{vertical:!0,text:"Upgrade module in use:",get children(){return a(Ee,{get options(){return Array.from(new Array(6)).map((i,c)=>({text:`M${c}`,value:c}))},onChange:i=>t.craftModule(r.variantId(),Number(i)),get selected(){return e.craftModule(r.variantId())}})}}),null),f(s,a(Ie,{vertical:!0,text:"Lavish Talent:",get children(){return a(be,{label:"Enabled",onChange:i=>t.craftLavish(r.variantId(),i),get checked(){return e.craftLavish(r.variantId())}})}}),null),f(s,(()=>{const i=y(()=>!!(r.recipe()?.SkillNeeds.length??0>0),!0);return()=>i()&&a(Ie,{vertical:!0,get text(){return r.recipeSkill()+" Level:"},get children(){return a(Cs,{get level(){return r.craftLevel()},onSelectLevel:c=>t.craftLevel(r.recipeSkill(),c)})}})})(),null),s})()})()),(()=>{const o=Bs.cloneNode(!0);return f(o,(()=>{const s=y(()=>!!r.state.simpleMode,!0);return()=>s()&&a(Fs,{})})(),null),f(o,(()=>{const s=y(()=>!r.state.simpleMode,!0);return()=>s()&&a(Ls,{})})(),null),o})(),(()=>{const o=js.cloneNode(!0);return o.firstChild,f(o,a(xe,{class:"pl-1",get text(){return`${r.totalIngredientCost()}`}}),null),f(o,(()=>{const s=y(()=>r.craftAmmount()>1&&(r.totalIngredientCost()??0)>0,!0);return()=>s()&&[", cost per repetition is",a(xe,{class:"pl-1",get text(){return`${D((r.totalIngredientCost()??0)/r.craftAmmount())}`}})]})(),null),o})()]}})};const Ws=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var zs=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=K();return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Product name"}),a(E,{children:"Amount"}),a(E,{children:"Cost Percentage"}),a(E,{children:"Production cost"}),a(E,{children:"Retail price"}),a(E,{children:"Personal price"})]}}),a(ee,{get children(){return a(G,{get each(){return r.recipeProducts()},children:n=>(()=>{const l=Ws.cloneNode(!0),o=l.firstChild,s=o.nextSibling,i=s.nextSibling,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling;return f(o,a(k,{noStyle:!0,text:"Click to copy this fancy math to clipboard",get children(){return a(V,{onClick:()=>navigator.clipboard.writeText(r.calcExplanation(n.Name,e())),get children(){return n.Name}})}})),f(s,()=>n.Ammount),f(i,a(Xe,{get value(){return n.costPercentage},onChange:g=>t.costPercentage(r.variantId(),jr(r.costPercentages(),n.Name,g))})),f(c,a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{onClick:()=>t.personalPrice(ue(n.Name),e(),n.productionCost),get children(){return`${n.productionCost} ${e()}`}})}})),f(u,a(k,{noStyle:!0,text:"Click to set your personal price",get children(){return a(V,{class:"px-2 py-1",onClick:()=>t.personalPrice(ue(n.Name),e(),n.retailPrice),get children(){return`${n.retailPrice} ${e()}`}})}})),f(d,a(yt,{get personalPriceId(){return ue(n.Name)}})),l})()})}})]}})};const Gs=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var Hs=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=K();return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Product name"}),a(E,{children:"Amount"}),a(E,{children:"Cost Percentage"}),a(E,{children:"Retail price"})]}}),a(ee,{get children(){return a(G,{get each(){return r.recipeProducts()},children:n=>(()=>{const l=Gs.cloneNode(!0),o=l.firstChild,s=o.nextSibling,i=s.nextSibling,c=i.nextSibling;return f(o,()=>n.Name),f(s,()=>n.Ammount),f(i,a(Xe,{get value(){return n.costPercentage},onChange:u=>t.costPercentage(r.variantId(),jr(r.costPercentages(),n.Name,u))})),f(c,()=>`${n.retailPrice} ${e()}`),l})()})}})]}})};const Xs=b('<span><span class="font-medium">Products</span>: Distribute recipe costs between resulting products</span>'),qs=b('<div class="flex items-center mt-2">Cost per recipe with <!>% margin applied is </div>'),Js=b('<div class="mt-8"></div>'),Ks=b('<div class="flex gap-5 flex-wrap"></div>'),Qs=[0,5,10,15,20,25,30,40,50,75].map(e=>({value:e,text:`${e} %`}));var Ys=()=>{const{currentCurrency:e,update:t}=U(),{priceCalcStore:r}=K();return a(Jt,{notCollapsible:!0,startsOpen:!0,class:"mt-6",get headerText(){return Xs.cloneNode(!0)},get children(){const n=y(()=>!!r.selectedVariant(),!0);return()=>n()&&[y((()=>{const l=y(()=>!r.state.simpleMode,!0);return()=>l()&&(()=>{const o=Ks.cloneNode(!0);return f(o,a(Ie,{vertical:!0,text:"Recipe margin:",get children(){return a(Ee,{options:Qs,onChange:s=>t.recipeMargin(r.variantId(),Number(s)),get selected(){return r.recipeMargin()}})}})),o})()})()),(()=>{const l=qs.cloneNode(!0),o=l.firstChild,s=o.nextSibling;return s.nextSibling,f(l,()=>r.recipeMargin(),s),f(l,a(xe,{class:"px-1",get text(){return`${r.unitCostWithProfit()}`}}),null),f(l,e,null),l})(),(()=>{const l=Js.cloneNode(!0);return f(l,()=>r.state.simpleMode&&Hs,null),f(l,()=>!r.state.simpleMode&&zs,null),l})()]}})};const Zs=b('<div class="bg-bgColor-primary-hover border rounded px-8 py-3 mt-4"><div class="font-semibold text-sm">Calculating price for: </div><div class="flex items-center gap-2"></div></div>'),ei=b("<div>&gt;</div>"),ti=b('<div class="inline-block py-1 px-1 font-semibold"></div>');var ri=()=>{const{allCraftableProducts:e,tagsResource:t,mainState:r}=U(),{priceCalcStore:n}=K(),l=$(()=>Vl(Object.values(e())??[],n.selectedRecipes(),t?.()?.Tags??{},n.selectedProduct()??"",n.state.focusedProdPath));return(()=>{const o=Zs.cloneNode(!0),s=o.firstChild,i=s.nextSibling;return f(i,a(G,{get each(){return l()},children:(c,u)=>[y((()=>{const d=y(()=>u()<l().length-1,!0);return()=>d()&&a(k,{noStyle:!0,text:"Click to calculate price",get children(){return a(V,{class:"inline-block py-1 px-4",onClick:()=>n.update.replaceFocusedProductPath(c.path),get children(){return c.productName}})}})})()),y((()=>{const d=y(()=>u()<l().length-1,!0);return()=>d()&&ei.cloneNode(!0)})()),y((()=>{const d=y(()=>u()===l().length-1,!0);return()=>d()&&(()=>{const g=ti.cloneNode(!0);return f(g,()=>c.productName),g})()})())]})),o})()};const ni=b('<div class="flex justify-between"><div class="flex gap-2"></div></div>');var oi=()=>{const{priceCalcStore:e}=K();return(()=>{const t=y(()=>e.selectedProduct()!==void 0,!0);return()=>t()&&[(()=>{const r=ni.cloneNode(!0),n=r.firstChild;return f(r,a(V,{onClick:()=>e.setSelectedProduct(void 0),children:"Back"}),n),f(n,a(Ee,{options:[{text:"Simple",value:"Simple"},{text:"Expanded",value:"Expanded"}],get onChange(){return e.update.toggleSimpleMode},get selected(){return e.state.simpleMode?"Simple":"Expanded"}}),null),f(n,a(Ee,{options:[{text:"Breadcrumb",value:"Breadcrumb"},{text:"Recipe tree",value:"RecipeTree"}],get onChange(){return e.update.toggleShowRecipeTree},get selected(){return e.state.showRecipeTree?"RecipeTree":"Breadcrumb"}}),null),r})(),y((()=>{const r=y(()=>!!e.state.showRecipeTree,!0);return()=>r()&&a(bs,{})})()),y((()=>{const r=y(()=>!e.state.showRecipeTree,!0);return()=>r()&&a(ri,{})})()),a(Us,{}),a(Ys,{})]})()};const li=b('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-1 flex"></div><div class="mt-4 overflow-auto"></div></div></div>'),si=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"> J</td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>'),cn=10;var ii=()=>{const{listProductsStore:{state:e,update:{hidePricesForFuelModal:t}}}=K(),{allProductsInStores:r,currentCurrency:n,get:l,update:o,tagsResource:s}=U(),[i,c]=F(1),[u,d]=F(!1),[g,m]=F(!0),p=$(()=>l.itemsInTag(sn.BurnableFuel)),h=$(()=>p().map(x=>x.Name)),C=$(()=>r()?.some(x=>Ae(h(),[x.ItemName])&&x.CurrencyName===n())??!1);Pe(()=>d(C()));const _=$(()=>r()?.filter(x=>Ae(h(),[x.ItemName])&&(!n()||!u()||x.CurrencyName===n())&&(!g()||!x.Buying&&x.Quantity>0)).map(x=>{const w=(p().find(S=>S.Name===x.ItemName)?.Fuel??0)*2;return{...x,Joules:w,PricePer1kJ:D(x.Price/w*1e3)}}).sort((x,w)=>x.Buying===w.Buying?x.PricePer1kJ-w.PricePer1kJ:x.Buying?1:-1)),I=$(()=>Fr(i(),cn,_())),N=$(()=>Dr(cn,_()));return(()=>{const x=y(()=>!!e.showPricesForFuelModal,!0);return()=>x()&&a(Wt,{onClose:t,get children(){const w=li.cloneNode(!0),S=w.firstChild,T=S.firstChild,O=T.nextSibling;return f(S,a(zt,{children:"Ingame prices for burnable fuel"}),T),f(T,a(be,{label:"Show only buyable products",get checked(){return g()},onChange:L=>m(L)}),null),f(T,a(be,{label:"Show only offers in selected currency",get checked(){return u()},onChange:L=>d(L)}),null),f(O,a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Product Name"}),a(E,{children:"Store Name"}),a(E,{children:"Store Owner"}),a(E,{children:"Quantity"}),a(E,{children:"Price"}),a(E,{children:"Joules"}),a(E,{children:"1k Joule price"})]}}),a(ee,{get children(){return a(G,{get each(){return I()},children:L=>(()=>{const J=si.cloneNode(!0),X=J.firstChild,re=X.nextSibling,ne=re.nextSibling,oe=ne.nextSibling,pe=oe.nextSibling,Ce=pe.nextSibling,le=Ce.firstChild,ie=Ce.nextSibling;return f(X,()=>L.ItemName),f(re,()=>L.StoreName),f(ne,()=>L.StoreOwner),f(oe,()=>L.Buying?`Buying ${L.Limit} for`:`Selling ${L.MaxNumWanted} for`),f(pe,()=>L.Price),f(Ce,()=>L.Joules,le),f(ie,a(k,{noStyle:!0,text:"Click to set your personal fuel price",get children(){return a(V,{onClick:()=>{o.costPer1kJoule(L.PricePer1kJ)},get children(){return`${L.PricePer1kJ} ${L.CurrencyName}`}})}})),J})()})}})]}}),null),f(O,a(st,{get currentPage(){return i()},get totalPages(){return N()},onChange:c}),null),w}})})()},an=()=>a(zl,{get children(){return[a(os,{}),a(oi,{}),a(Jl,{}),a(ii,{})]}});const ci=b('<input class="bg-bgColor-primary hover:bg-bgColor-primary-hover rounded-md border h-8 px-2 text-sm font-small focus:outline-none text-textColor border-borderColor-primary hover:border-borderColor-hover" type="search" placeholder="User name">');var ai=()=>{const{mainState:e,update:t}=U();return(()=>{const r=ci.cloneNode(!0);return r.addEventListener("change",n=>t.userName(n.currentTarget.value)),A(()=>r.value=e.userName),r})()};const ui=b('<header class="shadow relative"><div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"><div><h1 class="text-3xl font-bold"></h1><span></span></div></div></header>'),di=b('<div class="flex justify-between pt-3"><div class="flex gap-4"></div></div>');var fi=e=>{const{serversResource:t,currentServer:r,currentCurrency:n,update:l,allCurrencies:o}=U(),s=$(()=>{const i=t?.()?.filter(c=>c.isOnline)?.map(c=>({value:c.key,text:c.name}))??[];return i.find(c=>c.value===r())?i:[...i,...t?.()?.filter(c=>c.key===r()).map(c=>({value:c.key,text:c.name}))??[]]});return(()=>{const i=ui.cloneNode(!0),c=i.firstChild,u=c.firstChild,d=u.firstChild,g=d.nextSibling;return f(d,()=>e.currentRoute()?.text),f(g,()=>e.currentRoute()?.description),f(c,(()=>{const m=y(()=>!!e.currentRoute()?.includeHeaderFields,!0);return()=>m()&&(()=>{const p=di.cloneNode(!0),h=p.firstChild;return f(p,a(Ie,{text:"Username:",vertical:!0,get children(){return a(ai,{})}}),h),f(h,a(Ie,{text:"Currency:",vertical:!0,get children(){return a(Ne,{get value(){return n()},get values(){return[{value:"",text:"Select a currency",selectable:!1},...o()?.map(C=>({value:C,text:C}))??[]]},onChange:C=>l.currency(`${C}`),origin:"SE",direction:"SW"})}}),null),f(h,(()=>{const C=y(()=>!{}.VITE_SERVER,!0);return()=>C()&&a(Ie,{text:"Eco Server:",vertical:!0,get children(){return[y((()=>{const _=y(()=>s()?.length>0,!0);return()=>_()&&a(Ne,{get value(){return r()},get values(){return[{value:"",text:"Select your server",selectable:!1},...s(),...t?.loading??!0?[{value:"",text:"Loading online servers...",selectable:!1}]:[]]},onChange:I=>{I!==""&&l.server(`${I}`)},origin:"SE",direction:"SW"})})()),y(()=>(t?.loading??!0)&&s()?.length<=0&&"loading..."),y(()=>!(t?.loading??!0)&&s()?.length<=0&&"try again later")]}})})(),null),p})()})(),null),i})()};const hi=typeof process=="object"&&process.env&&{}.NODE_DEBUG&&/\bsemver\b/i.test({}.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var un=hi;const gi="2.0.0",mi=256,pi=Number.MAX_SAFE_INTEGER||9007199254740991,vi=16;var dn={SEMVER_SPEC_VERSION:gi,MAX_LENGTH:mi,MAX_SAFE_INTEGER:pi,MAX_SAFE_COMPONENT_LENGTH:vi},Qt={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r}=dn,n=un;t=e.exports={};const l=t.re=[],o=t.src=[],s=t.t={};let i=0;const c=(u,d,g)=>{const m=i++;n(u,m,d),s[u]=m,o[m]=d,l[m]=new RegExp(d,g?"g":void 0)};c("NUMERICIDENTIFIER","0|[1-9]\\d*"),c("NUMERICIDENTIFIERLOOSE","[0-9]+"),c("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),c("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),c("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),c("PRERELEASEIDENTIFIER",`(?:${o[s.NUMERICIDENTIFIER]}|${o[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NUMERICIDENTIFIERLOOSE]}|${o[s.NONNUMERICIDENTIFIER]})`),c("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),c("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),c("BUILDIDENTIFIER","[0-9A-Za-z-]+"),c("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),c("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),c("FULL",`^${o[s.FULLPLAIN]}$`),c("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),c("LOOSE",`^${o[s.LOOSEPLAIN]}$`),c("GTLT","((?:<|>)?=?)"),c("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),c("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),c("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),c("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),c("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),c("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),c("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),c("COERCERTL",o[s.COERCE],!0),c("LONETILDE","(?:~>?)"),c("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",c("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),c("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),c("LONECARET","(?:\\^)"),c("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",c("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),c("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),c("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),c("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),c("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",c("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),c("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),c("STAR","(<|>)?=?\\s*\\*"),c("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),c("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Qt,Qt.exports);const $i=["includePrerelease","loose","rtl"],bi=e=>e?typeof e!="object"?{loose:!0}:$i.filter(t=>e[t]).reduce((t,r)=>(t[r]=!0,t),{}):{};var xi=bi;const fn=/^[0-9]+$/,hn=(e,t)=>{const r=fn.test(e),n=fn.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},yi=(e,t)=>hn(t,e);var Ci={compareIdentifiers:hn,rcompareIdentifiers:yi};const Ct=un,{MAX_LENGTH:gn,MAX_SAFE_INTEGER:St}=dn,{re:mn,t:pn}=Qt.exports,Si=xi,{compareIdentifiers:qe}=Ci;class fe{constructor(t,r){if(r=Si(r),t instanceof fe){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>gn)throw new TypeError(`version is longer than ${gn} characters`);Ct("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?mn[pn.LOOSE]:mn[pn.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>St||this.major<0)throw new TypeError("Invalid major version");if(this.minor>St||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>St||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(l=>{if(/^[0-9]+$/.test(l)){const o=+l;if(o>=0&&o<St)return o}return l}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(Ct("SemVer.compare",this.version,this.options,t),!(t instanceof fe)){if(typeof t=="string"&&t===this.version)return 0;t=new fe(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof fe||(t=new fe(t,this.options)),qe(this.major,t.major)||qe(this.minor,t.minor)||qe(this.patch,t.patch)}comparePre(t){if(t instanceof fe||(t=new fe(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],l=t.prerelease[r];if(Ct("prerelease compare",r,n,l),n===void 0&&l===void 0)return 0;if(l===void 0)return 1;if(n===void 0)return-1;if(n===l)continue;return qe(n,l)}while(++r)}compareBuild(t){t instanceof fe||(t=new fe(t,this.options));let r=0;do{const n=this.build[r],l=t.build[r];if(Ct("prerelease compare",r,n,l),n===void 0&&l===void 0)return 0;if(l===void 0)return 1;if(n===void 0)return-1;if(n===l)continue;return qe(n,l)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let n=this.prerelease.length;for(;--n>=0;)typeof this.prerelease[n]=="number"&&(this.prerelease[n]++,n=-2);n===-1&&this.prerelease.push(0)}r&&(qe(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}var wi=fe;const vn=wi,Pi=(e,t,r)=>new vn(e,r).compare(new vn(t,r));var _i=Pi;const Ni=_i,Ei=(e,t,r)=>Ni(e,t,r)<0;var Ii=Ei;const Ti=b('<div role="alert"></div>'),Ri=b('<div class="max-w-7xl mx-auto py-2 px-4 sm:px-6 lg:px-8"></div>'),Oi=b('<p class="font-bold">Critical error found:</p>'),Ai=b('<p class="text-sm">Not connected to server files. Check if mod is installed and configured properly on your eco server.</p>'),ki=b('<p class="text-sm">Not all files are being exported. Either restart the eco server or run commands /dumplivedata and /dumprecipes as admin.</p>'),Li=b('<p class="font-bold">Warning:</p>'),Mi=b(`<p class="text-sm">Your server files haven't been updated in <!> hours. Make sure the mod is running and configured properly on your eco server.</p>`),Fi=b('<p class="font-bold">Info:</p>'),Di=b('<p class="text-sm">Eco server is running an outdated version of the required mod <i>Live data exporter</i>: <!>. Please download latest version <!> from <a class="underline" href="https://eco.mod.io/live-data-exporter" target="_blank">https://eco.mod.io</a>.</p>'),Bi=e=>{const t=new Date;var r=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());return Math.round((r.getTime()-e.getTime())/36e5)};var H;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.None=3]="None"})(H||(H={}));const ji=e=>Ii(e,ln),Vi=({hasNoData:e,hasOnlySomeData:t,lastUpdateInHours:r,isPluginOutdated:n})=>e||t?H.Error:r>4?H.Warning:n?H.Info:H.None;var Ui=()=>{const{storesResource:e,recipesResource:t,tagsResource:r}=U(),n=$(()=>{const l=!!e?.()?.PluginVersion,o=!!t?.()?.PluginVersion,s=!!r?.()?.PluginVersion,i=!l&&!o&&!s,c=!l||!o||!s,u=e?.()?.ExportedAt,d=u?Bi(tl(u)):0,g=e?.()?.PluginVersion,m=!!g&&ji(g);return{loading:e?.loading||t?.loading||r?.loading,logLevel:Vi({hasNoData:i,hasOnlySomeData:c,lastUpdateInHours:d,isPluginOutdated:m}),hasNoData:i,hasOnlySomeData:c,lastUpdateInHours:d,isPluginOutdated:m,pluginVersion:g}});return(()=>{const l=Ti.cloneNode(!0);return f(l,(()=>{const o=y(()=>!n().loading&&n().logLevel!=H.None,!0);return()=>o()&&(()=>{const s=Ri.cloneNode(!0);return f(s,(()=>{const i=y(()=>n().logLevel===H.Error,!0);return()=>i()&&Oi.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Error&&n().hasNoData),!0);return()=>i()&&Ai.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Error&&!n().hasNoData&&n().hasOnlySomeData),!0);return()=>i()&&ki.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>n().logLevel===H.Warning,!0);return()=>i()&&Li.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Warning&&n().lastUpdateInHours),!0);return()=>i()&&(()=>{const c=Mi.cloneNode(!0),u=c.firstChild,d=u.nextSibling;return d.nextSibling,f(c,()=>n().lastUpdateInHours,d),c})()})(),null),f(s,(()=>{const i=y(()=>n().logLevel===H.Info,!0);return()=>i()&&Fi.cloneNode(!0)})(),null),f(s,(()=>{const i=y(()=>!!(n().logLevel===H.Info&&n().isPluginOutdated),!0);return()=>i()&&(()=>{const c=Di.cloneNode(!0),u=c.firstChild,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling,p=m.nextSibling,h=p.nextSibling;return h.nextSibling,f(c,()=>n().pluginVersion,m),f(c,()=>ln,h),c})()})(),null),s})()})()),A(()=>l.className=j({"border-t border-b":!n().loading&&n().logLevel!=H.None,"bg-bgColor-error border-borderColor-error text-textColor-error":n().logLevel===H.Error,"bg-bgColor-warning border-borderColor-warning text-textColor-warning":n().logLevel===H.Warning,"bg-bgColor-success border-borderColor-success text-textColor-success":n().logLevel===H.Info})),l})()};const Wi=b('<div class="bg-bgColor-primary text-textColor min-h-full"><main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"></main></div>'),zi=gt(()=>at(()=>Promise.resolve().then(function(){return cc}),void 0)),Gi=gt(()=>at(()=>Promise.resolve().then(function(){return hc}),void 0)),Hi=gt(()=>at(()=>Promise.resolve().then(function(){return xc}),void 0)),Xi=gt(()=>at(()=>Promise.resolve().then(function(){return Pc}),void 0)),Me={PriceCalculator:{text:"Price Calculator",description:"Allows calculation of price for products in a recipe based on all ingredients / raw materials necessary",href:"/",includeHeaderFields:!0},Market:{text:"Ingame market",description:"Buy/sell orders of all stores ingame",href:"/market",includeHeaderFields:!0},RawData:{text:"Raw data",description:"Download the raw files that this app uses for your own personal uses",href:"/rawData"},Personal:{text:"Personal",description:"List and edit current cached personal values",href:"/personal"},Home:{text:"About",description:"",href:"/about"}},qi=()=>{const e=Pr(),t=$(()=>Object.keys(Me).map(n=>({...Me[n],highlight:e.pathname===Me[n].href}))),r=$(()=>t().find(n=>n.highlight));return a(hl,{get children(){const n=Wi.cloneNode(!0),l=n.firstChild;return f(n,a(Bo,{get routes(){return t()}}),l),f(n,a(Ui,{}),l),f(n,a(fi,{currentRoute:r}),l),f(l,a(So,{get children(){return[a(ze,{get path(){return Me.Market.href},get element(){return a(zi,{})}}),a(ze,{get path(){return Me.RawData.href},get element(){return a(Gi,{})}}),a(ze,{get path(){return Me.Personal.href},get element(){return a(Hi,{})}}),a(ze,{get path(){return Me.Home.href},get element(){return a(Xi,{})}}),a(ze,{path:"/",get element(){return a(an,{})}}),a(ze,{path:"/*all",get element(){return a(an,{})}})]}})),n}})},Ji=()=>zn(()=>a(Co,{get children(){return a(qi,{})}}),document.getElementById("root"));Ji();var me;(function(e){e[e.PRODUCT=0]="PRODUCT",e[e.STORE=1]="STORE",e[e.QUANTITY=2]="QUANTITY",e[e.PRICE=3]="PRICE"})(me||(me={}));var Te;(function(e){e[e.STORE=0]="STORE",e[e.BALANCE=1]="BALANCE",e[e.OFFERS=2]="OFFERS"})(Te||(Te={}));const Ki=(e,t,r,n)=>{const l=n?-1:1;switch(r){case 1:return(e.Balance-t.Balance)*l;case 2:return(e.AllOffers.length-t.AllOffers.length)*l;default:return ke(e.Name,t.Name)*l}},Qi=(e,t,r,n)=>{const l=n?-1:1;switch(r){case 1:return ke(e.StoreName,t.StoreName)*l;case 2:return(e.Quantity-t.Quantity)*l;case 3:return(e.Price-t.Price)*l;default:return ke(e.ItemName,t.ItemName)*l}};var Yi=()=>{const{storesResource:e,allProductsInStores:t,isLoadingResources:r,mainState:n,update:l,currentCurrency:o}=U(),[s,i]=ae({search:"",isStoresTable:!0,filterOrderType:ye.BOTH,storesPage:1,productsPage:1,filterByOwner:!1,showStoreModal:void 0,sortingProducts:{column:0,directionDesc:!1},sortingStores:{column:0,directionDesc:!1},pageSize:100},"MarketStore"),c=$(()=>e?.()?.Stores?.filter(h=>(ge(s.search,h.Name??"")||ge(s.search,h.Owner??""))&&ge(o(),h.CurrencyName??"")&&(!s.filterByOwner||n.userName.length===0||ge(n.userName,h.Owner??""))).sort((h,C)=>Ki(h,C,s.sortingStores.column,s.sortingStores.directionDesc)).slice((s.storesPage-1)*s.pageSize,s.storesPage*s.pageSize)),u=$(()=>Math.ceil((e?.()?.Stores?.length??0)/s.pageSize)),d=$(()=>(t()??[]).filter(h=>(ge(s.search,h.ItemName??"")||ge(s.search,h.StoreName??"")||ge(s.search,h.StoreOwner??""))&&ge(o(),h.CurrencyName??"")&&(!s.filterByOwner||n.userName.length===0||ge(n.userName,h.StoreOwner??""))&&(s.filterOrderType===ye.BOTH||s.filterOrderType===ye.BUY&&h.Buying||s.filterOrderType===ye.SELL&&!h.Buying))),g=$(()=>Math.ceil((d()?.length??0)/s.pageSize)),m=$(()=>d().sort((h,C)=>Qi(h,C,s.sortingProducts.column,s.sortingProducts.directionDesc)).slice((s.productsPage-1)*s.pageSize,s.productsPage*s.pageSize)),[p]=zr(h=>i({search:h,storesPage:1,productsPage:1}),200);return Pe(()=>{n.currency,i({storesPage:1,productsPage:1})}),{state:s,stores:c,isLoadingResources:r,setSearch:p,setCurrencyFilter:h=>l.currency(h),toggleTableType:()=>i(h=>({isStoresTable:!h.isStoresTable})),setOrderType:h=>i({filterOrderType:h}),setStoresPage:h=>i({storesPage:h}),setPageSize:h=>i({pageSize:h}),setProductsPage:h=>i({productsPage:h}),setFilterByOwner:h=>i({filterByOwner:h}),setShowStoreModal:h=>i({showStoreModal:h}),toggleSortStoresTable:h=>{i(C=>({sortingStores:{column:h,directionDesc:C.sortingStores.column!==h?!1:!C.sortingStores.directionDesc}}))},toggleSortProductTable:h=>{i(C=>({sortingProducts:{column:h,directionDesc:C.sortingProducts.column!==h?!1:!C.sortingProducts.directionDesc}}))},products:m,storesTotalPages:u,productsTotalPages:g,clearFilters:()=>i({search:"",storesPage:1,productsPage:1,filterByOwner:!1})}};const Zi=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td></tr>');var ec=e=>a(Z,{get children(){return[a(te,{get children(){return[a(E,{onSort:()=>e.toggleSortColumn(Te.STORE),get directionDesc(){return e.currentSort.column===Te.STORE?e.currentSort.directionDesc:void 0},children:"Store Name"}),a(E,{children:"Store Owner"}),a(E,{children:"Currency"}),a(E,{onSort:()=>e.toggleSortColumn(Te.BALANCE),get directionDesc(){return e.currentSort.column===Te.BALANCE?e.currentSort.directionDesc:void 0},children:"Balance"}),a(E,{onSort:()=>e.toggleSortColumn(Te.OFFERS),get directionDesc(){return e.currentSort.column===Te.OFFERS?e.currentSort.directionDesc:void 0},children:"Offers"})]}}),a(ee,{get children(){return[a(qt,{get show(){return e.isLoadingResource}}),a(G,{get each(){return e.stores()},children:t=>(()=>{const r=Zi.cloneNode(!0),n=r.firstChild,l=n.nextSibling,o=l.nextSibling,s=o.nextSibling,i=s.nextSibling;return f(n,a(k,{noStyle:!0,text:"Click to show store orders",get children(){return a(V,{onClick:()=>e.setShowStoreModal(t.Name),get children(){return t.Name}})}})),f(l,a(k,{noStyle:!0,text:"Click to filter by store owner",get children(){return a(V,{onClick:()=>e.setSearch(t.Owner),get children(){return t.Owner}})}})),f(o,a(k,{noStyle:!0,text:"Click to select this currency",get children(){return a(V,{onClick:()=>e.setCurrencyFilter(t.CurrencyName),get children(){return t.CurrencyName}})}})),f(s,()=>t.Balance),f(i,()=>t.AllOffers.length),r})()})]}})]}});const tc=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td><td class="px-6 py-4 whitespace-nowrap text-sm">&nbsp;</td></tr>');var rc=e=>a(Z,{get children(){return[a(te,{get children(){return[a(E,{onSort:()=>e.toggleSortColumn(me.PRODUCT),get directionDesc(){return e.currentSort.column===me.PRODUCT?e.currentSort.directionDesc:void 0},children:"Product Name"}),a(E,{onSort:()=>e.toggleSortColumn(me.STORE),get directionDesc(){return e.currentSort.column===me.STORE?e.currentSort.directionDesc:void 0},children:"Store Name"}),a(E,{children:"Store Owner"}),a(E,{onSort:()=>e.toggleSortColumn(me.QUANTITY),get directionDesc(){return e.currentSort.column===me.QUANTITY?e.currentSort.directionDesc:void 0},children:"Quantity"}),a(E,{onSort:()=>e.toggleSortColumn(me.PRICE),get directionDesc(){return e.currentSort.column===me.PRICE?e.currentSort.directionDesc:void 0},children:"Price"})]}}),a(ee,{get children(){return[a(qt,{get show(){return e.isLoadingResources}}),a(G,{get each(){return e.products()},children:t=>(()=>{const r=tc.cloneNode(!0),n=r.firstChild,l=n.nextSibling,o=l.nextSibling,s=o.nextSibling,i=s.nextSibling,c=i.firstChild;return f(n,a(k,{noStyle:!0,text:"Click to filter by product name",get children(){return a(V,{onClick:()=>e.setSearch(t.ItemName),get children(){return t.ItemName}})}})),f(l,a(k,{noStyle:!0,text:"Click to show store orders",get children(){return a(V,{onClick:()=>e.setShowStoreModal(t.StoreName),get children(){return t.StoreName}})}})),f(o,a(k,{noStyle:!0,text:"Click to filter by store owner",get children(){return a(V,{onClick:()=>e.setSearch(t.StoreOwner),get children(){return t.StoreOwner}})}})),f(s,(()=>{const u=y(()=>!!t.Buying,!0);return()=>u()?["Buying ",a(xe,{get text(){return`${t.Limit}`}})," for"]:["Selling ",a(xe,{get text(){return`${t.MaxNumWanted}`}})," for"]})()),f(i,a(xe,{get text(){return`${t.Price}`}}),c),f(i,()=>t.CurrencyName,null),r})()})]}})]}}),nc=e=>a(Ne,{get value(){return e.pageSize},values:[{value:10,text:"10 rows"},{value:20,text:"20 rows"},{value:50,text:"50 rows"},{value:100,text:"100 rows"},{value:200,text:"200 rows"},{value:1e3,text:"1000 rows"}],onChange:t=>e.onChange(Number(t)),origin:"SE",direction:"SW"});const oc=b('<div class="sm:flex sm:items-start"><div class="flex-grow mt-3 text-center sm:mt-0 sm:text-left"><div class="mt-2 flex lg:flex-row gap-2 sm:flex-col"></div></div></div>'),$n=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm text-right"></td></tr>');var lc=e=>{const{allProductsInStores:t}=U(),r=$(()=>t()?.filter(o=>o.StoreName===e.storeName)),n=$(()=>r()?.filter(o=>!o.Buying)),l=$(()=>r()?.filter(o=>o.Buying));return(()=>{const o=y(()=>!!e.storeName,!0);return()=>o()&&a(Wt,{get onClose(){return e.hideModal},get children(){const s=oc.cloneNode(!0),i=s.firstChild,c=i.firstChild;return f(i,a(zt,{get children(){return["Ingame orders for store ",y(()=>e.storeName)]}}),c),f(c,a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Selling"}),a(E,{children:"Price"}),a(E,{children:"Quantity"})]}}),a(ee,{get children(){return a(G,{get each(){return n()},children:u=>(()=>{const d=$n.cloneNode(!0),g=d.firstChild,m=g.nextSibling,p=m.nextSibling;return f(g,()=>u.ItemName.length<=25&&u.ItemName,null),f(g,(()=>{const h=y(()=>u.ItemName.length>25,!0);return()=>h()&&a(k,{get text(){return u.ItemName},get children(){return[y(()=>u.ItemName.substring(0,17)),"..."]}})})(),null),f(m,()=>u.Price),f(p,()=>u.MaxNumWanted),d})()})}})]}}),null),f(c,a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Purchasing"}),a(E,{children:"Price"}),a(E,{children:"Max wanted"})]}}),a(ee,{get children(){return a(G,{get each(){return l()},children:u=>(()=>{const d=$n.cloneNode(!0),g=d.firstChild,m=g.nextSibling,p=m.nextSibling;return f(g,()=>u.ItemName.length<=25&&u.ItemName,null),f(g,(()=>{const h=y(()=>u.ItemName.length>25,!0);return()=>h()&&a(k,{get text(){return u.ItemName},get children(){return[y(()=>u.ItemName.substring(0,17)),"..."]}})})(),null),f(m,()=>u.Price),f(p,()=>u.Limit),d})()})}})]}}),null),s}})})()};const sc=b('<div><div class="flex justify-between"><div></div><div class="flex items-center gap-2 mb-2"></div></div></div>');var ic=()=>{const{state:e,stores:t,isLoadingResources:r,setSearch:n,setCurrencyFilter:l,toggleTableType:o,setOrderType:s,products:i,storesTotalPages:c,productsTotalPages:u,setStoresPage:d,setProductsPage:g,setFilterByOwner:m,setShowStoreModal:p,setPageSize:h,toggleSortStoresTable:C,toggleSortProductTable:_,clearFilters:I}=Yi();return(()=>{const N=sc.cloneNode(!0),x=N.firstChild,w=x.firstChild,S=w.nextSibling;return f(w,a(k,{text:"click to filter by stores owned by you (set your name in the header above)",origin:"NW",direction:"NE",get children(){return a(be,{label:"Only show my store's",get checked(){return e.filterByOwner},onChange:T=>m(T)})}})),f(S,a(nn,{get value(){return e.search},onChange:n}),null),f(S,a(Ee,{options:[{text:"Stores",value:"Stores"},{text:"Products",value:"Products"}],onChange:()=>o(),get selected(){return e.isStoresTable?"Stores":"Products"}}),null),f(S,a(Ue,{get when(){return!e.isStoresTable},get children(){return a(Ee,{get options(){return[{text:"Buy",value:ye.BUY},{text:"Sell",value:ye.SELL},{text:"Both",value:ye.BOTH}]},onChange:T=>s(Number(T)),get selected(){return e.filterOrderType}})}}),null),f(S,a(V,{onClick:()=>I(),children:"Clear filters"}),null),f(S,a(nc,{get pageSize(){return e.pageSize},onChange:h}),null),f(N,a(Ue,{get when(){return e.isStoresTable},get children(){return[a(ec,{stores:t,isLoadingResource:r,setSearch:n,setCurrencyFilter:l,setShowStoreModal:p,get currentSort(){return e.sortingStores},toggleSortColumn:C}),a(st,{get currentPage(){return e.storesPage},get totalPages(){return c()},onChange:d})]}}),null),f(N,a(Ue,{get when(){return!e.isStoresTable},get children(){return[a(rc,{products:i,isLoadingResources:r,setSearch:n,setCurrencyFilter:l,setShowStoreModal:p,get currentSort(){return e.sortingProducts},toggleSortColumn:_}),a(st,{get currentPage(){return e.productsPage},get totalPages(){return u()},onChange:g})]}}),null),f(N,a(lc,{get storeName(){return e.showStoreModal},hideModal:()=>p(void 0)}),null),N})()},cc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ic});const ac=(e,t)=>{const r=new Blob([decodeURIComponent(encodeURI(JSON.stringify(t)))],{type:"application/json;charset=utf-8;"}),n=document.createElement("a");n.href=URL.createObjectURL(r),n.setAttribute("download",`${e}.json`),n.target="_blank",document.body.appendChild(n),n.click(),n?.parentNode?.removeChild(n)};var uc=()=>{const{currentServer:e}=U(),[t,r]=F(""),[n]=_e(t,l=>l?ol(e(),l).then(o=>({filename:l,json:o})):Promise.resolve(void 0));return Pe(()=>{const l=n()&&n()?.filename;l&&ac(l,n()?.json),r("")}),{downloadFile:r}};const dc=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-sm"></td><td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"><button class="text-textColor-success hover:underline">Download</button></td></tr>');var wt=({name:e,exportedAt:t,downloadFile:r})=>(()=>{const n=dc.cloneNode(!0),l=n.firstChild,o=l.nextSibling,s=o.nextSibling,i=s.firstChild;return f(l,e),f(o,t),i.$$click=()=>r(e),n})();Y(["click"]);var fc=()=>{const{storesResource:e,tagsResource:t,recipesResource:r,craftingTablesResource:n}=U(),{downloadFile:l}=uc(),o=$(()=>e?.()?.ExportedAt?.StringRepresentation??"Not exported"),s=$(()=>r?.()?.ExportedAt?.StringRepresentation??"Not exported"),i=$(()=>t?.()?.ExportedAt?.StringRepresentation??"Not exported"),c=$(()=>n?.()?.ExportedAt?.StringRepresentation??"Not exported");return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"File name"}),a(E,{children:"Last update"}),a(_l,{children:"Download"})]}}),a(ee,{get children(){return[y((()=>{const u=y(()=>!!e?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Stores",exportedAt:o,downloadFile:()=>l(_s)})})()),y((()=>{const u=y(()=>!!r?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Recipes",exportedAt:s,downloadFile:()=>l(Ss)})})()),y((()=>{const u=y(()=>!!t?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Tags",exportedAt:i,downloadFile:()=>l(Ps)})})()),y((()=>{const u=y(()=>!!n?.()?.ExportedAt,!0);return()=>u()&&a(wt,{name:"Crafting Tables",exportedAt:c,downloadFile:()=>l(ws)})})())]}})]}})},hc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:fc});const gc=b('<button><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-textColor" fill="currentColor" viewBox="0 0 1024 1024"><path d="M512 897.6c-108 0-209.6-42.4-285.6-118.4-76-76-118.4-177.6-118.4-285.6 0-108 42.4-209.6 118.4-285.6 76-76 177.6-118.4 285.6-118.4 108 0 209.6 42.4 285.6 118.4 157.6 157.6 157.6 413.6 0 571.2-76 76-177.6 118.4-285.6 118.4z m0-760c-95.2 0-184.8 36.8-252 104-67.2 67.2-104 156.8-104 252s36.8 184.8 104 252c67.2 67.2 156.8 104 252 104 95.2 0 184.8-36.8 252-104 139.2-139.2 139.2-364.8 0-504-67.2-67.2-156.8-104-252-104z"></path><path d="M707.872 329.392L348.096 689.16l-31.68-31.68 359.776-359.768z"></path><path d="M328 340.8l32-31.2 348 348-32 32z"></path></svg></button>');var Yt=e=>(()=>{const t=gc.cloneNode(!0);return tt(t,"click",e.onClick,!0),A(()=>t.className=j("hover:bg-bgColor-primary-hover rounded-full",e.class??"")),t})();Y(["click"]);const mc=b('<div class="group flex items-center"></div>'),pc=b('<tr><td class="px-6 py-4 whitespace-nowrap text-sm group flex"></td></tr>'),vc=b('<td class="px-6 py-4 whitespace-nowrap text-sm group"></td>'),$c=b('<div class="flex items-start"></div>');var bc=()=>{const{getState:e,update:t,clear:r}=U(),n=$(()=>[...new Set(Object.entries(e.personalPrice).flatMap(([l,o])=>Object.keys(o)))].sort(ke));return a(Z,{get children(){return[a(te,{get children(){return[a(E,{children:"Item name"}),a(G,{get each(){return n()},children:l=>a(E,{get children(){const o=mc.cloneNode(!0);return f(o,l,null),f(o,a(k,{noStyle:!0,text:"Click to delete all personal prices in this currency",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalCurrency(l)}})}}),null),o}})})]}}),a(ee,{get children(){return a(G,{get each(){return Object.entries(e.personalPrice).sort((l,o)=>ke(l[0],o[0]))},children:([l,o])=>(()=>{const s=pc.cloneNode(!0),i=s.firstChild;return f(i,()=>Vt(el(l)),null),f(i,a(k,{noStyle:!0,text:"Click to delete all personal prices for this item",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalPriceProduct(l)}})}}),null),f(s,a(G,{get each(){return n()},children:c=>(()=>{const u=vc.cloneNode(!0);return f(u,(()=>{const d=y(()=>o[c]===void 0,!0);return()=>d()&&a(V,{class:"opacity-0 group-hover:opacity-100",onClick:()=>t.personalPrice(l,c,0),children:"Set price"})})(),null),f(u,(()=>{const d=y(()=>o[c]!==void 0,!0);return()=>d()&&(()=>{const g=$c.cloneNode(!0);return f(g,a(Xe,{get value(){return o[c]},onChange:m=>t.personalPrice(l,c,m)}),null),f(g,a(k,{noStyle:!0,text:"Click to delete this personal price",get children(){return a(Yt,{class:"opacity-0 group-hover:opacity-100",onClick:()=>{r.personalPriceCurrency(l,c)}})}}),null),g})()})(),null),u})()}),null),s})()})}})]}})},xc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:bc});const yc="_changelog_9w0jh_1";var Cc={changelog:yc};const Sc=b(`<div><p>Hello and welcome,</p><p>I go by the nicknames of <i>Ucat</i> and <i>Fon</i> and i've been building this tool on my spare time. <br>This works hand in hand with a mod that outputs the data from the server that then this tool extracts to allow you to work with. More information on the mod can be found on the <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://mod.io/g/eco/m/live-data-exporter">mod's page</a>. You can also contact me using discord, my handle is Fon#2880.<br><br>Here's a brief explanation on current features:</p><p><b>Price calculator</b> page is where you can find all recipes in game and use them to figure out how much you should price your products in your store. No more excel or calculator, this tool does all those calculations for you. <br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/F3RWjCK5VcM">https://youtu.be/F3RWjCK5VcM</a></p><p><b>Ingame market</b> page is where you can check the products that are being sold at this moment in ingame stores. There are currently two views with different visibility level: one for stores and one for products. <br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/ZraPFAxvyjo">https://youtu.be/ZraPFAxvyjo</a></p><p><b>Raw data</b> page is where you can download the raw files i use on this tool to check raw data or to create your own tool.<br>Video tutorial here: <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://youtu.be/sUkygO9QyOE">https://youtu.be/sUkygO9QyOE</a></p><p><b>Personal</b> page is where you can see and edit all the personal prices and other default values you used. The tool remembers your last choices so that you don't have to.<br></p><br><br><p>PS: I could really use the help of a UX designer to improve this tool. If you have the skills and are willing to help, please reach out to me over discord. </p><br>If you like this tool and you wish to thank me for my efforts and/or you'd like to contribute to it's further development and maintenance consider <a class="no-underline hover:underline text-textColor-success" target="_blank" href="https://www.buymeacoffee.com/pricecalculator">buying me a coffee</a> for inspiration in future coding sessions. Thanks for appreciating my efforts.<br><br><div><h2>Latest changes</h2><h3>3.5.0 (2023-09-09)</h3><h4>Features</h4><ul><li>Added light and dark themes - preselects dark theme if enabled in operating system and can be customized by the user</li></ul><h3>3.4.1 (2023-08-07)</h3><h4>Bugfix</h4><ul><li>Check for online servers on the backend</li></ul><h3>3.4.0 (2023-08-06)</h3><h4>Features</h4><ul><li>Hide offline servers on server list</li><li>Select first online server by default</li></ul><h4>Bugfix</h4><ul><li>Minor fix to error when offline server was selected</li></ul></div></div>`);var wc=()=>(()=>{const e=Sc.cloneNode(!0),t=e.firstChild,r=t.nextSibling,n=r.nextSibling,l=n.nextSibling,o=l.nextSibling,s=o.nextSibling,i=s.nextSibling,c=i.nextSibling,u=c.nextSibling,d=u.nextSibling,g=d.nextSibling,m=g.nextSibling,p=m.nextSibling,h=p.nextSibling,C=h.nextSibling,_=C.nextSibling;return A(()=>_.className=Cc.changelog),e})(),Pc=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:wc});
